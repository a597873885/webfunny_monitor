!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){let r="",n=uni;var o,a;"undefined"!=typeof wx?n=wx:"undefined"!=typeof my&&(n=my),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",(o=n).btoa=o.btoa||function(e){for(var t,r,n,o,i="",s=0,c=(e=String(e)).length%3;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");i+=a.charAt((t=r<<16|n<<8|o)>>18&63)+a.charAt(t>>12&63)+a.charAt(t>>6&63)+a.charAt(63&t)}return c?i.slice(0,c-3)+"===".substring(c):i};const i={getWfStorageSync:function(e){return"undefined"!=typeof my?my.getStorageSync({key:e}).data:"undefined"!=typeof wx?n.getStorageSync(e):window?localStorage.getItem(e):n.getStorageSync(e)},setWfStorageSync:function(e,t){if("undefined"!=typeof my)my.setStorageSync({key:e,data:t});else if("undefined"!=typeof wx)n.setStorageSync(e,t);else{if(window)return localStorage.setItem(e,t);n.setStorageSync(e,t)}},getWfStorageKeysSync:function(){var e=[];if("undefined"!=typeof my||"undefined"!=typeof wx)e=n.getStorageInfoSync().keys;else if(window)for(var t in localStorage)e.push(t);else e=n.getStorageInfoSync().keys;return e}};var s=i.getWfStorageSync("WF_CONFIG"),c={s:!0,ia:[""],wc:40,pv:{s:"webfunny-pageview-switch",ia:[""]},je:{s:"webfunny-jserror-switch",ia:[""]},hl:{s:"webfunny-http-switch",ia:[""],uh:!1,rl:500,sl:500},rl:{s:"webfunny-resource-switch",ia:[""]},bl:{s:"webfunny-behavior-switch"},lc:{s:"webfunny-location-switch"}};if(s&&"string"==typeof s)try{c=JSON.parse(s)}catch(e){console.log("wfConfig error",e)}var u="webfunnyVersionFlag",f=i.getWfStorageSync("webfunnyDomain")||"&&&www.webfunny.cn&&&",l="http://"+f,d=l+"/wfMonitor/upMog",g=l+"/wfMonitor/upDLog",p="CUSTOMER_PV",h="CUS_LEAVE",y="PAGE_LOAD",m="HTTP_LOG",v="JS_ERROR",S="LAST_BROWSE_DATE",T="WM_PAGE_ENTRY_TIME",w="WM_VISIT_PAGE_COUNT",b="WEBFUNNY_COOKIE",C=[v,p,m,y],x=0;const O={[p]:[],STAY_TIME:[],[h]:[],[y]:[],[m]:[],HTTP_ERROR:[],[v]:[],SCREEN_SHOT:[],ELE_BEHAVIOR:[],RESOURCE_LOAD:[],CUSTOMIZE_BEHAVIOR:[]};var I=function(e){var t=new W("reload",0,"o","");t.simpleUrl=e,t.completeUrl=e,t.handleLogInfo(p,t)};class U{static getCurrentPages(){var e="";try{var t=getCurrentPages();t.length>0&&(e=getCurrentPages()[t.length-1].route)}catch(t){e=""}return e}static getUuid(){var e=U.formatDate((new Date).getTime(),"yMdhms");return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})+"-"+e}static perfSubtract(e,t){return 0===e||0===t?0:e-t}static getCustomerKey(){var e=U.getUuid(),t=i.getWfStorageSync("monitorCustomerKey");return t||(i.setWfStorageSync("monitorCustomerKey",e),t=e),t}static isTodayBrowse(e){var t=i.getWfStorageSync(e),r=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();return t&&r==t?!(!t||r!=t):(i.setWfStorageSync(e,r),!1)}static formatDate(e,t){var r=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,o=new Date(e).getDate(),a=new Date(e).getHours(),i=new Date(e).getMinutes(),s=new Date(e).getSeconds();return n=n>9?n:"0"+n,o=o>9?o:"0"+o,a=a>9?a:"0"+a,i=i>9?i:"0"+i,s=s>9?s:"0"+s,t.replace("y",r).replace("M",n).replace("d",o).replace("h",a).replace("m",i).replace("s",s)}static getPageKey(){var e=i.getWfStorageSync("monitorPageKey"),t=U.getUuid();return e&&/^[0-9a-z]{8}(-[0-9a-z]{4}){3}-[0-9a-z]{12}-\d{13}$/.test(e)||(e=t),e}static setPageKey(){i.setWfStorageSync("monitorPageKey",U.getUuid())}static ajax(e,t,r,o,a){n.request({method:e,url:t,data:r,header:{"Content-Type":"application/json"},success:e=>{try{"function"==typeof o&&o(e)}catch(e){console.log(e)}},fail:e=>{try{"function"==typeof a&&a(e)}catch(e){console.log(e)}}})}static uploadCusBehavior(e,t,r){var o={webMonitorId:U.getWebMonitorId(),userId:U.getCusInfo("userId"),uploadType:"CUSTOMIZE_BEHAVIOR",happenTime:(new Date).getTime(),behaviorType:U.b64EncodeUnicode(e),behaviorResult:U.b64EncodeUnicode(t),description:U.b64EncodeUnicode(r)};n.request({method:"POST",url:l+"/wfMonitor/upMyLog",data:{logs:[o]},header:{"Content-Type":"application/json"}})}static checkReqResLen(e="",t="",r){var n=e?JSON.stringify(e):"no param",o=t?JSON.stringify(t):"no result",a=parseInt(r.rl)||500,i=parseInt(r.sl)||500;return n&&n.length>a&&(n="too long"),o&&o.length>i&&(o="too long"),{requestText:n,responseText:o}}static encryptObj(e){if(e instanceof Array){for(var t=[],r=0;r<e.length;++r)t[r]=U.encryptObj(e[r]);return t}if(e instanceof Object){t={};for(var r in e)t[r]=U.encryptObj(e[r]);return t}return(e+="").length>50&&(e=e.substring(0,10)+"****"+e.substring(e.length-9,e.length)),e}static getDevice(){var e={};if("undefined"!=typeof my){var t=(e=n.getSystemInfoSync()).windowWidth,r=e.windowHeight;e.deviceSize=t+"×"+r}else if("undefined"!=typeof wx){var o=n.getDeviceInfo(),a=n.getWindowInfo(),i=n.getAppBaseInfo();t=(e=Object.assign({},o,a,i)).screenWidth,r=e.screenHeight;e.deviceSize=t+"×"+r}else if(window){var s={},c=navigator.userAgent,u=c.match(/(Android);?[\s\/]+([\d.]+)?/),f=c.match(/(iPad).*OS\s([\d_]+)/),l=!f&&c.match(/(iPhone\sOS)\s([\d_]+)/),d=c.match(/Android\s[\S\s]+Build\//);t=window.screen.width,r=window.screen.height;if(s.ios=s.android=s.iphone=s.ipad=s.androidChrome=!1,s.isWeixin=/MicroMessenger/i.test(c),s.os="web",s.deviceName="PC",s.deviceSize=t+"×"+r,u&&(s.os="android",s.osVersion=u[2],s.android=!0,s.androidChrome=c.toLowerCase().indexOf("chrome")>=0),(f||l)&&(s.os="ios",s.ios=!0),l&&(s.osVersion=l[2].replace(/_/g,"."),s.iphone=!0),f&&(s.osVersion=f[2].replace(/_/g,"."),s.ipad=!0),s.ios&&s.osVersion&&c.indexOf("Version/")>=0&&"10"===s.osVersion.split(".")[0]&&(s.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]),s.iphone){var g="iphone";320===t&&480===r?g="4":320===t&&568===r?g="5/SE":375===t&&667===r?g="6/7/8":414===t&&736===r?g="6/7/8 Plus":375===t&&812===r?g="X/S/Max":414===t&&896===r?g="11/Pro-Max":375===t&&812===r?g="11-Pro/mini":390===t&&844===r?g="12/Pro":428===t&&926===r&&(g="12-Pro-Max"),s.deviceName="iphone "+g}else if(s.ipad)s.deviceName="ipad";else if(d){for(var p=d[0].split(";"),h="",y=0;y<p.length;y++)-1!=p[y].indexOf("Build")&&(h=p[y].replace(/Build\//g,""));""==h&&(h=p[1]),s.deviceName=h.replace(/(^\s*)|(\s*$)/g,"")}if(-1==c.indexOf("Mobile")){var m=navigator.userAgent.toLowerCase();if(s.browserName="其他",m.indexOf("msie")>0){var v=m.match(/msie [\d.]+;/gi)[0];s.browserName="ie",s.browserVersion=v.split("/")[1]}else if(m.indexOf("edg")>0){v=m.match(/edg\/[\d.]+/gi)[0];s.browserName="edge",s.browserVersion=v.split("/")[1]}else if(m.indexOf("firefox")>0){v=m.match(/firefox\/[\d.]+/gi)[0];s.browserName="firefox",s.browserVersion=v.split("/")[1]}else if(m.indexOf("safari")>0&&m.indexOf("chrome")<0){v=m.match(/safari\/[\d.]+/gi)[0];s.browserName="safari",s.browserVersion=v.split("/")[1]}else if(m.indexOf("chrome")>0){v=m.match(/chrome\/[\d.]+/gi)[0];s.browserName="chrome",s.browserVersion=v.split("/")[1],m.indexOf("360se")>0&&(s.browserName="360")}}e={model:s.deviceName,system:s.os,platform:s.browserName,version:s.browserVersion,deviceSize:s.deviceSize}}else e=n.getSystemInfoSync();return e}static b64EncodeUnicode(e){var t=encodeURIComponent(e);try{return n.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}catch(e){return t}}static utf8_encode(e){if(!e)return"";var t="";e=e.replace(/\r\n/g,"\n");for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}static setWfCookie(e,t,r){try{var n={data:t,expires:r},o=i.getWfStorageSync(b);if(o){var a="string"==typeof o?JSON.parse(o):o;a[e]=n,i.setWfStorageSync(b,JSON.stringify(a))}else{var s={};s[e]=n,i.setWfStorageSync(b,JSON.stringify(s))}}catch(e){console.log("setWfCookie error")}}static getWfCookie(e){var t="";try{var r=i.getWfStorageSync(b);if(!r)return"";if(t=JSON.parse(r)){var n=t[e];if(!n)return"";var o=parseInt(n.expires,10);return(new Date).getTime()>o?(delete t[e],i.setWfStorageSync(b,JSON.stringify(t)),""):n.data}}catch(e){console.error("getWfCookie error",e)}return""}static getCusInfo(e){if(!e)return"";var t=i.getWfStorageSync("wmUserInfo"),r=(t?JSON.parse(t):{})[e];return r||""}static getWebMonitorId(){var e="jeffery_webmonitor";if(-1!==e.indexOf("_pro")){var t=U.getCusInfo("env");t&&(e=e.replace("_pro","_"+t))}return e}static checkIgnore(e,t){var r=!0;try{if(!t)return!0;for(var n=t.replace(/ /g,""),o=c[e].ia||[],a=0;a<o.length;a++){var i=o[a].replace(/ /g,"");if(i&&-1!=n.indexOf(i)){r=!1;break}}}catch(e){r=!0}return r}}class E{constructor(){var e=U.getCurrentPages();this.wmVersion=u,this.happenTime=(new Date).getTime(),this.webMonitorId=U.getWebMonitorId(),this.simpleUrl=e,this.completeUrl=e,this.customerKey=U.getCustomerKey(),this.sessionId=U.getWfCookie("webfunnySessionId"),this.userId=U.getCusInfo("userId"),this.projectVersion=U.getCusInfo("projectVersion")||"",this.firstUserParam=U.b64EncodeUnicode(U.getCusInfo("userTag")||""),this.secondUserParam=U.b64EncodeUnicode(U.getCusInfo("secondUserParam")||"")}handleLogInfo(e,t){try{var r=O[e],n=r||[],o=!1;switch(t.uploadType){case"CUSTOMER_PV":case"PAGE_LOAD":(a=r.filter(function(e){return e.uploadType===t.uploadType&&e.simpleUrl===t.simpleUrl&&t.happenTime-e.happenTime<100}))&&a.length>0&&(o=!0);break;case"JS_ERROR":(a=r.filter(function(e){return e.uploadType===t.uploadType&&e.errorMessage===t.errorMessage&&t.happenTime-e.happenTime<100}))&&a.length>0&&(o=!0);break;case"HTTP_LOG":var a;(a=r.filter(function(e){return e.uploadType===t.uploadType&&e.httpUrl===t.httpUrl&&e.statusResult===t.statusResult&&t.happenTime-e.happenTime<100}))&&a.length>0&&(o=!0)}if(!0===o)return;n.push(t),O[e]=n}catch(e){console.warn("handleLogInfo error.",e)}}}class W extends E{constructor(e,t,r,n){super();var o=U.getDevice();this.uploadType=p,this.pageKey=U.getPageKey(),this.deviceName=o.model,this.os=o.system,this.browserName=o.platform,this.browserVersion=o.version,this.deviceSize=o.deviceSize,this.monitorIp="",this.country="",this.province="",this.city="",this.loadType=e,this.loadTime=t,this.newStatus=r,this.referrer=(n||"").split("?")[0].replace("#","")}}class _{constructor(e){var t=U.getCurrentPages();this.uploadType=h,this.webMonitorId=U.getWebMonitorId(),this.leaveType=e,this.happenTime=(new Date).getTime(),this.simpleUrl=t,this.customerKey=U.getCustomerKey()}}class P extends E{constructor(e,t,r,n,o){super();var a=U.getDevice();this.uploadType=e,this.infoType=t,this.pageKey=U.getPageKey(),this.deviceName=a.model,this.os=a.system,this.browserName=a.platform,this.browserVersion=a.version,this.monitorIp="",this.country="china",this.province="",this.city="",this.simpleErrorMessage=U.b64EncodeUnicode(r),this.errorMessage=U.b64EncodeUnicode(n),this.errorStack=U.b64EncodeUnicode(o),this.browserInfo=""}}class N extends E{constructor(e,t,r,n,o,a,i,s,c,u,f){super(),this.uploadType=e,this.method=t?t.toLowerCase():"get",this.httpUrl=U.b64EncodeUnicode(n),this.headerText=U.b64EncodeUnicode(r),this.status=o,this.statusText=a,this.statusResult=i,this.requestText=U.b64EncodeUnicode(s),this.responseText=U.b64EncodeUnicode(c),this.happenTime=u,this.loadTime=f}}class D extends E{constructor(e,t){super();var r=U.getDevice();const{tcp:n,conTrans:o,domAnalysis:a,route:i,firstRender:s,domReady:c,resourceLoaded:f,pageCompleteLoaded:l,effectiveType:d,completeUrl:g,simpleUrl:p}=t;this.wmVersion=u,this.happenTime=(new Date).getTime(),this.webMonitorId=U.getWebMonitorId(),this.customerKey=U.getCustomerKey(),this.userId=U.getCusInfo("userId"),this.os=r.system,this.projectVersion=U.getCusInfo("projectVersion")||"",this.firstUserParam=U.b64EncodeUnicode(U.getCusInfo("userTag")||""),this.secondUserParam=U.b64EncodeUnicode(U.getCusInfo("secondUserParam")||""),this.uploadType=e,this.tcp=n,this.conTrans=o,this.domAnalysis=a,this.dns=i,this.firstByte=s,this.domReady=c,this.resourceLoaded=f,this.pageCompleteLoaded=l,this.effectiveType=d,this.completeUrl=g,this.simpleUrl=p}}function L(e){var t=U.isTodayBrowse(S),r=i.getWfStorageSync("monitorCustomerKey");if(r){var n="",o=r?r.match(/\d{14}/g):[];if(o&&o.length>0){var a=o[0].match(/\d{2}/g),s=a[0]+a[1]+"/"+a[2]+"/"+a[3]+" "+a[4]+":"+a[5]+":"+a[6],c=new Date(s).getTime();n=(new Date).getTime()-c>300?0==t?"o_uv":"o":"n_uv"}}else n="n_uv",U.getCustomerKey();var u=new W("reload",0,n,"");if(u.simpleUrl=e,u.completeUrl=e,"n_uv"===n||"o_uv"===n){var f=[u];U.getCusInfo("userId")?U.ajax("POST",d,f):setTimeout(function(){U.ajax("POST",d,f)},3e3)}else u.handleLogInfo(p,u)}var M="";function k(){if(getCurrentPages().length){var e=U.getCurrentPages();M!=e&&(!function(){var e=U.getCurrentPages();if(e){var t=U.isTodayBrowse(S),r=(new Date).getTime();i.setWfStorageSync(T,r);var n=null,o=U.formatDate(r,"y-M-d"),a=e,s=i.getWfStorageSync(w);if(s){var c=s.split("$$$"),u=c[0],f=c[1],l=parseInt(c[2],10);o==f?a!=u&&1==l&&(i.setWfStorageSync(w,a+"$$$"+o+"$$$2"),n=new _(2)):(i.setWfStorageSync(w,a+"$$$"+o+"$$$1"),n=new _(1))}else i.setWfStorageSync(w,a+"$$$"+o+"$$$1"),n=new _(1);var g=i.getWfStorageSync("monitorCustomerKey");if(g){var h="",y=g?g.match(/\d{14}/g):[];if(y&&y.length>0){var m=y[0].match(/\d{2}/g),v=m[0]+m[1]+"/"+m[2]+"/"+m[3]+" "+m[4]+":"+m[5]+":"+m[6],b=new Date(v).getTime();h=(new Date).getTime()-b>300?0==t?"o_uv":"o":"n_uv"}}else h="n_uv",U.getCustomerKey();var C=new W("reload",0,h,"");if("n_uv"===h||"o_uv"===h){var x=[C,n];U.ajax("POST",d,x)}else C.handleLogInfo(p,C)}}(),M=e)}}function R(e,t,r,n,o,a){k();var i=t||"",s=a||"",c="",u="";(i.length>=1e3&&(i=i.substring(0,999)),s.length>=3e3&&(s=s.substring(0,2999)),i.length>=80?u=i.substring(0,80):i.length>0&&i.length<80&&(u=i),i)&&(c="string"==typeof s?s.split(": ")[0].replace('"',""):JSON.stringify(s).split(": ")[0].replace('"',""));if(U.checkIgnore("je",i)){var f=new P(v,e,c+": "+u,c+": "+i,s);f.handleLogInfo(v,f)}}function B(){for(var e=[],t=0;t<C.length;t++){var r=O[C[t]]||[];e=e.concat(r)}for(var n=0;n<C.length;n++)O[C[n]]=[];e.length>0&&U.ajax("POST",d,e,function(e){if(e&&e.data){var t=e.data;if(t&&t.data&&t.data.c){var r=t.data.c;if(r){i.setWfStorageSync("WF_CONFIG",r);var n=JSON.parse(r);if(c=n,0==n.s){var o=(new Date).getTime()+6e5;U.setWfCookie("webfunnyStart","p",o)}}}t&&t.data&&t.data.d&&i.setWfStorageSync("WF_CONNECT_STATUS",t.data.d);o=(new Date).getTime()+18e5;U.setWfCookie("uploadErrorCount",0,o)}},function(){var e=1*(U.getWfCookie("uploadErrorCount")||0)+1,t=(new Date).getTime()+3e5;U.setWfCookie("uploadErrorCount",e,t)})}function A(e,t){if((c.je||{}).s){var r="";"string"==typeof e?r=e:"object"==typeof e&&(r=e.stack||"");var n=r.split("\n")[2];"undefined"!=typeof my&&(n=e,r=t||"无法获取堆栈");U.getCurrentPages();R("on_error",n,0,0,0,r)}}function j(e,t=""){try{r=t;for(var o=c.ia||[],a=!1,s=U.getCurrentPages(),u=0;u<o.length;u++){var l=o[u].replace(/ /g,"");if(l&&-1!=s.indexOf(l)){a=!0;break}}var d=U.getWfCookie("webfunnyStart")||c.s||!0;if(!d||"p"==d||a)return;var p=c.wc||40,h=c.je||{},v=c.hl||{},S=uni.switchTab;uni.switchTab=function(e){var t=arguments[0].success,r=arguments[0].fail,n=arguments[0].complete;if(!(t||r||n))return new Promise((t,r)=>{arguments[0].success=function(...r){console.log("Tab切换then成功.....",e),U.uploadCusBehavior("switchTab","success","Tab切换至："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("Tab切换then失败.....",e),U.uploadCusBehavior("switchTab","failed","Tab切换至："+e.url),r(...t)},S.apply(this,arguments)});arguments[0].success=function(...r){console.log("Tab切换成功.....",e),U.uploadCusBehavior("switchTab","success","Tab切换至："+e.url),t&&t(...r)},arguments[0].fail=function(...t){console.log("Tab切换失败.....",e),U.uploadCusBehavior("switchTab","failed","Tab切换至："+e.url),r&&r(...t)},S.apply(this,arguments)};var T=uni.navigateBack;uni.navigateBack=function(e){if(arguments[0]){var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){U.uploadCusBehavior("navigateBack","success","页面返回层数："+e.delta),t&&t(...r)}),r&&(arguments[0].fail=function(...t){U.uploadCusBehavior("navigateBack","failed","页面返回层数："+e.delta),r&&r(...t)}),T.apply(this,arguments)}else T.apply(this,arguments),U.uploadCusBehavior("navigateBack","success","页面返回层数：未传参")};var w=uni.navigateTo;uni.navigateTo=function(e){if(!arguments[0])return new Promise((t,r)=>{arguments[0]&&(arguments[0].success=function(...r){U.uploadCusBehavior("navigateTo","success","路由切换至："+e.url),I(e.url),t(...r)},arguments[0].fail=function(...t){U.uploadCusBehavior("navigateTo","failed","路由切换至："+e.url),r(...t)},w.apply(this,arguments))});var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){U.uploadCusBehavior("navigateTo","success","路由切换至："+e.url),I(e.url),t&&t(...r)}),r&&(arguments[0].fail=function(...t){U.uploadCusBehavior("navigateTo","failed","路由切换至："+e.url),r&&r(...t)}),w.apply(this,arguments)};var b=uni.redirectTo;uni.redirectTo=function(e){if(!arguments[0])return new Promise((t,r)=>{arguments[0]&&(arguments[0].success=function(...r){U.uploadCusBehavior("redirectTo","success","重定向至："+e.url),t(...r)},arguments[0].fail=function(...t){U.uploadCusBehavior("redirectTo","failed","重定向至："+e.url),r(...t)},b.apply(this,arguments))});var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){U.uploadCusBehavior("redirectTo","success","重定向至："+e.url),t&&t(...r)}),r&&(arguments[0].fail=function(...t){U.uploadCusBehavior("redirectTo","failed","重定向至："+e.url),r&&r(...t)}),b.apply(this,arguments)};var C=uni.reLaunch;uni.reLaunch=function(e){if(!arguments[0])return new Promise((t,r)=>{arguments[0]&&(arguments[0].success=function(...r){U.uploadCusBehavior("reLaunch","success","重启至："+e.url),t(...r)},arguments[0].fail=function(...t){U.uploadCusBehavior("reLaunch","failed","重启至："+e.url),r(...t)},C.apply(this,arguments))});var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){U.uploadCusBehavior("reLaunch","success","重启至："+e.url),t&&t(...r)}),r&&(arguments[0].fail=function(...t){U.uploadCusBehavior("reLaunch","failed","重启至："+e.url),r&&r(...t)}),C.apply(this,arguments)};var E=uni.request;uni.request=function(){function e(e,t,r,n,o,a,i,s,c,u){if(U.checkIgnore("hl",n)){var f=new N(e,t,r,n,o,a,i,s,c,(new Date).getTime(),u);f.handleLogInfo(e,f)}}let t=arguments[0];if(-1==t.url.indexOf(f)){t.startTime=(new Date).getTime();var r=t.method||"GET",n=t.url,o="",a="",i="";e(m,r,o,n,"200","OK","request",a,i,0)}var s=arguments[0].success,c=arguments[0].fail,u=arguments[0].complete;if(!(s||c||u))return new Promise((r,n)=>{arguments[0].success=function(...n){if(-1==t.url.indexOf(f)){var o=(new Date).getTime()-t.startTime,a=t.method||"GET",i=t.url,s=n[0],c=s.statusCode,u=U.checkReqResLen(t.data,s.data,v),l=s?U.b64EncodeUnicode(JSON.stringify(s.header)):"";e(m,a,l,i,c,"OK","response",u.requestText,u.responseText,o)}r(...n)},arguments[0].fail=function(...r){if(-1==t.url.indexOf(f)){var o=(new Date).getTime()-t.startTime,a=t.method||"GET",i=t.url,s=r[0],c=U.checkReqResLen(t.data,s.errMsg,v),u=s?U.b64EncodeUnicode(JSON.stringify(s.header)):"";e(m,a,u,i,0,"fail","response",c.requestText,c.responseText,o)}n(...r)},E.apply(this,arguments)});arguments[0].success=function(...r){if(-1==t.url.indexOf(f)){var n=(new Date).getTime()-t.startTime,o=t.method||"GET",a=t.url,i=r[0],c=i.statusCode,u=JSON.stringify(t.header||""),l=U.checkReqResLen(t.data,i.data,v);u=i?U.b64EncodeUnicode(JSON.stringify(i.header)):"";e(m,o,u,a,c,"OK","response",l.requestText,l.responseText,n)}s&&s(...r)},arguments[0].fail=function(...r){if(-1==t.url.indexOf(f)){var n=(new Date).getTime()-t.startTime,o=t.method||"GET",a=t.url,i=r[0],s=U.checkReqResLen(t.data,i.errMsg,v),u=t?U.b64EncodeUnicode(JSON.stringify(t.header)):"";e(m,o,u,a,0,"fail","response",s.requestText,s.responseText,n)}c&&c(...r)},E.apply(this,arguments)},function(){try{n.getPerformance().createObserver(e=>{let t="reload",r=!1;const n=e.getEntries(),o={tcp:0,conTrans:0,domAnalysis:0,route:0,firstRender:0,domReady:0,pageCompleteLoaded:0,effectiveType:"unknown",completeUrl:"",simpleUrl:""};let a=0,i=0,s=0,c=0,u=0,f=0,l=0,d=0;for(let e=0;e<n.length;e++){const{startTime:h,entryType:y,name:m,path:v,duration:S=0}=n[e];switch(0===i?i=h:h&&h>i&&(i=h,s=S),0===a?a=h:h&&h<a&&(a=h),m){case"appLaunch":t="load",o.domReady=S;var g=(new Date).getTime()+864e5,p=U.getUuid();U.setWfCookie("webfunnySessionId",p,g);break;case"downloadPackage":o.conTrans=S,l=h;break;case"evaluateScript":o.domAnalysis=S,d=h;break;case"route":o.route=S,d=h;break;case"firstRender":o.firstRender=S,o.completeUrl=v,o.simpleUrl=U.b64EncodeUnicode(v),r=!0;break;case"resourceTiming":0===u?u=h:h&&h>u&&(u=h,f=S),0===c?c=h:h&&h<c&&(c=h)}}if(!1===r)return;o.pageCompleteLoaded=i-a+s,o.resourceLoaded=u-c+f,"undefined"!=typeof wx?o.tcp=0===l?0:l-a:"undefined"!=typeof my&&(o.tcp=0===d?0:d-a),o.loadType=t,o.effectiveType=navigator&&navigator.connection&&navigator.connection.effectiveType||"unknown";const h=new D(y,o);h.handleLogInfo(y,h)}).observe({entryTypes:["render","script","navigation","resource","loadPackage"]})}catch(e){console.log("recordPageLoad error")}}(),h.s&&(P=console.error,console.error=function(e){var t=arguments[0]&&arguments[0].message||e,r=arguments[0]&&arguments[0].stack;if(r)R("on_error",t,0,0,0,r);else{if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){t="错误无法解析"}R("console_error",t,0,0,0,"CustomizeError: "+t)}return P.apply(console,arguments)}),"c"===i.getWfStorageSync("WF_CONNECT_STATUS")&&function(){var e=U.getCusInfo("userId");function t(t){for(var r=[],n=t.length,o=0;o<n;o++)r.push(t[o]);var a={};a.log=r,a.userId=e,a.happenTime=(new Date).getTime();var i="";try{i=U.b64EncodeUnicode(JSON.stringify(a))}catch(e){i="convert fail"}return i}var r=console.log,o=console.warn;const a=i.getWfStorageSync("WF_CONNECT_STATUS");console.log=function(){var e=t(arguments);return"c"===a&&U.ajax("POST",g,{consoleInfo:e},function(){}),r.apply(console,arguments)},console.warn=function(){var e=t(arguments);return"c"===a&&U.ajax("POST",g,{warnInfo:e},function(){}),o.apply(console,arguments)},x||(x=setInterval(function(){try{if("d"===i.getWfStorageSync("WF_CONNECT_STATUS"))return;var e=U.getCusInfo("userId"),t={};const s=i.getWfStorageKeysSync();for(var r=0;r<s.length;r++){var o=s[r],a=i.getWfStorageSync(o);"function"!=typeof a&&(t[o]=a)}try{t=U.b64EncodeUnicode(JSON.stringify(t))}catch(e){t=""}U.ajax("POST",g,{localInfo:t,userId:e||"userId"},function(e){try{if(!e||!e.data)return;var t=e.data;if(!t.data)return;if(1==t.data.clear)if("undefined"!=typeof my||"undefined"!=typeof wx){var r=i.getWfStorageSync("wmUserInfo");n.clearStorage(),i.setWfStorageSync("wmUserInfo",r)}else if(window){var o=localStorage.wmUserInfo;localStorage.clear(),localStorage.wmUserInfo=o,sessionStorage.clear(),localStorage.WEBFUNNY_COOKIE=""}}catch(e){console.log("clear error")}})}catch(e){console.log("DEBUG_TIMER error")}},2e4))}();var W=(new Date).getTime();if(setInterval(function(){k();let e=(new Date).getTime(),t=e-W;O[m].length>10?B():t>=200*p&&(B(),W=e)},1e3),"Taro"===t)return Taro.onError(e=>{A(e,e)}),Taro.onLaunch&&Taro.onLaunch(e=>{console.log("onLaunch 生效"),L("onLaunch")}),null;var _={onLaunch:function(){L("onLaunch")},onError:function(e,t){A(e,t)}};for(const t in _){const r="function"==typeof e[t]&&e[t];e[t]=function(){_[t].apply(this,arguments),r&&r.apply(this,arguments)}}}catch(e){console.log("探针异常："),console.log(e)}var P;return e}uni.webfunny=j,uni.wfUtils=U,j({},"")}]);