!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){let r=uni;var n,a;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",(n=r).btoa=n.btoa||function(e){for(var t,r,n,o,s="",i=0,u=(e=String(e)).length%3;i<e.length;){if((r=e.charCodeAt(i++))>255||(n=e.charCodeAt(i++))>255||(o=e.charCodeAt(i++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");s+=a.charAt((t=r<<16|n<<8|o)>>18&63)+a.charAt(t>>12&63)+a.charAt(t>>6&63)+a.charAt(63&t)}return u?s.slice(0,u-3)+"===".substring(u):s};var o=r.getStorageSync("WF_CONFIG"),s=o||{s:!0,ia:[""],wc:40,pv:{s:"webfunny-pageview-switch",ia:[""]},je:{s:"webfunny-jserror-switch",ia:[""]},hl:{s:"webfunny-http-switch",ia:[""],uh:!1,rl:500,sl:500},rl:{s:"webfunny-resource-switch",ia:[""]},bl:{s:"webfunny-behavior-switch"},lc:{s:"webfunny-location-switch"}},i="webfunnyVersionFlag",u="&&&www.webfunny.cn&&&",c="http://"+u,l=c+"/wfMonitor/upMog",f="CUSTOMER_PV",g="CUS_LEAVE",h="HTTP_LOG",d="JS_ERROR",p="LAST_BROWSE_DATE",v="WM_PAGE_ENTRY_TIME",y="WM_VISIT_PAGE_COUNT",m="WEBFUNNY_COOKIE",T=[d,f,h],w=function(e){var t=new b("reload",0,"o","");t.simpleUrl=e,t.completeUrl=e,t.handleLogInfo(f,t)};class S{static getCurrentPages(){var e="";try{e=getCurrentPages().length?getCurrentPages()[0].route:""}catch(t){e=""}return e}static getUuid(){var e=S.formatDate((new Date).getTime(),"yMdhms");return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})+"-"+e}static getCustomerKey(){var e=S.getUuid(),t=r.getStorageSync("monitorCustomerKey");return t||(r.setStorage({key:"monitorCustomerKey",data:e}),t=e),t}static isTodayBrowse(e){var t=r.getStorageSync(e),n=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();return t&&n==t?!(!t||n!=t):(r.setStorageSync(e,n),!1)}static formatDate(e,t){var r=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,a=new Date(e).getDate(),o=new Date(e).getHours(),s=new Date(e).getMinutes(),i=new Date(e).getSeconds();return n=n>9?n:"0"+n,a=a>9?a:"0"+a,o=o>9?o:"0"+o,s=s>9?s:"0"+s,i=i>9?i:"0"+i,t.replace("y",r).replace("M",n).replace("d",a).replace("h",o).replace("m",s).replace("s",i)}static getPageKey(){var e=r.getStorageSync("monitorPageKey"),t=S.getUuid();return e&&/^[0-9a-z]{8}(-[0-9a-z]{4}){3}-[0-9a-z]{12}-\d{13}$/.test(e)||(e=t),e}static setPageKey(){r.setStorage({key:"monitorPageKey",data:S.getUuid()})}static ajax(e,t,n,a,o){r.request({method:e,url:t,data:n,header:{"Content-Type":"application/json"},success:e=>{"function"==typeof a&&a(e)},fail:e=>{"function"==typeof o&&o(e)}})}static uploadCusBehavior(e,t,n){var a={webMonitorId:S.getWebMonitorId(),userId:S.getCusInfo("userId"),uploadType:"CUSTOMIZE_BEHAVIOR",happenTime:(new Date).getTime(),behaviorType:S.b64EncodeUnicode(e),behaviorResult:S.b64EncodeUnicode(t),description:S.b64EncodeUnicode(n)};r.request({method:"POST",url:c+"/wfMonitor/upMyLog",data:{logs:[a]},header:{"Content-Type":"application/json"}})}static checkReqResLen(e="",t="",r){var n=e?JSON.stringify(e):"no param",a=t?JSON.stringify(t):"no result",o=parseInt(r.rl)||500,s=parseInt(r.sl)||500;return n&&n.length>o&&(n="too long"),a&&a.length>s&&(a="too long"),{requestText:n,responseText:a}}static encryptObj(e){if(e instanceof Array){for(var t=[],r=0;r<e.length;++r)t[r]=S.encryptObj(e[r]);return t}if(e instanceof Object){t={};for(var r in e)t[r]=S.encryptObj(e[r]);return t}return(e+="").length>50&&(e=e.substring(0,10)+"****"+e.substring(e.length-9,e.length)),e}static getDevice(){return r.getSystemInfoSync()}static b64EncodeUnicode(e){var t=encodeURIComponent(e);try{return r.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}catch(e){return t}}static utf8_encode(e){if(!e)return"";var t="";e=e.replace(/\r\n/g,"\n");for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}static setWfCookie(e,t,n){var a={data:t,expires:n},o=r.getStorageSync(m);if(o)o[e]=a,r.setStorage(m,o);else{var s={};s[e]=a,r.setStorage(m,s)}}static getWfCookie(e){var t=r.getStorageSync(m);if(t){var n=t[e];if(!n)return"";var a=parseInt(n.expires,10);return(new Date).getTime()>a?(delete t[e],r.setStorage(m,t),""):n.data}return""}static getCusInfo(e){if(!e)return"";var t=r.getStorageSync("wmUserInfo"),n=(t?JSON.parse(t):{})[e];return n||""}static getWebMonitorId(){var e="jeffery_webmonitor";if(-1!==e.indexOf("_pro")){var t=S.getCusInfo("env");t&&(e=e.replace("_pro","_"+t))}return e}static checkIgnore(e,t){if(!t)return!0;for(var r=t.replace(/ /g,""),n=s[e].ia||[],a=!0,o=0;o<n.length;o++){var i=n[o].replace(/ /g,"");if(i&&-1!=r.indexOf(i)){a=!1;break}}return a}}class C{constructor(){var e=S.getCurrentPages();this.wmVersion=i,this.happenTime=(new Date).getTime(),this.webMonitorId=S.getWebMonitorId(),this.simpleUrl=e,this.completeUrl=e,this.customerKey=S.getCustomerKey(),this.userId=S.getCusInfo("userId"),this.projectVersion=S.getCusInfo("projectVersion")||"",this.firstUserParam=S.b64EncodeUnicode(S.getCusInfo("userTag")||""),this.secondUserParam=S.b64EncodeUnicode(S.getCusInfo("secondUserParam")||"")}handleLogInfo(e,t){var n=r.getStorageSync(e),a=n||[];a.push(t),r.setStorageSync(e,a)}}class b extends C{constructor(e,t,r,n){super();var a=S.getDevice();this.uploadType=f,this.pageKey=S.getPageKey(),this.deviceName=a.model,this.os=a.system,this.browserName=a.platform,this.browserVersion=a.version,this.deviceSize=a.screenWidth+"×"+a.screenHeight,this.monitorIp="",this.country="",this.province="",this.city="",this.loadType=e,this.loadTime=t,this.newStatus=r,this.referrer=(n||"").split("?")[0].replace("#","")}}class x{constructor(e){var t=S.getCurrentPages();this.uploadType=g,this.webMonitorId=S.getWebMonitorId(),this.leaveType=e,this.happenTime=(new Date).getTime(),this.simpleUrl=t,this.customerKey=S.getCustomerKey()}}class I extends C{constructor(e,t,r,n,a){super();var o=S.getDevice();this.uploadType=e,this.infoType=t,this.pageKey=S.getPageKey(),this.deviceName=o.model,this.os=o.system,this.browserName=o.platform,this.browserVersion=o.version,this.monitorIp="",this.country="china",this.province="",this.city="",this.simpleErrorMessage=S.b64EncodeUnicode(r),this.errorMessage=S.b64EncodeUnicode(n),this.errorStack=S.b64EncodeUnicode(a),this.browserInfo=""}}class O extends C{constructor(e,t,r,n,a,o,s,i,u){super(),this.uploadType=e,this.method=t?t.toLowerCase():"get",this.httpUrl=S.b64EncodeUnicode(r),this.status=n,this.statusText=a,this.statusResult=o,this.requestText=S.b64EncodeUnicode(s),this.responseText=S.b64EncodeUnicode(i),this.loadTime=u}}var _="";function P(){if(getCurrentPages().length){var e=S.getCurrentPages();_!=e&&(!function(){var e=S.getCurrentPages();if(e){var t=S.isTodayBrowse(p),n=(new Date).getTime();r.setStorageSync(v,n);var a=null,o=S.formatDate(n,"y-M-d"),s=e,i=r.getStorageSync(y);if(i){var u=i.split("$$$"),c=u[0],g=u[1],h=parseInt(u[2],10);o==g?s!=c&&1==h&&(r.setStorageSync(y,s+"$$$"+o+"$$$2"),a=new x(2)):(r.setStorageSync(y,s+"$$$"+o+"$$$1"),a=new x(1))}else r.setStorageSync(y,s+"$$$"+o+"$$$1"),a=new x(1);var d=r.getStorageSync("monitorCustomerKey");if(d){var m="",T=d?d.match(/\d{14}/g):[];if(T&&T.length>0){var w=T[0].match(/\d{2}/g),C=w[0]+w[1]+"-"+w[2]+"-"+w[3]+" "+w[4]+":"+w[5]+":"+w[6],I=new Date(C).getTime();m=(new Date).getTime()-I>300?0==t?"o_uv":"o":"n_uv"}}else m="n_uv",S.getCustomerKey();var O=new b("reload",0,m,"");if("n_uv"===m||"o_uv"===m){var _=[O,a];S.ajax("POST",l,_)}else O.handleLogInfo(f,O)}}(),_=e)}}function D(e,t,r,n,a,o){P();var s=t||"",i=o||"",u="",c="";(s.length>=1e3&&(s=s.substring(0,999)),i.length>=3e3&&(i=i.substring(0,2999)),s.length>=80?c=s.substring(0,80):s.length>0&&s.length<80&&(c=s),s)&&(u="string"==typeof i?i.split(": ")[0].replace('"',""):JSON.stringify(i).split(": ")[0].replace('"',""));if(S.checkIgnore("je",s)){var l=new I(d,e,u+": "+c,u+": "+s,i);l.handleLogInfo(d,l)}}function U(){for(var e=[],t=0;t<T.length;t++){var n=r.getStorageSync(T[t]);e=e.concat(n)}for(var a=0;a<T.length;a++)r.setStorageSync(T[a],[]);e.length>0&&S.ajax("POST",l,e,function(e){if(e&&e.data){var t=e.data;if(t&&t.data&&t.data.d){var n=t.data.c;if(n){var a=JSON.parse(n);if(r.setStorage({key:"WF_CONFIG",data:a}),s=a,0==a.s){var o=(new Date).getTime()+6e5;S.setWfCookie("webfunnyStart","p",o)}}}}},function(){})}uni.webfunny=function(e){for(var t=s.ia,n=!1,a=S.getCurrentPages(),o=0;o<t.length;o++){var i=t[o].replace(/ /g,"");if(i&&-1!=a.indexOf(i)){n=!0;break}}var c=S.getWfCookie("webfunnyStart")||s.s;if(c&&"p"!=c&&!n){var g=s.wc||40,d=s.je,v=s.hl,y=uni.switchTab;uni.switchTab=function(e){var t=arguments[0].success,r=arguments[0].fail,n=arguments[0].complete;if(!(t||r||n))return new Promise((t,r)=>{arguments[0].success=function(...r){S.uploadCusBehavior("switchTab","success","Tab切换至："+e.url),t(...r)},arguments[0].fail=function(...t){S.uploadCusBehavior("switchTab","failed","Tab切换至："+e.url),r(...t)},y.apply(this,arguments)});arguments[0].success=function(...r){S.uploadCusBehavior("switchTab","success","Tab切换至："+e.url),t&&t(...r)},arguments[0].fail=function(...t){S.uploadCusBehavior("switchTab","failed","Tab切换至："+e.url),r&&r(...t)},y.apply(this,arguments)};var m=uni.navigateBack;uni.navigateBack=function(e){if(arguments[0]){var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){S.uploadCusBehavior("navigateBack","success","页面返回层数："+e.delta),t&&t(...r)}),r&&(arguments[0].fail=function(...t){S.uploadCusBehavior("navigateBack","failed","页面返回层数："+e.delta),r&&r(...t)}),m.apply(this,arguments)}else m.apply(this,arguments),S.uploadCusBehavior("navigateBack","success","页面返回层数：未传参")};var T=uni.navigateTo;uni.navigateTo=function(e){if(!arguments[0])return new Promise((t,r)=>{arguments[0]&&(arguments[0].success=function(...r){S.uploadCusBehavior("navigateTo","success","路由切换至："+e.url),w(e.url),t(...r)},arguments[0].fail=function(...t){S.uploadCusBehavior("navigateTo","failed","路由切换至："+e.url),r(...t)},T.apply(this,arguments))});var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){S.uploadCusBehavior("navigateTo","success","路由切换至："+e.url),w(e.url),t&&t(...r)}),r&&(arguments[0].fail=function(...t){S.uploadCusBehavior("navigateTo","failed","路由切换至："+e.url),r&&r(...t)}),T.apply(this,arguments)};var C=uni.redirectTo;uni.redirectTo=function(e){if(!arguments[0])return new Promise((t,r)=>{arguments[0]&&(arguments[0].success=function(...r){S.uploadCusBehavior("redirectTo","success","重定向至："+e.url),t(...r)},arguments[0].fail=function(...t){S.uploadCusBehavior("redirectTo","failed","重定向至："+e.url),r(...t)},C.apply(this,arguments))});var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){S.uploadCusBehavior("redirectTo","success","重定向至："+e.url),t&&t(...r)}),r&&(arguments[0].fail=function(...t){S.uploadCusBehavior("redirectTo","failed","重定向至："+e.url),r&&r(...t)}),C.apply(this,arguments)};var x=uni.reLaunch;uni.reLaunch=function(e){if(!arguments[0])return new Promise((t,r)=>{arguments[0]&&(arguments[0].success=function(...r){S.uploadCusBehavior("reLaunch","success","重启至："+e.url),t(...r)},arguments[0].fail=function(...t){S.uploadCusBehavior("reLaunch","failed","重启至："+e.url),r(...t)},x.apply(this,arguments))});var t=arguments[0].success,r=arguments[0].fail;t&&(arguments[0].success=function(...r){S.uploadCusBehavior("reLaunch","success","重启至："+e.url),t&&t(...r)}),r&&(arguments[0].fail=function(...t){S.uploadCusBehavior("reLaunch","failed","重启至："+e.url),r&&r(...t)}),x.apply(this,arguments)};var I,_=uni.request;uni.request=function(){function e(e,t,r,n,a,o,s,i,u){if(S.checkIgnore("hl",r)){var c=new O(e,t,r,n,a,o,s,i,u);c.handleLogInfo(e,c)}}let t=arguments[0];if(-1==t.url.indexOf(u)){t.startTime=(new Date).getTime();var r=t.method,n=t.url;e(h,r,n,"200","OK","request","","",0)}var a=arguments[0].success,o=arguments[0].fail,s=arguments[0].complete;if(!(a||o||s))return new Promise((r,n)=>{arguments[0].success=function(...n){if(-1==t.url.indexOf(u)){var a=(new Date).getTime()-t.startTime,o=t.method,s=t.url,i=n[0],c=i.statusCode;console.log("请求参数：",t);var l=S.checkReqResLen(t.data,i.data,v);e(h,o,s,c,"OK","response",l.requestText,l.responseText,a)}r(...n)},arguments[0].fail=function(...r){if(-1==t.url.indexOf(u)){var a=(new Date).getTime()-t.startTime,o=t.method,s=t.url,i=r[0],c=JSON.stringify(t.data),l=i.errMsg;e(h,o,s,555,"fail","response",c,l,a)}n(...r)},_.apply(this,arguments)});arguments[0].success=function(...r){if(-1==t.url.indexOf(u)){var n=(new Date).getTime()-t.startTime,o=t.method,s=t.url,i=r[0],c=i.statusCode,l=S.checkReqResLen(t.data,i.data,v);e(h,o,s,c,"OK","response",l.requestText,l.responseText,n)}a&&a(...r)},arguments[0].fail=function(...r){if(-1==t.url.indexOf(u)){var n=(new Date).getTime()-t.startTime,a=t.method,s=t.url,i=r[0],c=JSON.stringify(t.data),l=i.errMsg;e(h,a,s,555,"fail","response",c,l,n)}o&&o(...r)},_.apply(this,arguments)},d.s&&(I=console.error,console.error=function(e){var t=arguments[0]&&arguments[0].message||e,r=arguments[0]&&arguments[0].stack;if(r)D("on_error",t,0,0,0,r);else{if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){t="错误无法解析"}D("console_error",t,0,0,0,"CustomizeError: "+t)}return I.apply(console,arguments)});var B=(new Date).getTime();setInterval(function(){P();let e=(new Date).getTime(),t=e-B;r.getStorageSync(h).length>10?U():t>=200*g&&(U(),B=e)},1e3);var E={onLaunch:function(){!function(e){var t=S.isTodayBrowse(p),n=r.getStorageSync("monitorCustomerKey");if(n){var a="",o=n?n.match(/\d{14}/g):[];if(o&&o.length>0){var s=o[0].match(/\d{2}/g),i=s[0]+s[1]+"-"+s[2]+"-"+s[3]+" "+s[4]+":"+s[5]+":"+s[6],u=new Date(i).getTime();a=(new Date).getTime()-u>300?0==t?"o_uv":"o":"n_uv"}}else a="n_uv",S.getCustomerKey();var c=new b("reload",0,a,"");if(c.simpleUrl=e,c.completeUrl=e,"n_uv"===a||"o_uv"===a){var g=[c];S.getCusInfo("userId")?S.ajax("POST",l,g):setTimeout(function(){S.ajax("POST",l,g)},3e3)}else c.handleLogInfo(f,c)}("onLaunch")},onError:function(e){if(d.s){var t="";"string"==typeof e?t=e:"object"==typeof e&&(t=e.stack||"");var r=t.split("\n")[2];S.getCurrentPages(),D("on_error",r,0,0,0,t)}}};for(const t in E){const r="function"==typeof e[t]&&e[t];e[t]=function(){E[t].apply(this,arguments),r&&r.apply(this,arguments)}}return e}}}]);