(function(o){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};o[e].call(t.exports,t,t.exports,r);t.l=!0;return t.exports}r.m=o;r.c=n;r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})};r.r=function(e){"undefined"!=typeof undefined&&"undefined.toStringTag"&&Object.defineProperty(e,"undefined.toStringTag",{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);r.r(o);Object.defineProperty(o,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o};r.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};r.d(e,"a",e);return e};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";r(r.s=0)})([function(e,t,o){function r(e){return(r="function"==typeof undefined&&"symbol"==typeof "undefined.iterator"?function(e){return typeof e}:function(e){return e&&"function"==typeof undefined&&e.constructor===undefined&&e!==Object.prototype?"symbol":typeof e})(e)}o(1);o(2);o(3);o(4);o(5);o(6);o(7);o(8);o(9);o(10);var a="undefined"!=typeof window?window:this,i="1.0.0-ie8",s="WebfunnyMonitor",u={webMonitorId:"",uploadUrl:"",enablePV:!0,enableClick:!0,enableError:!0,enablePerf:!0,batchSize:10,flushInterval:3e3,maxRetries:3,timeout:5e3,debug:!1,silentMode:!1,webfunnyDomain:"",webfunnyAssetsDomain:"",webfunnyMonitorId:"",env:"pro",projectVersion:"1.0.0",hasTrace:"0",startList:[]},l={initialized:!1,modules:{},startTime:(new Date).getTime()},n={version:i,init:function e(t){try{console.log("[WebfunnyMonitor] \u5f00\u59cb\u521d\u59cb\u5316SDK...");if(l.initialized){console.log("[WebfunnyMonitor] SDK\u5df2\u7ecf\u521d\u59cb\u5316\u8fc7\u4e86");c("warn","SDK already initialized")}else{var o=function e(t){var o,n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);t.webfunnyMonitorId&&(n.webMonitorId=t.webfunnyMonitorId);if(t.webfunnyDomain){var r=t.webfunnyDomain;"/"!==r.charAt(r.length-1)&&(r+="/");n.uploadUrl=r+"wfMonitor/upLogs"}if(t.startList&&0<t.startList.length){n.enablePV=!1;n.enablePerf=!1;n.enableClick=!1;n.enableError=!1;for(var i=0;i<t.startList.length;i++){var a=t.startList[i];if("pageView"===a){n.enablePV=!0;n.enablePerf=!0}else"behavior"===a?n.enableClick=!0:"jsError"===a?n.enableError=!0:"httpLog"===a&&(n.enableHttp=!0)}}console.log("[WebfunnyMonitor] \u914d\u7f6e\u8f6c\u6362\u8be6\u60c5:");console.log("[WebfunnyMonitor] - webfunnyMonitorId:",t.webfunnyMonitorId,"\u2192 webMonitorId:",n.webMonitorId);console.log("[WebfunnyMonitor] - webfunnyDomain:",t.webfunnyDomain,"\u2192 uploadUrl:",n.uploadUrl);console.log("[WebfunnyMonitor] - startList:",t.startList);console.log("[WebfunnyMonitor] - enablePV:",n.enablePV);console.log("[WebfunnyMonitor] - enablePerf:",n.enablePerf);console.log("[WebfunnyMonitor] - enableClick:",n.enableClick);console.log("[WebfunnyMonitor] - enableError:",n.enableError);console.log("[WebfunnyMonitor] - enableHttp:",n.enableHttp);return n}(t),n=(console.log("[WebfunnyMonitor] \u914d\u7f6e\u683c\u5f0f\u8f6c\u6362\u5b8c\u6210"),t.webfunnyMonitorId&&t.webfunnyDomain),r=t.webMonitorId&&t.uploadUrl;if(!t||!n&&!r){console.log("[WebfunnyMonitor] \u914d\u7f6e\u9a8c\u8bc1\u5931\u8d25\uff0c\u7f3a\u5c11\u5fc5\u586b\u53c2\u6570");console.log("[WebfunnyMonitor] userConfig:",t);c("error",n?"webfunnyMonitorId and webfunnyDomain are required":"webMonitorId and uploadUrl are required (old format) or webfunnyMonitorId and webfunnyDomain (new format)");return!1}console.log("[WebfunnyMonitor] \u914d\u7f6e\u9a8c\u8bc1\u901a\u8fc7");console.log("[WebfunnyMonitor] userConfig:",t);!function e(t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(u[o]=t[o])}(o);console.log("[WebfunnyMonitor] \u914d\u7f6e\u5408\u5e76\u5b8c\u6210");console.log("[WebfunnyMonitor] \u5f00\u59cb\u521d\u59cb\u5316\u6a21\u5757...");if(!function e(){try{console.log("[WebfunnyMonitor] _initModules \u5f00\u59cb\u68c0\u67e5\u4f9d\u8d56\u6a21\u5757...");for(var t=["WfUtils","WfDevice","WfStorage","WfUpload","WfQueue"],o=0;o<t.length;o++){var n=t[o];if(void 0===a[n]){console.log("[WebfunnyMonitor] \u7f3a\u5c11\u5fc5\u9700\u6a21\u5757:",n);c("error","Required module not found: "+n);return}console.log("[WebfunnyMonitor] \u6a21\u5757\u68c0\u67e5\u901a\u8fc7:",n)}console.log("[WebfunnyMonitor] \u6240\u6709\u5fc5\u9700\u6a21\u5757\u68c0\u67e5\u5b8c\u6210");console.log("[WebfunnyMonitor] \u521d\u59cb\u5316\u57fa\u7840\u5de5\u5177\u6a21\u5757...");l.modules.utils=a.WfUtils;l.modules.device=a.WfDevice;l.modules.storage=a.WfStorage;if(l.modules.utils){console.log("[WebfunnyMonitor] \u8bbe\u7f6ewebMonitorId\u5230utils\u6a21\u5757");l.modules.utils.setWebMonitorId(u.webMonitorId)}console.log("[WebfunnyMonitor] \u521d\u59cb\u5316\u4e1a\u52a1\u6a21\u5757...");if(void 0!==a.WfPageView){console.log("[WebfunnyMonitor] \u521d\u59cb\u5316WfPageView\u6a21\u5757");l.modules.pageview=a.WfPageView;l.modules.pageview.init(u)}if(void 0!==a.WfAction){console.log("[WebfunnyMonitor] \u521d\u59cb\u5316WfAction\u6a21\u5757");l.modules.action=a.WfAction;l.modules.action.init(u)}if(void 0!==a.WfError){console.log("[WebfunnyMonitor] \u521d\u59cb\u5316WfError\u6a21\u5757");l.modules.error=a.WfError;l.modules.error.init(u)}if(void 0!==a.WfHttp){console.log("[WebfunnyMonitor] \u521d\u59cb\u5316WfHttp\u6a21\u5757");l.modules.http=a.WfHttp;l.modules.http.init(u,f,l.modules.utils)}console.log("[WebfunnyMonitor] \u521d\u59cb\u5316\u4e0a\u62a5\u6a21\u5757WfUpload...");l.modules.upload=a.WfUpload;l.modules.upload.init(u);console.log("[WebfunnyMonitor] \u521d\u59cb\u5316\u961f\u5217\u6a21\u5757WfQueue...");l.modules.queue=a.WfQueue;l.modules.queue.init(u,l.modules.upload);console.log("[WebfunnyMonitor] \u6240\u6709\u6a21\u5757\u521d\u59cb\u5316\u5b8c\u6210");return 1}catch(e){console.log("[WebfunnyMonitor] _initModules\u5f02\u5e38:",e.message);console.log("[WebfunnyMonitor] \u9519\u8bef\u5806\u6808:",e.stack);c("error","Module initialization failed: "+e.message)}}()){console.log("[WebfunnyMonitor] \u6a21\u5757\u521d\u59cb\u5316\u5931\u8d25");c("error","Failed to initialize modules");return!1}console.log("[WebfunnyMonitor] \u6a21\u5757\u521d\u59cb\u5316\u6210\u529f");console.log("[WebfunnyMonitor] \u542f\u52a8\u76d1\u63a7\u529f\u80fd...");!function e(){try{if(u.enablePV&&l.modules.pageview){l.modules.pageview.recordPageView(f);l.modules.pageview.bindUnloadEvent(f)}u.enableClick&&l.modules.action&&l.modules.action.startClickMonitor(f);u.enableError&&l.modules.error&&l.modules.error.startErrorMonitor(f);c("info","Monitoring started")}catch(e){c("error","Start monitoring failed: "+e.message)}}();console.log("[WebfunnyMonitor] \u8bbe\u7f6e\u5168\u5c40\u9519\u8bef\u8fb9\u754c...");!function e(){try{var i=a.onerror;a.onerror=function(e,t,o,n,r){try{e&&-1===e.indexOf("["+s+"]")&&u.enableError&&l.modules.error&&l.modules.error.recordError(r||e,f)}catch(e){}return!(!i||"function"!=typeof i)&&i.apply(this,arguments)}}catch(e){c("error","Setup error boundary failed: "+e.message)}}();l.initialized=!0;console.log("[WebfunnyMonitor] SDK\u521d\u59cb\u5316\u5b8c\u6210\uff01\u7248\u672c:",i);c("info","SDK initialized successfully, version: "+i)}return!0}catch(e){console.log("[WebfunnyMonitor] SDK\u521d\u59cb\u5316\u5f02\u5e38:",e.message);console.log("[WebfunnyMonitor] \u9519\u8bef\u5806\u6808:",e.stack);c("error","SDK initialization failed: "+e.message);return!1}},track:function e(t,o){try{return l.initialized?f({uploadType:"CUSTOMIZE_BEHAVIOR",happenTime:(new Date).getTime(),eventType:t||"custom",eventData:o||{},webMonitorId:u.webMonitorId}):(c("warn","SDK not initialized"),!1)}catch(e){c("error","Track event failed: "+e.message);return!1}},setUser:function e(t,o){try{if(l.initialized){if(l.modules.storage){l.modules.storage.setItem("userId",t||"");o&&l.modules.storage.setItem("userInfo",JSON.stringify(o))}c("info","User ID set: "+t)}else c("warn","SDK not initialized")}catch(e){c("error","Set user failed: "+e.message)}},trackPageView:function e(t){try{var o;return l.initialized&&l.modules.pageview?(o=t||a.WfUtils.getPageInfo(),f(l.modules.pageview.getPageViewInfo(o,"manual"))):!1}catch(e){c("error","Track page view failed: "+e.message);return!1}},trackError:function e(t){try{return l.initialized&&l.modules.error?l.modules.error.recordError(t,f):!1}catch(e){c("error","Track error failed: "+e.message);return!1}},flush:function e(){try{l.modules.queue&&l.modules.queue.flush()}catch(e){c("error","Flush failed: "+e.message)}},pause:function e(){try{l.modules.queue&&l.modules.queue.pause();c("info","Monitoring paused")}catch(e){c("error","Pause failed: "+e.message)}},resume:function e(){try{l.modules.queue&&l.modules.queue.resume();c("info","Monitoring resumed")}catch(e){c("error","Resume failed: "+e.message)}},initUser:function e(t){try{if(t&&"object"===r(t))if(void 0!==a.WfUtils){if(a.WfUtils.setCusInfo(t)){c("info","User info initialized successfully");t.userTag&&a.WfUtils.setCusInfo("firstUserParam",t.userTag);console.log("[WebfunnyMonitor] \u7528\u6237\u4fe1\u606f\u5df2\u5b58\u50a8:");console.log("[WebfunnyMonitor] - userId:",t.userId||"");console.log("[WebfunnyMonitor] - userTag:",t.userTag||"");console.log("[WebfunnyMonitor] - nickname:",t.nickname||"");return!0}c("error","Failed to store user info")}else c("error","WfUtils not available");else c("error","initUser: userInfo must be an object");return!1}catch(e){c("error","initUser failed: "+e.message);return!1}},trackHttp:function e(t){try{if(l.initialized){if(l.modules.http){l.modules.http.recordHttp(t);c("info","HTTP request tracked manually");return!0}c("warning","HTTP module not available")}else c("warning","SDK not initialized, cannot track HTTP");return!1}catch(e){c("error","Track HTTP failed: "+e.message);return!1}},getStatus:function e(){try{var t={initialized:l.initialized,version:i,config:function e(t){try{if(!t||"object"!==r(t))return t;var o,n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}catch(e){return{}}}(u),uptime:(new Date).getTime()-l.startTime};l.modules.queue&&(t.queue=l.modules.queue.getStatus());l.modules.upload&&(t.upload=l.modules.upload.getRetryQueueStatus());l.modules.device&&(t.device=l.modules.device.getSimpleInfo());return t}catch(e){c("error","Get status failed: "+e.message);return{initialized:!1,version:i}}},destroy:function e(){try{this.flush();l.modules.action&&l.modules.action.stopClickMonitor&&l.modules.action.stopClickMonitor();l.modules.error&&l.modules.error.stopErrorMonitor&&l.modules.error.stopErrorMonitor();l.modules.queue&&l.modules.queue.clear();l.initialized=!1;l.modules={};c("info","SDK destroyed")}catch(e){c("error","Destroy failed: "+e.message)}}};function f(e){try{return e&&l.modules.queue?l.modules.queue.add(e):!1}catch(e){c("error","Add to queue failed: "+e.message);return!1}}function c(e,t){if(!u.silentMode){t="["+s+"] "+t;if("undefined"!=typeof console)try{!u.debug&&"error"!==e||(console[e]?console[e](t):console.log&&console.log("["+e.toUpperCase()+"] "+t))}catch(e){}}}function d(){try{void 0!==a.webfunnyMonitorConfig&&setTimeout(function(){n.init(a.webfunnyMonitorConfig)},0);void 0!==a.webfunnyIE8Config&&setTimeout(function(){n.init(a.webfunnyIE8Config)},0)}catch(e){}}if(void 0!==a){a.WebfunnyMonitor=n;a[s]=n;a.WebfunnyIE8=n}e.exports?e.exports=n:void 0!==a&&"function"==typeof a.define&&a.define.amd&&a.define(function(){return n});void 0!==a&&("loading"===document.readyState?document.addEventListener?document.addEventListener("DOMContentLoaded",d,!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&d()}):d())},function(module,exports){function _typeof(e){return(_typeof="function"==typeof undefined&&"symbol"==typeof "undefined.iterator"?function(e){return typeof e}:function(e){return e&&"function"==typeof undefined&&e.constructor===undefined&&e!==Object.prototype?"symbol":typeof e})(e)}!function(window){if(!window._WF_IE8_POLYFILLS_LOADED){console.log("[WebfunnyMonitor] \u5f00\u59cb\u52a0\u8f7dIE8\u517c\u5bb9\u6027polyfills...");Array.prototype.reduce||(Array.prototype.reduce=function(e,t){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var o,n=Object(this),r=parseInt(n.length)||0,i=0;if(2<=arguments.length)o=t;else{for(;i<r&&!(i in n);)i++;if(r<=i)throw new TypeError("Reduce of empty array with no initial value");o=n[i++]}for(;i<r;){i in n&&(o=e(o,n[i],i,n));i++}return o});Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(window.JSON={});"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,o){var n,l,f="",c="";if("number"==typeof o)for(n=0;n<o;n+=1)c+=" ";else"string"==typeof o&&(c=o);if(!(l=t)||"function"==typeof t||"object"===_typeof(t)&&"number"==typeof t.length)return function e(t,o){var n,r,i,a;var s;var u=o[t];u&&"object"===_typeof(u)&&"function"==typeof u.toJSON&&(u=u.toJSON(t));"function"==typeof l&&(u=l.call(o,t,u));switch(_typeof(u)){case"string":return d(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";f+=c;s=[];if("[object Array]"===Object.prototype.toString.apply(u)){a=u.length;for(n=0;n<a;n+=1)s[n]=e(n,u)||"null";i=0===s.length?"[]":f?"[\n"+f+s.join(",\n"+f)+"\n"+c+"]":"["+s.join(",")+"]"}else{if(l&&"object"===_typeof(l)){a=l.length;for(n=0;n<a;n+=1)if("string"==typeof l[n]){r=l[n];(i=e(r,u))&&s.push(d(r)+(f?": ":":")+i)}}else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=e(r,u))&&s.push(d(r)+(f?": ":":")+i);i=0===s.length?"{}":f?"{\n"+f+s.join(",\n"+f)+"\n"+c+"}":"{"+s.join(",")+"}"}f=c;return i}}("",{"":e});throw new Error("JSON.stringify");function d(e){var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.lastIndex=0;return t.test(e)?'"'+e.replace(t,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}});"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var o,n,r=e[t];if(r&&"object"===_typeof(r))for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(void 0!==(n=walk(r,o))?r[o]=n:delete r[o]);return reviver.call(e,t,r)}text=String(text);var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.lastIndex=0;cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\bfnrt/]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j}throw new SyntaxError("JSON.parse")});String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t=t||0,e.length)===e});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});Object.keys||(Object.keys=function(e){var t,o=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.push(t);return o});Date.now||(Date.now=function(){return(new Date).getTime()});Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var o=Array.prototype.slice.call(arguments,1),n=this,r=function e(){},e=function e(){return n.apply(this instanceof r?this:t,o.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(r.prototype=this.prototype);e.prototype=new r;return e});window._WF_IE8_POLYFILLS_LOADED=!0;console.log("[WebfunnyMonitor] IE8\u517c\u5bb9\u6027polyfills\u52a0\u8f7d\u5b8c\u6210")}}("undefined"!=typeof window?window:this)},function(e,t,o){function u(e){return(u="function"==typeof undefined&&"symbol"==typeof "undefined.iterator"?function(e){return typeof e}:function(e){return e&&"function"==typeof undefined&&e.constructor===undefined&&e!==Object.prototype?"symbol":typeof e})(e)}n={webMonitorId:""},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="monitorCustomerKeys";var n,f,a,WfUtils={getUuid:function e(){var t=this.formatDate((new Date).getTime(),"yMdhms"),o=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*o.wfRandom()|0;return("x"===e?t:3&t|8).toString(16)})+"-"+t},formatDate:function e(t,o){try{var n=new Date(t),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate(),s=n.getHours(),u=n.getMinutes(),l=n.getSeconds(),i=9<i?i:"0"+i,a=9<a?a:"0"+a,s=9<s?s:"0"+s,u=9<u?u:"0"+u,l=9<l?l:"0"+l;return o.replace("y",r).replace("M",i).replace("d",a).replace("h",s).replace("m",u).replace("s",l)}catch(e){return""}},wfRandom:function e(){return Math[["m","o","d","n","a","r"].reverse().join("")]()},perfSubtract:function e(t,o){return 0===t||0===o?0:t-o},b64Code:function e(t){if(!t)return"";try{var o=encodeURIComponent(t);if("undefined"!=typeof btoa)try{return btoa(o)}catch(e){}return this._base64Encode(o)}catch(e){return t}},_base64Encode:function e(t){for(var o,n,r,i,a,s,u="",l=0;l<t.length;){r=(o=t.charCodeAt(l++))>>2;i=(3&o)<<4|(o=t.charCodeAt(l++))>>4;a=(15&o)<<2|(n=t.charCodeAt(l++))>>6;s=63&n;isNaN(o)?a=s=64:isNaN(n)&&(s=64);u=u+f.charAt(r)+f.charAt(i)+f.charAt(a)+f.charAt(s)}return u},setWebMonitorId:function e(t){n.webMonitorId=t||""},getWebMonitorId:function e(){return n.webMonitorId},getCustomerKey:function e(t){if(!t)return{customerKey:"",newStatus:"old"};var o="",n="old";try{var r=this._getStorageItem(a),i={};if(r)try{i=JSON.parse(r)}catch(e){i={}}if(i[t]){o=i[t];n="old"}else{o=this._generateCustomerKey();i[t]=o;n="new";this._setStorageItem(a,JSON.stringify(i))}}catch(e){o=this._generateCustomerKey();n="new"}return{customerKey:o,newStatus:n}},_generateCustomerKey:function e(){return this.getUuid()},_setStorageItem:function e(t,o){try{"undefined"!=typeof localStorage&&localStorage.setItem(t,o)}catch(e){}},_getStorageItem:function e(t){try{if("undefined"!=typeof localStorage)return localStorage.getItem(t)}catch(e){}return null},getCusInfo:function e(t){try{if(t&&"undefined"!=typeof localStorage){var o=localStorage.getItem("wmUserInfo");if(o)return JSON.parse(o)[t]||""}return""}catch(e){return""}},setCusInfo:function e(t,o){try{if(!t)return!1;if("undefined"==typeof localStorage)return!1;var n={},r=localStorage.getItem("wmUserInfo");if(r)try{n=JSON.parse(r)}catch(e){n={}}if("object"===u(t))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);else n[t]=o;localStorage.setItem("wmUserInfo",JSON.stringify(n));return!0}catch(e){this.log("error","setCusInfo error: "+e.message);return!1}},getAppInfo:function e(t){try{if(t){if("env"===t)return n.env||"pro";if("projectVersion"===t)return n.projectVersion||"1.0.0";if("undefined"!=typeof localStorage){var o=localStorage.getItem("wmAppInfo");if(o)return JSON.parse(o)[t]||""}}return""}catch(e){return""}},getKeyByWebMonitorId:function e(t){try{var o=this.getCustomerKey(t);return{customerKey:o.customerKey,newStatus:o.newStatus}}catch(e){return{customerKey:this._generateCustomerKey(),newStatus:"new"}}},getBaseInfo:function e(){try{var t=this.getWebMonitorId(),o=this.getAppInfo("projectVersion"),n=this.getAppInfo("env"),r=this.getCusInfo("userId"),i=this.getCusInfo("userTag")||this.getCusInfo("firstUserParam"),a=window.location.href,s=window.location.href.split("?")[0],u=this.getKeyByWebMonitorId(t);return{webMonitorId:t,userId:r,firstUserParam:i,projectVersion:o,env:n,completeUrl:a,simpleUrl:s,customerKey:u.customerKey,newStatus:u.newStatus}}catch(e){this.log("error","getBaseInfo error: "+e.message);return{webMonitorId:this.getWebMonitorId(),userId:"",firstUserParam:"",projectVersion:"1.0.0",env:"pro",completeUrl:"",simpleUrl:"",customerKey:this._generateCustomerKey(),newStatus:"new"}}},extend:function e(t,o){t=t||{};if(o)for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t},mergeObjects:function e(t,o){var n,r,i={};for(n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(r in o=o||{})Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r]);return i},getBasicCustomerInfo:function e(){return{customerKey:"guest_"+(new Date).getTime(),newStatus:"new"}},getPageInfo:function e(){try{var t=window.location.href||"",o=t.split("?")[0];return{completeUrl:t,simpleUrl:o}}catch(e){return{completeUrl:"",simpleUrl:""}}},toQueryString:function e(t){if(!t)return"";var o,n=[];for(o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=t[o];null!=r&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(r))}return n.join("&")},now:function e(){return Date.now?Date.now():(new Date).getTime()},isIE8:function e(){return"object"===("undefined"==typeof navigator?"undefined":u(navigator))&&"Microsoft Internet Explorer"===navigator.appName&&-1!==navigator.appVersion.indexOf("MSIE 8.")},isIE8Below:function e(){return"object"===("undefined"==typeof navigator?"undefined":u(navigator))&&"Microsoft Internet Explorer"===navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<=8},b64CodeForLog:function e(t){if(!t||"object"!==u(t))return t;try{var o,n={},r=["happenTime","webMonitorId","completeUrl","simpleUrl","uploadType","logContent"];for(o in t)if(Object.prototype.hasOwnProperty.call(t,o)){for(var i=t[o],a=!1,s=0;s<r.length;s++)if(o===r[s]){a=!0;break}n[o]=a||"string"!=typeof i||""===i?i:this.b64Code(i)}return n}catch(e){this.log("error","b64CodeForLog error: "+e.message);return t}},log:function e(t,o){if("undefined"!=typeof console&&console[t])try{console[t]("[WebfunnyIE8] "+o)}catch(e){}}};"undefined"!=typeof window&&(window.WfUtils=WfUtils);e.exports?e.exports=WfUtils:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfUtils})},function(e,t,o){var WfDevice={getInfo:n,getSimpleInfo:function e(){var t=n();return{deviceName:t.deviceName,deviceSize:t.deviceSize,os:t.os+(t.osVersion?" "+t.osVersion:""),browserName:t.browserName,browserVersion:t.browserVersion}},isIE8:function e(){return n().isIE8},getIE8Features:function e(){var t={hasLocalStorage:!1,hasJSON:!1,hasConsole:!1,hasPerformance:!1,documentMode:null};try{t.hasLocalStorage="undefined"!=typeof localStorage;t.hasJSON="undefined"!=typeof JSON;t.hasConsole="undefined"!=typeof console;t.hasPerformance="undefined"!=typeof performance;document.documentMode&&(t.documentMode=document.documentMode)}catch(e){}return t},getNetworkType:function e(){try{return navigator.connection&&navigator.connection.effectiveType?navigator.connection.effectiveType:"unknown"}catch(e){return"unknown"}}};function n(){var e={deviceName:"PC",deviceSize:"1024x768",os:"web",osVersion:"",browserName:"\u5176\u4ed6",browserVersion:"",isWeixin:!1,isIE8:!1};try{var t=navigator.userAgent||"",o=screen.width||1024;e.deviceSize=o+"x"+(screen.height||768);e.isWeixin=-1<t.indexOf("MicroMessenger");if(-1<t.indexOf("Mobile")){e.deviceName="Mobile Device";e.os="mobile";e.browserName="mobile"}else{var n=function e(t){var o={browserName:"\u5176\u4ed6",browserVersion:"",isIE8:!1};try{var n=t.toLowerCase();if(-1<n.indexOf("msie")){o.browserName="ie";var r=n.match(/msie\s+([\d.]+)/);if(r){o.browserVersion=r[1];o.isIE8=0===r[1].indexOf("8.")}}else if(-1<n.indexOf("edg")){o.browserName="edge";var i=n.match(/edg\/([\d.]+)/);i&&(o.browserVersion=i[1])}else if(-1<n.indexOf("firefox")){o.browserName="firefox";var a=n.match(/firefox\/([\d.]+)/);a&&(o.browserVersion=a[1])}else if(-1<n.indexOf("safari")&&-1===n.indexOf("chrome")){o.browserName="safari";var s=n.match(/safari\/([\d.]+)/);s&&(o.browserVersion=s[1])}else if(-1<n.indexOf("chrome")){o.browserName="chrome";var u=n.match(/chrome\/([\d.]+)/);u&&(o.browserVersion=u[1]);if(-1<n.indexOf("360se")){o.browserName="360";var l=n.match(/360se\/([\d.]+)/);l&&(o.browserVersion=l[1])}}else if(-1<n.indexOf("micromessenger")){o.browserName="weixin";var f=t.match(/MicroMessenger\/([\d.]+)/i);f&&(o.browserVersion=f[1])}}catch(e){}return o}(t);e.browserName=n.browserName;e.browserVersion=n.browserVersion;e.isIE8=n.isIE8;var r=function e(t){var o={os:"web",osVersion:"",deviceName:"PC"};try{var n=navigator.platform?navigator.platform.toLowerCase():"",r=t.toLowerCase();if(-1!==n.indexOf("win")||-1!==r.indexOf("windows")){o.os="windows";o.deviceName="Windows PC";if(-1!==r.indexOf("windows nt 10.0"))o.osVersion="10";else if(-1!==r.indexOf("windows nt 6.3"))o.osVersion="8.1";else if(-1!==r.indexOf("windows nt 6.2"))o.osVersion="8";else if(-1!==r.indexOf("windows nt 6.1"))o.osVersion="7";else if(-1!==r.indexOf("windows nt 6.0"))o.osVersion="Vista";else if(-1!==r.indexOf("windows nt 5.1"))o.osVersion="XP";else if(-1!==r.indexOf("windows nt 5.0"))o.osVersion="2000";else{var i=r.match(/windows nt ([\d.]+)/);o.osVersion=i?i[1]:"Unknown"}}else if(-1!==n.indexOf("mac")){o.os="macos";o.deviceName="Mac";var a=r.match(/mac os x ([\d_]+)/);if(a)o.osVersion=a[1].replace(/_/g,".");else{var s=r.match(/mac os x ([\d.]+)/);s&&(o.osVersion=s[1])}}else if(-1!==n.indexOf("linux")){o.os="linux";o.deviceName="Linux PC";-1!==r.indexOf("ubuntu")?o.osVersion="Ubuntu":-1!==r.indexOf("fedora")?o.osVersion="Fedora":-1!==r.indexOf("centos")?o.osVersion="CentOS":-1!==r.indexOf("debian")?o.osVersion="Debian":o.osVersion="Unknown"}else if(-1!==r.indexOf("cros")){o.os="chromeos";o.deviceName="Chromebook";var u=r.match(/cros [\w]+ ([\d.]+)/);u&&(o.osVersion=u[1])}}catch(e){}return o}(t);e.os=r.os;e.osVersion=r.osVersion;e.deviceName=r.deviceName}}catch(e){if("undefined"!=typeof console&&console.error)try{console.error("[WfDevice] getDeviceInfo error: "+e.message)}catch(e){}}return e}"undefined"!=typeof window&&(window.WfDevice=WfDevice);e.exports?e.exports=WfDevice:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfDevice})},function(e,t,o){r="webfunny_monitor",n="monitorCustomerKeys",i="lastBrowseDate",a="visitPageCount";var r,n,i,a,WfStorage={setItem:function e(t,o){return!(!t||null==o)&&(o=String(o),!(!l()||!s(t,o))||u(t,o,3650))},getItem:function e(t){if(!t)return null;if(l()){var o=function e(t){try{var o=document.createElement("div");o.style.behavior="url(#default#userData)";o.style.display="none";document.body.appendChild(o);o.load(r);var n=o.getAttribute(t);document.body.removeChild(o);return n||null}catch(e){return null}}(t);if(null!==o)return o}return function e(t){try{for(var o="wf_"+t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(o))return decodeURIComponent(i.substring(o.length))}return null}catch(e){return null}}(t)},removeItem:function e(t){if(!t)return!1;var o=!1;l()&&(o=s(t,"")||o);return o=u(t,"",-1)||o},recordVisit:function e(t){if(t)try{var o=this._getToday();if(this.getItem(i)!==o){this.setItem(i,o);this.setItem(a+"_"+t,"1")}else{var n=a+"_"+t,r=parseInt(this.getItem(n)||"0");this.setItem(n,String(r+1))}}catch(e){}},_getToday:function e(){var t=new Date,o=t.getFullYear(),n=t.getMonth()+1,t=t.getDate();return o+"-"+(n<10?"0"+n:n)+"-"+(t<10?"0"+t:t)},getVisitStats:function e(t){if(!t)return{isNewDay:!1,visitCount:0};try{var o=this._getToday(),n=this.getItem(i),r=a+"_"+t;return{isNewDay:n!==o,visitCount:parseInt(this.getItem(r)||"0")}}catch(e){return{isNewDay:!1,visitCount:0}}},clear:function e(){try{this.removeItem(n);this.removeItem(i);for(var t=0;t<10;t++)this.removeItem(a+"_key"+t);return!0}catch(e){return!1}},checkSupport:function e(){return{userData:l(),cookie:"undefined"!=typeof document&&"string"==typeof document.cookie}}};function s(e,t){try{var o=document.createElement("div");o.style.behavior="url(#default#userData)";o.style.display="none";document.body.appendChild(o);o.setAttribute(e,t);o.save(r);document.body.removeChild(o);return!0}catch(e){return!1}}function u(e,t,o){try{var n="";if(o){var r=new Date;r.setTime(r.getTime()+24*o*60*60*1e3);n="; expires="+r.toUTCString()}document.cookie="wf_"+e+"="+encodeURIComponent(t)+n+"; path=/";return!0}catch(e){return!1}}function l(){try{if("undefined"==typeof document)return!1;if(!document.createElement)return!1;var e=document.createElement("div");e.style.behavior="url(#default#userData)";return"function"==typeof e.save}catch(e){return!1}}"undefined"!=typeof window&&(window.WfStorage=WfStorage);e.exports?e.exports=WfStorage:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfStorage})},function(e,t,o){c={CUSTOMER_PV:"CUSTOMER_PV",CUS_LEAVE:"CUS_LEAVE",PAGE_LOAD:"PAGE_LOAD"},f=(new Date).getTime(),d={webMonitorId:"",uploadUrl:""};var c,f,d,WfPageView={init:function e(t){if(t){d.webMonitorId=t.webMonitorId||"";d.uploadUrl=t.uploadUrl||""}},getPageViewInfo:r,getLoadPageInfo:i,getLeavePageViewInfo:n,recordPageView:function e(t){try{if(d.webMonitorId){void 0!==window.WfStorage&&window.WfStorage.recordVisit(d.webMonitorId);var o=window.WfUtils.getPageInfo(),n=r(o,"navigate");n&&t&&t(n);setTimeout(function(){var e=i(o,"navigate");e&&t&&t(e)},1e3)}else g("webMonitorId not configured")}catch(e){g("recordPageView error: "+e.message)}},bindUnloadEvent:function e(o){try{var t=function e(){var t=n(window.WfUtils.getPageInfo(),{leaveType:1});t&&o&&o(t)};if(window.attachEvent){window.attachEvent("onbeforeunload",t);window.attachEvent("onunload",t)}else if(window.addEventListener){window.addEventListener("beforeunload",t,!1);window.addEventListener("unload",t,!1)}else{window.onbeforeunload=t;window.onunload=t}}catch(e){g("bindUnloadEvent error: "+e.message)}},getStayTime:function e(){return(new Date).getTime()-f},getUploadTypes:function e(){return c}};function r(e,t){try{var o=void 0!==window.WfDevice?window.WfDevice.getSimpleInfo():p(),n=void 0!==window.WfUtils?window.WfUtils.getCustomerKey(d.webMonitorId):window.WfUtils.getBasicCustomerInfo(),r=window.WfUtils.getPageInfo(),i=window.WfUtils.getCusInfo("userId")||"",a=window.WfUtils.getCusInfo("firstUserParam")||"",s=window.WfUtils.getAppInfo("projectVersion")||"1.0.0",u=window.WfUtils.getAppInfo("env")||"pro",l={webMonitorId:d.webMonitorId,userId:i,firstUserParam:a,projectVersion:s,env:u,completeUrl:r.completeUrl,simpleUrl:r.simpleUrl,customerKey:n.customerKey,uploadType:c.CUSTOMER_PV,happenTime:(new Date).getTime(),pageKey:function e(){try{var t,o;return void 0!==window.WfUtils&&window.WfUtils.getUuid?window.WfUtils.getUuid():(t=(new Date).getTime(),o=Math.floor(1e4*Math.random()),"page_"+t+"_"+o)}catch(e){return"page_"+(new Date).getTime()}}(),deviceName:o.deviceName,deviceSize:o.deviceSize,os:o.os,browserName:o.browserName,browserVersion:o.browserVersion,monitorIp:"",country:"",province:"",city:"",loadType:t||"navigate",newStatus:n.newStatus,referrer:function e(){try{var t,o=document.referrer||"";return o?(t=o.split("?")[0],void 0!==window.WfUtils&&window.WfUtils.b64Code?window.WfUtils.b64Code(t):encodeURIComponent(t)):""}catch(e){return""}}()},f=window.WfUtils.mergeObjects(e||{},l);return window.WfUtils.b64CodeForLog(f)}catch(e){g("getPageViewInfo error: "+e.message);return null}}function i(e,t){try{var o=void 0!==window.WfDevice?window.WfDevice.getSimpleInfo():p(),n=window.WfUtils.getPageInfo(),r=window.WfUtils.getCusInfo("userId")||"",i=window.WfUtils.getCusInfo("firstUserParam")||"",a=window.WfUtils.getAppInfo("projectVersion")||"1.0.0",s=window.WfUtils.getAppInfo("env")||"pro",u=function e(){var t={firstByte:0,domReady:0,pageCompleteLoaded:0};try{if(window.performance&&window.performance.timing){var o=window.performance.timing,n=o.navigationStart||o.fetchStart;if(n){t.firstByte=o.responseStart?o.responseStart-n:0;t.domReady=o.domContentLoadedEventEnd?o.domContentLoadedEventEnd-n:0;t.pageCompleteLoaded=o.loadEventStart?o.loadEventStart-n:0}}else{var r=(new Date).getTime();t.pageCompleteLoaded=r-f}}catch(e){}return t}(),l={webMonitorId:d.webMonitorId,userId:r,firstUserParam:i,projectVersion:a,env:s,completeUrl:n.completeUrl,simpleUrl:n.simpleUrl,uploadType:c.PAGE_LOAD,happenTime:(new Date).getTime(),loadType:t||"navigate",firstByte:u.firstByte,domReady:u.domReady,domAnalysis:u.pageCompleteLoaded,pageCompleteLoaded:u.pageCompleteLoaded,dns:0,tcp:0,ssl:0,response:0,conTrans:0,resourceLoaded:0,effectiveType:"unknown",os:o.os};return window.WfUtils.mergeObjects(e||{},l)}catch(e){g("getLoadPageInfo error: "+e.message);return null}}function n(e,t){try{var o=(t||{}).leaveType||1,n={webMonitorId:d.webMonitorId,uploadType:c.CUS_LEAVE,happenTime:(new Date).getTime(),leaveType:o,stayTime:(new Date).getTime()-f};return window.WfUtils.mergeObjects(e||{},n)}catch(e){g("getLeavePageViewInfo error: "+e.message);return null}}function p(){return{deviceName:"PC",deviceSize:(screen.width||1024)+"x"+(screen.height||768),os:"windows",browserName:"ie",browserVersion:"8.0"}}function g(e){if("undefined"!=typeof console&&console.error)try{console.error("[WfPageView] "+e)}catch(e){}}"undefined"!=typeof window&&(window.WfPageView=WfPageView);e.exports?e.exports=WfPageView:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfPageView})},function(e,t,o){n=!(r={ELE_BEHAVIOR:"ELE_BEHAVIOR"});var r,n,WfAction={init:function e(t){if(t){t.webMonitorId;0}},getClickInfo:s,startClickMonitor:function e(t){try{if(n)l("Click monitor already initialized");else if(t&&"function"==typeof t){!function e(t,o,n){try{t.addEventListener?t.addEventListener(o,n,!1):t.attachEvent?t.attachEvent("on"+o,function(e){(e=e||window.event).target=e.target||e.srcElement;n.call(t,e)}):t["on"+o]=n}catch(e){l("_addEventListener error: "+e.message)}}(document,"click",function(e){!function e(t,o){try{var n=t||window.event,r=n.target||n.srcElement;if(r){var i=u(r),a=s(window.WfUtils.getBaseInfo(),i);a&&o&&o(a)}}catch(t){l("_handleClickEvent error: "+t.message)}}(e,t)});n=!0}else l("Upload callback is required")}catch(e){l("startClickMonitor error: "+e.message)}},recordClick:function e(t,o){try{if(t&&o){var n=u(t),r=s(window.WfUtils.getBaseInfo(),n);r&&o(r)}}catch(e){l("recordClick error: "+e.message)}},stopClickMonitor:function e(){try{n=!1}catch(e){l("stopClickMonitor error: "+e.message)}},isInitialized:function e(){return n},getUploadTypes:function e(){return r}};function s(e,t){try{var o={uploadType:r.ELE_BEHAVIOR,happenTime:(new Date).getTime(),behaviorType:t.behaviorType||"click",className:t.className||"",placeholder:t.placeholder||"",inputValue:t.inputValue||"",tagName:t.tagName||"",innerText:t.innerText||""},n=window.WfUtils.mergeObjects(e||{},o);return window.WfUtils.b64CodeForLog(n)}catch(e){l("getClickInfo error: "+e.message);return null}}function u(e){var t={behaviorType:"click",className:"",placeholder:"",inputValue:"",tagName:"",innerText:""};try{if(!e)return t;t.tagName=e.tagName?e.tagName.toLowerCase():"";if("svg"===t.tagName||"use"===t.tagName)return t;e.className&&(t.className="string"==typeof e.className?e.className:e.className.baseVal||"");e.placeholder&&(t.placeholder=e.placeholder);void 0!==e.value&&(t.inputValue=e.value);var o="";void 0!==e.innerText?o=e.innerText:void 0!==e.textContent&&(o=e.textContent);if(o){100<(o=o.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")).length&&(o=o.substring(0,50)+" ... "+o.substring(o.length-49));t.innerText=o}}catch(e){l("_extractElementInfo error: "+e.message)}return t}function l(e){if("undefined"!=typeof console&&console.error)try{console.error("[WfAction] "+e)}catch(e){}}"undefined"!=typeof window&&(window.WfAction=WfAction);e.exports?e.exports=WfAction:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfAction})},function(e,t,o){function g(e){return(g="function"==typeof undefined&&"symbol"==typeof "undefined.iterator"?function(e){return typeof e}:function(e){return e&&"function"==typeof undefined&&e.constructor===undefined&&e!==Object.prototype?"symbol":typeof e})(e)}m={JS_ERROR:"JS_ERROR"},c="on_error",w="console_error",n=!(y={webMonitorId:"",uploadUrl:""}),a=null;var m,c,w,y,n,a,WfError={init:function e(t){if(t){y.webMonitorId=t.webMonitorId||"";y.uploadUrl=t.uploadUrl||""}},getJavaScriptErrorInfo:d,startErrorMonitor:function e(i){try{if(n)h("Error monitor already initialized");else if(i&&"function"==typeof i){a=window.onerror;window.onerror=function(e,t,o,n,r){try{!function e(t,o,n,r,i,a){try{var s=t||"Unknown error",u="",u=i&&i.stack?i.stack:i&&i.message?i.message:s+" at "+(o||"unknown")+":"+(n||0),l={infoType:c,errorMsg:s,errorObj:u},f=d(window.WfUtils.getBaseInfo(),l);f&&a&&a(f)}catch(e){h("_handleWindowError error: "+e.message)}}(e,t,o,0,r,i);return a&&"function"==typeof a?a.apply(this,arguments):!1}catch(e){h("window.onerror handler error: "+e.message);return!1}};n=!0}else h("Upload callback is required")}catch(e){h("startErrorMonitor error: "+e.message)}},recordError:function e(t,o){try{if(o){var n="",r="";if("string"==typeof t)r="Manual error: "+(n=t);else if(t&&t.message){n=t.message;r=t.stack||t.message}else{n=String(t);r=String(t)}var i={infoType:w,errorMsg:n,errorObj:r},a=d(window.WfUtils.getBaseInfo(),i);a&&o(a)}}catch(e){h("recordError error: "+e.message)}},stopErrorMonitor:function e(){try{if(n){window.onerror=a;a=null;n=!1}}catch(e){h("stopErrorMonitor error: "+e.message)}},isInitialized:function e(){return n},getUploadTypes:function e(){return m}};function d(e,t){try{var o=t||{},n=o.infoType||w,r=function e(t,o){var n={fullMessage:"",simpleMessage:"",stack:"",errorType:""};try{var r=t||"",i=o||"";if(0===r.length&&0===i.length)return n;1e3<=r.length&&(r=r.substring(0,999));if("string"==typeof i&&3e3<=i.length)i=i.substring(0,2999);else if("object"===g(i))try{3e3<=(i=JSON.stringify(i)).length&&(i=i.substring(0,2999))}catch(e){i=String(i)}var a="",s=(80<=r.length?a=r.substring(0,80):0<r.length&&r.length<80&&(a=r),"");if(r)if("string"==typeof i)s=i.split(": ")[0].replace(/"/g,"");else{var u=String(i);s=u.split(": ")[0].replace(/"/g,"")}n.fullMessage=s+": "+r;n.simpleMessage=s+": "+a;n.stack=String(i);n.errorType=s}catch(e){h("_processErrorMessage error: "+e.message)}return n}(o.errorMsg||"",o.errorObj||""),i=function e(){try{return"undefined"!=typeof window&&void 0!==window.WfDevice?window.WfDevice.getSimpleInfo():{deviceName:"PC",os:"windows",browserName:"ie",browserVersion:"8.0"}}catch(e){return{deviceName:"PC",os:"windows",browserName:"ie",browserVersion:"8.0"}}}(),a=void 0!==window.WfUtils?window.WfUtils.getCustomerKey(y.webMonitorId):window.WfUtils.getBasicCustomerInfo(),s=window.WfUtils.getPageInfo(),u=window.WfUtils.getCusInfo("userId")||"",l=window.WfUtils.getCusInfo("firstUserParam")||"",f=window.WfUtils.getAppInfo("projectVersion")||"1.0.0",c=window.WfUtils.getAppInfo("env")||"pro",d={webMonitorId:y.webMonitorId,userId:u,firstUserParam:l,projectVersion:f,env:c,completeUrl:s.completeUrl,simpleUrl:s.simpleUrl,customerKey:a.customerKey,uploadType:m.JS_ERROR,happenTime:(new Date).getTime(),infoType:n,pageKey:function e(){try{var t,o;return"undefined"!=typeof window&&void 0!==window.WfUtils&&window.WfUtils.getUuid?window.WfUtils.getUuid():(t=(new Date).getTime(),o=Math.floor(1e4*Math.random()),"error_"+t+"_"+o)}catch(e){return"error_"+(new Date).getTime()}}(),deviceName:i.deviceName,os:i.os,browserName:i.browserName,browserVersion:i.browserVersion,monitorIp:"",country:"",province:"",city:"",simpleErrorMessage:window.WfUtils.b64Code(r.simpleMessage),errorMessage:window.WfUtils.b64Code(r.fullMessage),errorStack:window.WfUtils.b64Code(r.stack),browserInfo:window.WfUtils.b64Code(navigator.userAgent)},p=window.WfUtils.mergeObjects(e||{},d);return window.WfUtils.b64CodeForLog(p)}catch(e){h("getJavaScriptErrorInfo error: "+e.message);return null}}function h(e){if("undefined"!=typeof console&&console.error)try{console.error("[WfError] "+e)}catch(e){}}"undefined"!=typeof window&&(window.WfError=WfError);e.exports?e.exports=WfError:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfError})},function(e,t,o){var Q={},z=null,u=null,r=null,q={OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},F=["/wfMonitor/upLog","/wfMonitor/upDLog","/wfMonitor/upLogs","/wfEvent/upEvent","/wfEvent/upEvents","/wfEvent/initCf"];function J(t,e){try{if(!t)return null;var o=document.createElement("a");if(e&&!t.match(/^https?:\/\//))if(0===t.indexOf("//"))t=window.location.protocol+t;else if(0===t.indexOf("/")){var n=document.createElement("a");n.href=e;t=n.protocol+"//"+n.host+t}else{var r=document.createElement("a");r.href=e;t=r.href.replace(/\/[^\/]*$/,"/")+t}o.href=t;return{href:o.href,protocol:o.protocol,host:o.host,hostname:o.hostname,port:o.port,pathname:o.pathname,search:o.search,hash:o.hash}}catch(e){console.log("[WfHttp] Parse URL failed:",e.message);return{href:t,protocol:"",host:"",hostname:"",port:"",pathname:"",search:"",hash:""}}}function B(e){return e?1e4<e.length?e.substring(0,1e4)+"...":e:""}function K(e){try{var t=e.simpleUrl||e.url||"";if(!t&&e.url){var o=J(e.url);o&&(t=o.protocol+"//"+o.host+o.pathname)}if(!z||!z.checkIgnore||!z.checkIgnore("hl",t)){var n=!1;if(t)for(var r=0;r<F.length;r++)if(-1!==t.indexOf(F[r])){n=!0;break}if(n)return}var i,a=z?z.getBaseInfo():{},s=(console.log("\u3010httpObj\u65e5\u5fd7\u3011",JSON.stringify(e)),{uploadType:"HTTP_LOG",happenTime:e.currentTime||(new Date).getTime(),method:e.method||"GET",simpleUrl:e.simpleUrl||"",httpUrl:e.url||"",status:e.status||0,statusText:e.statusText||"",statusResult:e.statusResult||"request",currentTime:e.currentTime||(new Date).getTime(),loadTime:e.loadTime||0,headerText:e.headerText||"",requestText:e.requestText||"",responseText:e.responseText||"",segment:e.segment||"",traceId:e.traceId||""});z&&z.b64CodeForLog&&(s=z.b64CodeForLog(s));for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i]);console.log("[WfHttp] \u5b58\u50a8HTTP\u65e5\u5fd7:",s);u?u(s)?console.log("[WfHttp] HTTP\u65e5\u5fd7\u5df2\u6dfb\u52a0\u5230\u961f\u5217"):console.log("[WfHttp] HTTP\u65e5\u5fd7\u6dfb\u52a0\u961f\u5217\u5931\u8d25"):console.log("[WfHttp] \u961f\u5217\u51fd\u6570\u4e0d\u53ef\u7528\uff0c\u65e0\u6cd5\u6dfb\u52a0HTTP\u65e5\u5fd7")}catch(e){console.log("[WfHttp] Store HTTP log failed:",e.message)}}function a(e,t){try{"xhrReadyStateChange"===t&&!function j(e){try{z?z.getUuid():(new Date).getTime(),z?z.getUuid():(new Date).getTime();var t=Q.webMonitorId||"unknown",o=Q.hasTrace||"0",n=z?z.getUuid():"trace_"+(new Date).getTime(),r=z?z.getUuid():"segment_"+(new Date).getTime(),i={traceId:n,service:t,spans:[],serviceInstance:z?z.getAppInfo("projectVersion"):"1.0.0",serviceEnvironment:z?z.getAppInfo("env"):"prod",traceSegmentId:r},a=window.location.pathname,s=e.detail.readyState,u=e.detail.getRequestConfig,l={},f=(u&&u[1]&&(l=0===u[1].indexOf("http://")||0===u[1].indexOf("https://")?J(u[1]):0===u[1].indexOf("//")?J(window.location.protocol+u[1]):J(u[1],window.location.href)),!1);if(l&&l.href)for(var c=0;c<F.length;c++)if(-1!==l.href.indexOf(F[c])){f=!0;break}if(!0!==f){if(s===q.OPENED){window._wfHttpCollector||(window._wfHttpCollector=[]);window._wfHttpCollector.push({event:e.detail,startTime:(new Date).getTime(),traceId:n,traceSegmentId:r});if("1"===o&&z){var d=String(z.b64Code?z.b64Code(n):n),p=String(z.b64Code?z.b64Code(r):r),g=String(z.b64Code?z.b64Code(t):t),m=String(z.b64Code?z.b64Code(i.serviceInstance):i.serviceInstance),w=String(z.b64Code?z.b64Code(a):a),L=String(z.b64Code?z.b64Code(window.location.host):window.location.host),A=i.spans.length,R="1-"+d+"-"+p+"-"+A+"-"+g+"-"+m+"-"+w+"-"+L;try{e.detail.setRequestHeader("sw8",R)}catch(e){console.log("[WfHttp] Set trace header failed:",e.message)}}}if(s===q.DONE)for(var y=(new Date).getTime()+1,h=window._wfHttpCollector||[],b=0;b<h.length;b++)if(h[b].event.readyState===q.DONE){var v=l,I=e.detail.getRequestBody||"",S="";try{var W=e.detail;if(W){var T=W.responseType||"";""===T||"text"===T?S=W.responseText||"":"json"===T&&(S=JSON.stringify(W.response||{}))}}catch(e){S=""}I=B(I);S=B(S);var M=u?u[0]:"GET",x=e.detail.status||0,U=e.detail.statusText||"",E=h[b].startTime,H=y-E,k=h[b].traceId,O=(h[b].traceSegmentId,"0"===o&&(i=""),window.WfUtils.getPageInfo()),C=window.WfUtils.getCusInfo("userId")||"",P=window.WfUtils.getCusInfo("firstUserParam")||"",D=window.WfUtils.getAppInfo("projectVersion")||"1.0.0",N=window.WfUtils.getAppInfo("env")||"pro",V=v.href||l.protocol+"//"+l.host+l.pathname,_=v.href||V;K({webMonitorId:u.webMonitorId,userId:C,firstUserParam:P,projectVersion:D,env:N,completeUrl:O.completeUrl,uploadType:"HTTP_LOG",method:M,headerText:"",simpleUrl:_,httpUrl:V,status:x,statusText:U,statusResult:"request",requestText:"",responseText:"",happenTime:E,loadTime:0});K({webMonitorId:u.webMonitorId,userId:C,firstUserParam:P,projectVersion:D,env:N,completeUrl:O.completeUrl,uploadType:"HTTP_LOG",method:M,headerText:"",simpleUrl:_,httpUrl:V,status:x,statusText:U,statusResult:"response",requestText:I,responseText:S,happenTime:y,loadTime:H,segment:i,traceId:k});h.splice(b,1);break}}}catch(e){console.log("[WfHttp] XHR state change error:",e.message)}}({detail:e})}catch(e){console.log("[WfHttp] Trigger event failed:",e.message)}}var n={init:function e(t,o,n){try{console.log("[WfHttp] Initializing HTTP monitoring...");u=o;z=n;if((Q=t||{}).enableHttp){window._wfHttpCollector=[];!function e(){try{var t=function e(){var t=new r,o=t.onreadystatechange;t.onreadystatechange=function(){try{a(this,"xhrReadyStateChange")}catch(e){console.log("[WfHttp] ReadyStateChange error:",e.message)}o&&o.apply(this,arguments)};t.open=function(e,t,o,n,r){this.getRequestConfig=arguments;return i.apply(this,arguments)};t.send=function(e){this.getRequestBody=e;return n.apply(this,arguments)};return t};console.log("[WfHttp] xhr monitor start");if("undefined"==typeof XMLHttpRequest)console.log("[WfHttp] XMLHttpRequest not available");else{r=window.XMLHttpRequest;var n=XMLHttpRequest.prototype.send,i=XMLHttpRequest.prototype.open;if(n&&i){r.getRequestConfig=[];window.XMLHttpRequest=t;console.log("[WfHttp] XMLHttpRequest override completed")}else console.log("[WfHttp] Tracing is not supported")}}catch(e){console.log("[WfHttp] Override XMLHttpRequest failed:",e.message)}}();console.log("[WfHttp] HTTP monitoring initialized successfully")}else console.log("[WfHttp] HTTP monitoring disabled")}catch(e){console.log("[WfHttp] Initialize failed:",e.message)}},recordHttp:function e(t){try{if(t&&t.url){console.log("[WfHttp] Manual record HTTP:",t);K(t)}else console.log("[WfHttp] Invalid http object")}catch(e){console.log("[WfHttp] Record HTTP failed:",e.message)}},getStatus:function e(){return{enabled:!!Q.enableHttp,xhrOverridden:window.XMLHttpRequest!==r}}};e.exports&&(e.exports=n);window.WfHttp=n},function(e,t,o){s={uploadUrl:"",maxRetries:3,retryDelay:1e3,timeout:5e3,enableBatch:!0,maxBatchSize:10},n={IMAGE:"image",XHR:"xhr",JSONP:"jsonp"},r=[];var s,n,r,WfUpload={init:function e(t){if(t){s.uploadUrl=t.uploadUrl||s.uploadUrl;s.maxRetries=t.maxRetries||s.maxRetries;s.retryDelay=t.retryDelay||s.retryDelay;s.timeout=t.timeout||s.timeout;s.enableBatch=(void 0!==t.enableBatch?t:s).enableBatch;s.maxBatchSize=t.maxBatchSize||s.maxBatchSize}},send:u,sendBatch:function e(t,o){if(!function e(t){return"[object Array]"===Object.prototype.toString.call(t)}(t)||0===t.length)return!function e(t){if("undefined"!=typeof console&&console.error)try{console.error("[WfUpload] "+t)}catch(e){}}("Invalid data array for batch upload"),!1;if(t.length>s.maxBatchSize){for(var n=[],r=0;r<t.length;r+=s.maxBatchSize)n.push(t.slice(r,r+s.maxBatchSize));for(var i=!0,a=0;a<n.length;a++)i=u(n[a],o);return i}console.log("\u3010\u6279\u91cf\u4e0a\u62a5\u4e2d\u3011sendBatch",JSON.stringify(t,null,2));return u(t,o)},flushRetryQueue:function e(){},getRetryQueueStatus:function e(){return{length:r.length,oldest:0<r.length?r[0].timestamp:null}},clearRetryQueue:function e(){r=[]},getMethods:function e(){return n},test:function e(t){return u({test:!0,timestamp:(new Date).getTime(),userAgent:navigator.userAgent||""},{uploadUrl:t,onSuccess:function e(){console.log("[WfUpload] Test successful")},onError:function e(t){console.error("[WfUpload] Test failed:",t)}})}};function u(e,t){console.log("\u3010\u6279\u91cf\u4e0a\u62a5\u3011options",JSON.stringify(t));console.log("\u3010\u6279\u91cf\u4e0a\u62a5\u3011upload",JSON.stringify(e));var o=s.uploadUrl;if(o)try{var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("post",o,!0);n.setRequestHeader("Content-Type","application/json");n.onreadystatechange=function(){if(4==n.readyState){var t={};try{t=n.responseText?JSON.parse(n.responseText):{}}catch(e){t={}}console.log("\u3010\u4e0a\u62a5\u7ed3\u679c\u3011",JSON.stringify(t))}};n.onerror=function(e){console.warn("\u3010\u3010 "+o+" \u4e0a\u62a5\u63a5\u53e3\u4e0d\u901a\uff0c\u8bf7\u5904\u7406\u3002\u3011\u3011",e)};var r=JSON.stringify(e||[]);n.send(r)}catch(e){console.log("sendByXhr error",JSON.stringify(e))}}"undefined"!=typeof window&&(window.WfUpload=WfUpload);e.exports?e.exports=WfUpload:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfUpload})},function(e,t,o){a={maxQueueSize:100,batchSize:10,flushInterval:3e3,maxRetries:3,enableAutoFlush:!0},i=r=null,u=n=!(s=[]);var a,s,r,i,n,u,WfQueue={init:function e(t,o){try{if(t){a.maxQueueSize=t.maxQueueSize||a.maxQueueSize;a.batchSize=t.batchSize||a.batchSize;a.flushInterval=t.flushInterval||a.flushInterval;a.maxRetries=t.maxRetries||a.maxRetries;a.enableAutoFlush=(void 0!==t.enableAutoFlush?t:a).enableAutoFlush}o&&(i=o);!function e(){try{if(!u){if(window.attachEvent){window.attachEvent("onbeforeunload",d);window.attachEvent("onunload",d)}else if(window.addEventListener){window.addEventListener("beforeunload",d,!1);window.addEventListener("unload",d,!1)}else{window.onbeforeunload=d;window.onunload=d}u=!0}}catch(e){m("_bindUnloadEvent error: "+e.message)}}();setInterval(p,6e4);n=!0;g("Queue manager initialized")}catch(e){m("init error: "+e.message)}},add:function e(t,o){try{console.log("[WfQueue] ================== \u6dfb\u52a0\u6570\u636e\u5230\u961f\u5217 ==================");console.log("[WfQueue] \u5f53\u524d\u961f\u5217\u957f\u5ea6:",s.length);if(!t){console.log("[WfQueue] \u6570\u636e\u4e3a\u7a7a\uff0c\u6dfb\u52a0\u5931\u8d25");m("Data is required for queue");return!1}try{var n=JSON.stringify(t,null,2);console.log("[WfQueue] \u8981\u6dfb\u52a0\u7684\u6570\u636e(JSON\u683c\u5f0f):");if(1e3<n.length){console.log("[WfQueue] \u6570\u636e\u8f83\u5927("+n.length+"\u5b57\u7b26)\uff0c\u663e\u793a\u524d500\u5b57\u7b26:");console.log(n.substring(0,500)+"\n... (\u6570\u636e\u88ab\u622a\u65ad) ...");console.log("[WfQueue] \u5b8c\u6574\u6570\u636e:")}console.log(n);t.uploadType&&console.log("[WfQueue] \u6570\u636e\u4e0a\u62a5\u7c7b\u578b:",t.uploadType);t.webMonitorId&&console.log("[WfQueue] \u9879\u76eeID:",t.webMonitorId)}catch(e){console.log("[WfQueue] JSON\u5e8f\u5217\u5316\u5931\u8d25:",e.message);console.log("[WfQueue] \u539f\u59cb\u6570\u636e:",t)}if(s.length>=a.maxQueueSize){console.log("[WfQueue] \u961f\u5217\u5df2\u6ee1\uff0c\u5f3a\u5236\u53d1\u9001\u3002\u961f\u5217\u957f\u5ea6:",s.length,"\u6700\u5927\u9650\u5236:",a.maxQueueSize);m("Queue is full, forcing flush");c()}var r={data:t,timestamp:(new Date).getTime(),retryCount:0,options:o||{}};s.push(r);console.log("[WfQueue] \u6570\u636e\u5df2\u6dfb\u52a0\u5230\u961f\u5217\uff0c\u65b0\u961f\u5217\u957f\u5ea6:",s.length);console.log("[WfQueue] ========================================================");if(a.enableAutoFlush){console.log("[WfQueue] \u81ea\u52a8\u53d1\u9001\u5df2\u542f\u7528\uff0c\u68c0\u67e5\u662f\u5426\u9700\u8981\u53d1\u9001");l()}else console.log("[WfQueue] \u81ea\u52a8\u53d1\u9001\u5df2\u7981\u7528");return!0}catch(e){console.log("[WfQueue] addToQueue\u5f02\u5e38:",e.message);m("addToQueue error: "+e.message);return!1}},flush:function e(){try{c()}catch(e){m("flush error: "+e.message)}},pause:function e(){try{a.enableAutoFlush=!1;if(r){clearTimeout(r);r=null}g("Queue paused")}catch(e){m("pause error: "+e.message)}},resume:function e(){try{a.enableAutoFlush=!0;0<s.length&&l();g("Queue resumed")}catch(e){m("resume error: "+e.message)}},clear:function e(){try{s=[];if(r){clearTimeout(r);r=null}g("Queue cleared")}catch(e){m("clear error: "+e.message)}},getStatus:function e(){try{var t=function e(){try{var t={length:s.length,oldestTimestamp:0,newestTimestamp:0,totalRetries:0};if(0<s.length){for(var o=[],n=0;n<s.length;n++)o.push(s[n].timestamp);t.oldestTimestamp=Math.min.apply(Math,o);t.newestTimestamp=Math.max.apply(Math,o);for(var r=0,i=0;i<s.length;i++)r+=s[i].retryCount;t.totalRetries=r}return t}catch(e){m("_getQueueStats error: "+e.message);return{length:0,oldestTimestamp:0,newestTimestamp:0,totalRetries:0}}}();return{initialized:n,autoFlushEnabled:a.enableAutoFlush,queueLength:t.length,oldestItem:t.oldestTimestamp,newestItem:t.newestTimestamp,totalRetries:t.totalRetries,hasTimer:null!==r}}catch(e){m("getStatus error: "+e.message);return{initialized:!1,autoFlushEnabled:!1,queueLength:0,oldestItem:0,newestItem:0,totalRetries:0,hasTimer:!1}}},setUploader:function e(t){i=t},updateConfig:function e(t){try{if(t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&Object.prototype.hasOwnProperty.call(a,o)&&(a[o]=t[o]);g("Config updated")}}catch(e){m("updateConfig error: "+e.message)}}};function l(){try{s.length>=a.batchSize?f():!r&&0<s.length&&(r=setTimeout(function(){f()},a.flushInterval))}catch(e){m("_checkAutoFlush error: "+e.message)}}function f(){try{console.log("[WfQueue] _flushQueue \u5f00\u59cb\uff0c\u5f53\u524d\u961f\u5217\u957f\u5ea6:",s.length);if(r){clearTimeout(r);r=null;console.log("[WfQueue] \u5df2\u6e05\u9664\u5b9a\u65f6\u5668")}if(0===s.length)console.log("[WfQueue] \u961f\u5217\u4e3a\u7a7a\uff0c\u65e0\u9700\u53d1\u9001");else if(i){console.log("[WfQueue] \u51c6\u5907\u53d1\u9001\u6570\u636e\uff0c\u6279\u91cf\u5927\u5c0f:",a.batchSize);for(var o=s.splice(0,a.batchSize),e=[],t=0;t<o.length;t++)e.push(o[t].data);console.log("[WfQueue] ================ \u6279\u91cf\u53d1\u9001\u6570\u636e ================");console.log("[WfQueue] \u53d6\u51fa",o.length,"\u6761\u6570\u636e\u51c6\u5907\u53d1\u9001");console.log("[WfQueue] \u6570\u636e:",JSON.stringify(e));var n={onSuccess:function e(t){console.log("[WfQueue] \u4e0a\u4f20\u6210\u529f\u56de\u8c03");console.log(JSON.stringify(t));!function e(t){try{g("Successfully uploaded "+t.length+" items")}catch(e){m("_onUploadSuccess error: "+e.message)}}(o)},onError:function e(t){console.log("[WfQueue] \u4e0a\u4f20\u5931\u8d25\u56de\u8c03:",t?t.message:"Unknown error");!function e(t,o){try{m("Upload failed: "+(o?o.message:"Unknown error"));for(var n=[],r=0;r<t.length;r++){var i=t[r];if(i.retryCount<a.maxRetries){i.retryCount++;n.push(i)}else m("Item exceeded max retries, dropping")}if(0<n.length){s=n.concat(s);setTimeout(function(){a.enableAutoFlush&&l()},1e3*Math.pow(2,n[0].retryCount))}}catch(e){m("_onUploadError error: "+e.message)}}(o,t)}};console.log("[WfQueue] \u6570\u636e\u957f\u5ea6:",e.length);if(1<=e.length){console.log("\u3010\u6279\u91cf\u4e0a\u4f20\u524d\u3011",JSON.stringify(e));i.sendBatch(e,n)}if(0<s.length&&a.enableAutoFlush){console.log("[WfQueue] \u8fd8\u6709\u5269\u4f59\u6570\u636e\uff0c\u7ee7\u7eed\u5904\u7406");l()}}else{console.log("[WfQueue] \u4e0a\u4f20\u5668\u672a\u914d\u7f6e");m("Uploader not configured")}}catch(e){console.log("[WfQueue] _flushQueue\u5f02\u5e38:",e.message);m("_flushQueue error: "+e.message)}}function c(){try{for(;0<s.length;)f()}catch(e){m("_forceFlush error: "+e.message)}}function d(){try{c();i&&i.flushRetryQueue&&i.flushRetryQueue()}catch(e){m("_handlePageUnload error: "+e.message)}}function p(){try{for(var e=(new Date).getTime(),t=[],o=0;o<s.length;o++)e-s[o].timestamp<3e5&&t.push(s[o]);s=t}catch(e){m("_cleanupQueue error: "+e.message)}}function g(e){if("undefined"!=typeof console&&console.log)try{console.log("[WfQueue] "+e)}catch(e){}}function m(e){if("undefined"!=typeof console&&console.error)try{console.error("[WfQueue] "+e)}catch(e){}}"undefined"!=typeof window&&(window.WfQueue=WfQueue);e.exports?e.exports=WfQueue:"undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd&&window.define(function(){return WfQueue})}]);