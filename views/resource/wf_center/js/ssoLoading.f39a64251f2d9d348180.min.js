!function(e){function t(t){for(var o,i,c=t[0],u=t[1],s=t[2],f=0,d=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,c=1;c<n.length;c++){var u=n[c];0!==r[u]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={9:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;a.push([949,0]),n()}({109:function(e,t){if(String.prototype.format||(String.prototype.format=function(){var e=this,t=Array.prototype.slice.call(arguments);return e.replace(/(\{(\d+)\})/g,(function(e,n,o){return void 0===t[o]?e:t[o]}))}),!String.prototype.trim){var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(n,"")}}Date.prototype.Format||(Date.prototype.Format=function(e){var t=e,n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t}),Number.prototype.toFixed=function(e){var t=Math.pow(10,e),n=this*t+.5;return(n=parseInt(n,10)/t)+""}},12:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var o=n(14),r=n.n(o),a=n(19),i=n.n(a),c=n(20),u=n.n(c),s=n(0),l=n.n(s),f=n(98),d=n(17),g=n(35);n(159),n(109);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var p=function(){function t(){i()(this,t)}return u()(t,null,[{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},r="GET";n.webMonitorId||(n.webMonitorId=window.localStorage.chooseWebMonitorId);var a=e+d.a.qs(n),i=Object.assign({},{method:r},this.getHeaders());return t.handleFetchData(a,i,o)}},{key:"getWithoutToken",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},r="GET";n.webMonitorId||(n.webMonitorId=window.localStorage.chooseWebMonitorId);var a=e+d.a.qs(n),i=Object.assign({},{method:r});return t.handleFetchData(a,i,o)}},{key:"post",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},r="POST";n.webMonitorId||(n.webMonitorId=window.localStorage.chooseWebMonitorId);var a=JSON.stringify(n),i=Object.assign({},{method:r,body:a},this.getHeaders());return t.handleFetchData(e,i,o)}},{key:"postWithoutToken",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},r="POST";n.webMonitorId||(n.webMonitorId=window.localStorage.chooseWebMonitorId);var a=JSON.stringify(n),i=Object.assign({},{method:r,body:a});return t.handleFetchData(e,i,o)}},{key:"put",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},r="PUT";n.webMonitorId=window.localStorage.chooseWebMonitorId;var a=JSON.stringify(n),i=Object.assign({},{method:r,body:a},this.getHeaders());return t.handleFetchData(e,i,o)}},{key:"handleFetchData",value:function(e,n,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.body&&a.body.length>1024&&(a.body=a.body.substr(0,1024)+"...");var i=o.isShowLoading;if(i&&t.showLoading(),o.isFetched=!1,o.isAbort=!1,o.hasOwnProperty("customHead")){var c=o.customHead;n.headers=Object.assign({},n.headers,c)}var u=new Promise((function(r,a){fetch(e,n).then((function(e){o.isAbort||(i&&t.hideLoading(),o.isFetched=!0,e.json().then((function(n){if(401!==n.code)if(e.ok)r(t.handleResult(n,o));else{var i=n.msg;404===e.status&&(i="您访问的内容走丢了…"),n.data&&n.data.traceId?f.b.error(l.a.createElement("span",null,i,"，",l.a.createElement("a",{target:"_blank",href:"https://cloud.webfunny.com/wf_logger/logSearch.html?traceId=".concat(n.data.traceId)},"查看"))):f.b.error(i),a(t.handleResult({fetchStatus:"error",netStatus:e.status},o))}else{var c=window.location.href;g.a?window.location.href="./login.html?target="+encodeURIComponent(c):window.location.href="/walkingfunny/#/login"}})).catch((function(n){var r=n.name+" "+n.message;a(t.handleResult({fetchStatus:"error",error:r,netStatus:e.status},o))})))})).catch((function(e){var n=e.name+" "+e.message;o.isAbort||(i&&t.hideLoading(),o.isFetched=!0,!0===o.isHandleResult&&console.error("网络开小差了，稍后再试吧",2),a(t.handleResult({fetchStatus:"error",error:n},o)))}))}));return Promise.race([u,t.fetchTimeout(o)])}},{key:"handleResult",value:function(e,t){if(e.status&&!0===t.isHandleResult){var n=e.msg||e.message||"服务器开小差了，稍后再试吧";console.error("".concat(n,"（").concat(e.status,"）"),2)}return e}},{key:"fetchTimeout",value:function(e){var n=e.isShowLoading;return new Promise((function(o,r){setTimeout((function(){e.isFetched||(e.isAbort=!0,n&&t.hideLoading(),console.error("网络开小差了，稍后再试吧",2),r({fetchStatus:"timeout"}))}),e.timeout||3e5)}))}},{key:"getHeaders",value:function(){var e={"access-token":d.a.getCookie("webfunny_token")||"","webfunny-secret-code":localStorage.webfunnySecretCode||"","wf-t":d.a.getUuid()};return Object.assign({},{},{headers:e})}},{key:"showLoading",value:function(){}},{key:"hideLoading",value:function(){}},{key:"wsGet",value:function(e,t,n,o,r,a){if(window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket){var i=new WebSocket(e);i.onmessage=function(e){n&&n(e)},i.onopen=function(e){o&&o(e),t&&t(i)},i.onclose=function(e){r&&r(e),i.close(),i=null},i.onerror=function(e){console.log(e),a&&a(e)}}else console.error("错误: 浏览器不支持websocket")}},{key:"ajax",value:function(t,n,o,r,a){var i={url:n,type:t,data:JSON.stringify(o),Accept:"*/*",contentType:"application/json;charset=utf-8",dataType:"json",traditional:!0,timeout:1e4,success:function(e,t,n){if(e.code){var o=e.msg||"服务器开小差了，稍后再试吧";return a&&"function"==typeof a&&a(o),void console.error(o)}try{r(e,n)}catch(e){console.error(e)}},error:function(e,t){var n,o="服务繁忙，稍后再试吧";switch(e.status){case 404:o="您访问的内容走丢了…";break;default:switch(t){case"timeout":o="网络开小差了，稍后再试吧";break;case"abort":o="服务繁忙，休息一下再说吧";break;case"error":o="当前服务繁忙，请稍后再试";break;default:o=(n=e.responseText?JSON.parse(e.responseText):{}).msg||(n.error||{}).message||"服务繁忙，稍后再试吧"}}a&&"function"==typeof a&&a(o),console.error(o)}};e.ajax(i)}},{key:"getApiDataFromCache",value:function(e){return"caches"in window?caches.match(e).then((function(e){return e?e.json():null})):Promise.resolve()}},{key:"getCurrentInfo",value:function(){var e=n(160).verify;localStorage.webfunnySecretCode="webfunny_secret_code";var t=d.a.getCookie("webfunny_token");return e(t,"webfunny-access",(function(e,n){if(e){console.error("token解析失败：",t),console.error(e);var o=window.location.href;return g.a?window.location.href="./login.html?target="+encodeURIComponent(o):window.location.href="/walkingfunny/#/login",{}}return n}))}},{key:"updateQueryStringParameter",value:function(e,t,n){if(!n&&0!==n)return e;var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(o)?e.replace(o,"$1"+t+"="+n+"$2"):e+r+t+"="+n}}]),t}()}).call(this,n(146))},15:function(e,t,n){"use strict";var o=n(14),r=n.n(o),a=n(53),i=n.n(a);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var u=i.a.getApiHost(),s=i.a.getMonitorHost(),l=i.a.getEventHost(),f={updateCompany:u+"/updateCompany",getCompanyInfo:u+"/getCompanyInfo",getCompanyList:u+"/getCompanyList",fixData:u+"/fixData",login:u+"/login",logout:u+"/logout",storeMonitorTokenToMemory:s+"/storeTokenToMemory",storeEventTokenToMemory:l+"/storeTokenToMemory",refreshValidateCode:u+"/refreshValidateCode",getValidateCode:u+"/getValidateCode",getUserList:u+"/getUserList",getUserInfo:u+"/getUserInfo",getAllUserInfoForSimple:u+"/getAllUserInfoForSimple",getUserListByAdmin:u+"/getUserListByAdmin",activeRegisterMember:u+"/activeRegisterMember",checkSsoToken:u+"/checkSsoToken",resetTeamLeader:u+"/resetTeamLeader",deleteRegisterMember:u+"/deleteRegisterMember",forGetPwd:u+"/forGetPwd",pushInfo:u+"/pushInfo",updateInfo:u+"/updateInfo",sendRegisterEmail:u+"/sendRegisterEmail",getRegisterEmailForSupperAdmin:u+"/getRegisterEmailForSupperAdmin",register:u+"/register",registerForSaas:u+"/registerForSaas",resetPwd:u+"/resetPwd",registerCheck:u+"/registerCheck",registerForAdmin:u+"/registerForAdmin",userList:u+"/user/list",getTeamList:u+"/getTeamList",getSimpleTeamList:u+"/getSimpleTeamList",getTeamMemberByUser:u+"/getTeamMemberByUser",projectSimpleListByWebmonitorIds:s+"/projectSimpleListByWebmonitorIds",eventProjectSimpleListByWebmonitorIds:l+"/buryPointProject/projectSimpleListByWebmonitorIds",addTeamMember:u+"/addTeamMember",getAllTeamList:u+"/getAllTeamList",getTeamMembersByWebMonitorId:u+"/getTeamMembersByWebMonitorId",createNewTeam:u+"/createNewTeam",deleteTeam:u+"/deleteTeam",moveProToTeam:u+"/moveProToTeam",updateTeamProjects:u+"/updateTeamProjects",setAdmin:u+"/setAdmin",resetSuperAdmin:u+"/resetSuperAdmin",hasSuperAdminAccount:u+"/hasSuperAdminAccount",getOtherAccessTokenWithCode:u+"/getOtherAccessTokenWithCode",getSignatureForFeiShu:u+"/getSignatureForFeiShu",getAccessTokenByCodeForFeiShu:u+"/getAccessTokenByCodeForFeiShu",updateSysConfigInfo:u+"/updateSysConfigInfo",getSysConfigInfo:u+"/getSysConfigInfo",addMonitorViewers:s+"/addViewers",addEventViewers:l+"/buryPointProject/addViewers",forbiddenRightCheck:u+"/forbiddenRightCheck",openProject:s+"/openProject",closeProject:s+"/closeProject",forbiddenProject:s+"/forbiddenProject",deleteProjectRightCheck:u+"/deleteProjectRightCheck",deleteProject:s+"/deleteProject",monitorBaseInfo:s+"/monitorBaseInfo",getConcurrencyByMinuteInHourForMonitor:s+"/getConcurrencyByMinuteInHour",getProjectHealthByScore:s+"/getProjectHealthByScore",eventBaseInfo:l+"/sysInfo",getConcurrencyByMinuteInHourForEvent:l+"/getConcurrencyByMinuteInHour",getFlowSummaryInfo:u+"/getTotalFlowData",getFlowTrendInfo:u+"/getFlowTrendData",getFlowTableListInfo:u+"/getFlowTableListData",getHourFlowTrendInfo:u+"/getHourFlowTrendData",getFlowListByCompanyIdAndProjectIds:u+"/getFlowListByCompanyIdAndProjectIds",getOrderList:u+"/getOrderList",getAllProjectListByCompanyId:s+"/getAllProjectListByCompanyId",monitorCloseFlowSwitch:s+"/closeFlowSwitch",monitorOpenFlowSwitch:s+"/openFlowSwitch",getMonitorFlowSwitch:s+"/getFlowSwitch",getEventAllProjectList:l+"/saas/projectInfo",eventCloseFlowSwitch:l+"/closeFlowSwitch",eventOpenFlowSwitch:l+"/openFlowSwitch",getEventFlowSwitch:l+"/getFlowSwitch"};t.a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f)},161:function(e,t){},162:function(e,t){},163:function(e,t){},164:function(e,t){},165:function(e,t){},166:function(e,t){},167:function(e,t){},168:function(e,t){},169:function(e,t){},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n(69),r=n.n(o),a=n(19),i=n.n(a),c=n(20),u=n.n(c),s=n(14),l=n.n(s);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var g=function(){function e(){i()(this,e)}return u()(e,null,[{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"randomNumber",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"b64EncodeUnicode",value:function(e){var t=encodeURIComponent(e);return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}},{key:"b64DecodeUnicodeForHttpLog",value:function(e){try{return decodeURIComponent(decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return e}}},{key:"b64DecodeUnicode",value:function(e){try{return decodeURIComponent(decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return e}}},{key:"b64DecodeUnicodeWithSpace",value:function(e){if(!e)return"";var t="";try{return t=e.replace(/ /g,"+"),decodeURIComponent(decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return t}}},{key:"b64DecodeUnicodeBehavior",value:function(e){if(!e)return"";var t=e.replace(/ /g,"+");try{return decodeURIComponent(decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return e}}},{key:"qs",value:function(t,n){var o=[];return function t(n,a){var i=function(r){if(!n.hasOwnProperty(r))return{v:void 0};var i=n[r];e.isArray(i)?i.forEach((function(e){o.push(encodeURIComponent((a?a+".":"")+r+"[]")+"="+encodeURIComponent(e||""))})):e.isObject(i)?t(i,a?a+"."+r:r):o.push(encodeURIComponent((a?a+".":"")+r)+"="+encodeURIComponent(i||""))};for(var c in n){var u=i(c);if("object"===r()(u))return u.v}}(t,""),n&&!t._&&o.push("_="+encodeURIComponent(BUILD_NO)),o.length?"?"+o.join("&"):""}},{key:"parseQs",value:function(){var e=window.location.search,t=e.indexOf("?"),n={};return-1===t||e.substr(t+1).split("&").forEach((function(e){var t=e.split("="),o=decodeURIComponent(t[0]),r=decodeURIComponent(t[1]||""),a=0,i=o.split("."),c=i.length;o=i[c-1];var u=n;if(c>1)for(;a<c-1;a++)u[i[a]]&&CommonTool.isObject(u[i[a]])||(u[i[a]]={}),u=u[i[a]];"[]"!==o.substr(-2)?u[o]=r:u[o=o.substr(0,o.length-2)]?u[o].push(r):u[o]=[r]})),n}},{key:"quickSort",value:function(t){if(t.length<=1)return t;for(var n=Math.floor(t.length/2),o=t.splice(n,1)[0],r=[],a=[],i=0;i<t.length;i++)t[i]<=o?r.push(t[i]):a.push(t[i]);return e.quickSort(r).concat([o],e.quickSort(a))}},{key:"showLoading",value:function(){}},{key:"get24HoursArray",value:function(){for(var e=(new Date).getTime(),t=[],n=0;n<24;n++){var o=new Date(e-60*n*60*1e3).Format("MM-dd hh");t.push(o)}return t}},{key:"getHoursArrayByTimeSize",value:function(t){if(0===t){for(var n=(new Date).getTime()-t*e.DAY_TIME,o=[],r=0;r<=24;r++){var a=n-r*e.HOUR_TIME,i=new Date(a).Format("MM-dd hh");o.push(i)}return o}for(var c=(new Date).getTime()-t*e.DAY_TIME,u=new Date(c).Format("MM-dd"),s=[],l=0;l<24;l++){var f=u+" "+(l<10?"0"+l:l);s.push(f)}return s.reverse()}},{key:"getSevenDaysAgoHoursArrayByTimeSize",value:function(t){if(0===t){for(var n=(new Date).getTime()-(7+t)*e.DAY_TIME,o=[],r=0;r<=24;r++){var a=n-r*e.HOUR_TIME,i=new Date(a).Format("MM-dd hh");o.push(i)}return o}for(var c=(new Date).getTime()-(7+t)*e.DAY_TIME,u=new Date(c).Format("MM-dd"),s=[],l=0;l<24;l++){var f=u+" "+(l<10?"0"+l:l);s.push(f)}return s.reverse()}},{key:"getSevenDaysAgo24HoursArray",value:function(){for(var e=(new Date).getTime()-6048e5,t=[],n=0;n<24;n++){var o=new Date(e-60*n*60*1e3).Format("MM-dd hh");t.push(o)}return t}},{key:"analysisInfoData",value:function(e,t){for(var n=[],o=[],r=0,a=0;a<t.length-1;a++){for(var i=!1,c=0;c<e.length;c++)if(e[c].hour===t[a]){var u=t[a],s=e[c].count;n.push(u),o.push(s),r+=parseInt(e[c].count,10),i=!0;break}!1===i&&(n.push(t[a]),o.push(0))}return{infoTotalCount:r,dateArray:n,infoArray:o,usefulArray:e.filter((function(e){return e.count>0}))}}},{key:"loadJs",value:function(e,t){var n=document.createElement("script");n.async=1,n.onload="function"==typeof t?t:function(){},n.src=e;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}},{key:"deepCopy",value:function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;++n)t[n]=this.deepCopy(e[n]);return t}if(e instanceof Object){var o={};for(var r in e)o[r]=this.deepCopy(e[r]);return o}return e}},{key:"addDays",value:function(e){var t="",n=new Date,o=new Date(n.getTime()+24*e*60*60*1e3),r=o.getFullYear(),a=o.getMonth()+1,i=o.getDate();return t=r+"-",t=a>=10?t+a+"-":t+"0"+a+"-",i>=10?t+=i:t=t+"0"+i,t}},{key:"addMomentDate",value:function(e){var t=new Date,n=new Date(t.getTime()+24*e*60*60*1e3);return[n.getFullYear(),n.getMonth(),n.getDate()]}},{key:"toFixed",value:function(e,t){var n=e,o=Math.pow(10,t);if(n<0)return n=Math.abs(n),-(parseInt(n*o+.5,10)/o);var r=parseInt(n*o+.5,10)/o,a=r,i=r+"";if(-1!==i.indexOf(".")){var c=i.split(".")[0],u=i.split(".")[1];u.length>t&&(u=u.substring(0,2)),a=c+"."+u}return 1*a}},{key:"getCookie",value:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return document.cookie.match(n)?(t=document.cookie.match(n),unescape(t[2])):""}},{key:"setCookie",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:864e5,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.location.hostname,r=new Date;r.setTime(r.getTime()+n),document.cookie=e+"="+t+";Path=/;domain="+o+";expires="+r.toGMTString()}},{key:"setCache",value:function(e,t){var n=null;if(window.localStorage.WEBFUNNY_CACHE)try{n=JSON.parse(window.localStorage.WEBFUNNY_CACHE)}catch(e){n={}}else n={};n[e]=t,window.localStorage.WEBFUNNY_CACHE=JSON.stringify(n)}},{key:"getCache",value:function(e){return window.localStorage.WEBFUNNY_CACHE?JSON.parse(window.localStorage.WEBFUNNY_CACHE)[e]:"no cache data"}},{key:"removeDuplicateForString",value:function(e){var t=e.split(""),n=new Set(t);return Array.from(n).join("")}},{key:"quickSortForObject",value:function(t,n,o,r){if(!(o>r)){for(var a=t[o][n],i=t[o],c=o,u=r;c!==u;){for(;t[u][n]>=a&&u>c;)u--;for(;t[c][n]<=a&&u>c;)c++;if(u>c){var s=t[c];t[c]=t[u],t[u]=s}}t[o]=t[c],t[c]=i,e.quickSortForObject(t,n,o,c-1),e.quickSortForObject(t,n,c+1,r)}}},{key:"handleTimeScope",value:function(e){return Math.floor(((new Date).getTime()-new Date(e+" 00:00:00").getTime())/864e5)}},{key:"calcTimeForZh",value:function(e){var t=(new Date).getTime()-e;return t<6e4?"刚刚":t<36e5?"".concat(Math.floor(t/6e4),"分钟前"):t<864e5?"".concat(Math.floor(t/36e5),"小时前"):"".concat(Math.floor(t/864e5),"天前")}},{key:"ajax",value:function(e,t,n,o,r){try{var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open(e,t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4===a.readyState){var e={};try{e=a.responseText?JSON.parse(a.responseText):{}}catch(t){console.error(a.responseText),e={}}"function"==typeof o&&o(e)}else"function"==typeof r&&r()},a.onerror=function(){"function"==typeof r&&r()};var i=JSON.stringify(n||{});a.send("data="+i)}catch(e){console.warn(e)}}},{key:"handleTreeData",value:function(t){var n=[];for(var o in t){var a={};if(a.title=o,a.key=o,"object"===r()(t[o]))a.children=e.handleTreeData(t[o]);else if("string"==typeof t[o])a.children=[{title:'"'.concat(t[o],'"'),key:'"'.concat(t[o],'"')}];else if("number"==typeof t[o])a.children=[{title:t[o],key:t[o]}];else if("boolean"==typeof t[o]){var i={};switch(t[o]){case!0:i.title="true",i.key="true";break;case!1:i.title="false",i.key="false"}a.children=[i]}n.push(a)}return n}},{key:"encodeURIFunc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t={},n=e.indexOf("?"),o=e.substr(n+1);if(-1!==n){var r,a=o.split("&"),i=f(a);try{for(i.s();!(r=i.n()).done;){var c=r.value,u=c.split("=");t[u[0]]=u[1]}}catch(e){i.e(e)}finally{i.f()}}return t}},{key:"formatTime",value:function(e,t){var n=new Date(e),o=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|M|dd|d|HH|mm|ss/g,(function(e){switch(e){case"yyyy":return o(n.getFullYear());case"MM":return o(n.getMonth()+1);case"M":return n.getMonth()+1;case"mm":return o(n.getMinutes());case"dd":return o(n.getDate());case"d":return n.getDate();case"HH":return o(n.getHours());case"ss":return o(n.getSeconds());default:return""}}))}},{key:"updateQueryStringParameter",value:function(e,t,n){var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(o)?e.replace(o,"$1"+t+"="+n+"$2"):e+r+t+"="+n}},{key:"copyContent",value:function(e){var t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value",e),t.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(t)}},{key:"getDayByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CURRENT",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=new Date,o=n.getFullYear(),r=n.getMonth()+1;r=r<10?"0"+r:r;var a="";switch(e){case"CURRENT":a=n.getDate();break;case"FIRST":a=1;break;case"LAST":a=a=new Date(o,r,0).getDate();break;default:a=n.getDate()}return[o,r,a=a<10?"0"+a:a].join(t)}},{key:"formatterNum",value:function(t){var n=Number.parseInt(t,10);return n<1e3?t:n>=1e3&&n<=1e4?"".concat(e.toFixed(n/1e3,2),"k"):"".concat(e.toFixed(n/1e4,2),"w")}},{key:"getUuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}}]),e}();l()(g,"DAY_TIME",864e5),l()(g,"HOUR_TIME",36e5),l()(g,"handleTime",(function(e,t){var n=1*e,o="";return n<=0?{value:n,unit:""}:("time"===t?(o=n<1e3?"ms":"s",n=n>1e3?g.toFixed(n/1e3,2):g.toFixed(n,2)):"count"===t?n>1e4?(o="万",n=g.toFixed(n/1e4,2)):n>1e3&&(o="千",n=g.toFixed(n/1e3,2)):"percent"===t&&(o="%"),{value:n,unit:o})}))},170:function(e,t){},171:function(e,t){},172:function(e,t){},173:function(e,t){},174:function(e,t){},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var o=!0,r="/walkingfunny/#/login"},53:function(e,t,n){var o={apiServerUrl:"default_api_server_url",monitorServerUrl:"default_monitor_server_url",eventServerUrl:"default_event_server_url"};e.exports={getApiHost:function(){return o.apiServerUrl+"/wfCenter"},getMonitorHost:function(){return o.monitorServerUrl+"/wfMonitor"},getEventHost:function(){return o.eventServerUrl+"/wfEvent"}}},922:function(e,t,n){},949:function(e,t,n){"use strict";n.r(t);var o=n(119),r=n.n(o),a=n(19),i=n.n(a),c=n(20),u=n.n(c),s=n(33),l=n.n(s),f=n(34),d=n.n(f),g=n(23),h=n.n(g),p=n(89),y=n.n(p),m=(n(922),n(0)),v=n.n(m),w=n(42),b=n.n(w),S=n(98),k=n(688),T=n(956),M=n(17),C=n(12),I=n(15),O=function(e){return C.a.postWithoutToken(I.a.storeMonitorTokenToMemory,e)},j=function(e){return C.a.postWithoutToken(I.a.storeEventTokenToMemory,e)};function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d()(this,n)}}var x=function(e){l()(o,e);var t,n=F(o);function o(e){var t;return i()(this,o),(t=n.call(this,e)).state={loginStatus:"loading"},t}return u()(o,[{key:"componentDidMount",value:(t=r()(y.a.mark((function e(){var t,n,o,a,i,c,u,s,l,f,d,g,h,p=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,n=M.a.parseQs(),o=n.webfunnySsoToken,a=n.domain,i=void 0===a?window.location.hostname:a,"feishu"!==(void 0===(c=n.ssoType)?"":c)){e.next=14;break}return e.next=5,C.a.get(I.a.getSignatureForFeiShu).catch((function(e){console.log(e)}));case 5:if(u=e.sent,s=u.data,l=s.appId,f=s.timestamp,d=s.nonceStr,g=s.signature,window.h5sdk){e.next=11;break}return console.log("invalid h5sdk"),alert("please open in feishu"),e.abrupt("return");case 11:return window.h5sdk.config({appId:l,timestamp:f,nonceStr:d,signature:g,jsApiList:["requestAuthCode"],onSuccess:function(e){console.log("config success: ".concat(JSON.stringify(e)))},onFail:function(e){console.error("config failed: ".concat(JSON.stringify(e)))}}),window.h5sdk.ready((function(){console.log("window.h5sdk.ready"),console.log("url:",window.location.href),tt.requestAuthCode({appId:l,success:function(e){return r()(y.a.mark((function n(){var o,r,a;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("requestAuthCode返回结果",e),console.log("getAuthCode succeed"),o=e.code,n.next=5,C.a.get(I.a.getAccessTokenByCodeForFeiShu,{code:o,grant_type:"authorization_code"}).catch((function(e){console.log(e)}));case 5:if(r=n.sent,console.log("========accessTokenRes"),console.log(r),a=r.data.accessToken){n.next=12;break}return S.b.warn("accessToken为空！"),n.abrupt("return");case 12:M.a.setCookie("webfunny_token",a,2592e6,i),t.setState({loginStatus:"success"}),j({accessToken:a}),O({accessToken:a}).then((function(){window.location.href="./main.html"})).catch((function(){window.location.href="./main.html"}));case 17:case"end":return n.stop()}}),n)})))()},fail:function(e){console.log("getAuthCode failed, err:",JSON.stringify(e))}})})),e.abrupt("return");case 14:if(o){e.next=18;break}return S.b.error("未携带任何token数据"),this.setState({loginStatus:"failed"}),e.abrupt("return");case 18:h=M.a.getCookie("webfunnyToken"),(m={token:o||h},C.a.post(I.a.checkSsoToken,m)).then((function(e){var t=e.data;M.a.setCookie("webfunny_token",t,2592e6,i),p.setState({loginStatus:"success"}),j({accessToken:t}),O({accessToken:t}).then((function(){window.location.href="./main.html"})).catch((function(){window.location.href="./main.html"}))})).catch((function(e){console.log(e),p.setState({loginStatus:"failed"},(function(){}))}));case 21:case"end":return e.stop()}var m}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.loginStatus;return v.a.createElement("div",{className:"sso-loading-container"},v.a.createElement("div",{className:"loading-box"},"loading"===e&&v.a.createElement(k.a,{tip:"单点登录中...",indicator:v.a.createElement(T.a,{type:"loading",style:{fontSize:24}})}),"success"===e&&v.a.createElement(k.a,{tip:"登录成功，即将跳转...",indicator:v.a.createElement(T.a,{type:"check-circle",style:{fontSize:24}})}),"failed"===e&&v.a.createElement(k.a,{tip:v.a.createElement("span",null,"单点登录失败，可手动前往",v.a.createElement("a",{target:"_blank",href:"./login.html"},"登录")),indicator:v.a.createElement(T.a,{type:"close-circle",style:{fontSize:24}})})))}}]),o}(m.Component);b.a.render(v.a.createElement(x,null),document.getElementById("app"))}});