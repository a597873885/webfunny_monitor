/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/rrweb-player@2.0.0-alpha.18/dist/rrweb-player.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __defProp=Object.defineProperty,__defNormalProp=(e,t,s)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__publicField=(e,t,s)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,s);function noop(){}function assign(e,t){for(const s in t)e[s]=t[s];return e}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function is_empty(e){return 0===Object.keys(e).length}function exclude_internal_props(e){const t={};for(const s in e)"$"!==s[0]&&(t[s]=e[s]);return t}function append(e,t){e.appendChild(t)}function insert(e,t,s){e.insertBefore(t,s||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,s,r){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)}function attr(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.data!==t&&(e.data=t)}function set_style(e,t,s,r){null==s?e.style.removeProperty(t):e.style.setProperty(t,s,"")}function toggle_class(e,t,s){e.classList.toggle(t,!!s)}function custom_event(e,t,{bubbles:s=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:s,cancelable:r})}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function afterUpdate(e){get_current_component().$$.after_update.push(e)}function onDestroy(e){get_current_component().$$.on_destroy.push(e)}function createEventDispatcher(){const e=get_current_component();return(t,s,{cancelable:r=!1}={})=>{const n=e.$$.callbacks[t];if(n){const o=custom_event(t,s,{cancelable:r});return n.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}function add_flush_callback(e){flush_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(0!==flushidx)return;const e=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){const t=[],s=[];render_callbacks.forEach((r=>-1===e.indexOf(r)?t.push(r):s.push(r))),s.forEach((e=>e())),render_callbacks=t}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,s,r){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push((()=>{outroing.delete(e),r&&(s&&e.d(1),r())})),e.o(t)}else r&&r()}function ensure_array_like(e){return void 0!==(null==e?void 0:e.length)?e:Array.from(e)}function bind(e,t,s){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=s,s(e.$$.ctx[r]))}function create_component(e){e&&e.c()}function mount_component(e,t,s){const{fragment:r,after_update:n}=e.$$;r&&r.m(t,s),add_render_callback((()=>{const t=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...t):run_all(t),e.$$.on_mount=[]})),n.forEach(add_render_callback)}function destroy_component(e,t){const s=e.$$;null!==s.fragment&&(flush_render_callbacks(s.after_update),run_all(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,s,r,n,o,i=null,a=[-1]){const l=current_component;set_current_component(e);const c=e.$$={fragment:null,ctx:[],props:o,update:noop,not_equal:n,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};i&&i(c.root);let u=!1;if(c.ctx=s?s(e,t.props||{},((t,s,...r)=>{const o=r.length?r[0]:s;return c.ctx&&n(c.ctx[t],c.ctx[t]=o)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](o),u&&make_dirty(e,t)),s})):[],c.update(),u=!0,run_all(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){const e=children(t.target);c.fragment&&c.fragment.l(e),e.forEach(detach)}else c.fragment&&c.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor),flush()}set_current_component(l)}class SvelteComponent{constructor(){__publicField(this,"$$"),__publicField(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){if(!is_function(t))return noop;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");var _a$1,__defProp2=Object.defineProperty,__defNormalProp2=(e,t,s)=>t in e?__defProp2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__publicField2=(e,t,s)=>__defNormalProp2(e,"symbol"!=typeof t?t+"":t,s),__defProp$1=Object.defineProperty,__defNormalProp$1=(e,t,s)=>t in e?__defProp$1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__publicField$1=(e,t,s)=>__defNormalProp$1(e,"symbol"!=typeof t?t+"":t,s),NodeType$3=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(NodeType$3||{});function isElement(e){return e.nodeType===e.ELEMENT_NODE}class Mirror{constructor(){__publicField$1(this,"idNodeMap",new Map),__publicField$1(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const e=this.nodeMetaMap.get(s);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function createMirror$2(){return new Mirror}function toLowerCase(e){return e.toLowerCase()}function isNodeMetaEqual(e,t){return!(!e||!t||e.type!==t.type)&&(e.type===NodeType$3.Document?e.compatMode===t.compatMode:e.type===NodeType$3.DocumentType?e.name===t.name&&e.publicId===t.publicId&&e.systemId===t.systemId:e.type===NodeType$3.Comment||e.type===NodeType$3.Text||e.type===NodeType$3.CDATA?e.textContent===t.textContent:e.type===NodeType$3.Element&&(e.tagName===t.tagName&&JSON.stringify(e.attributes)===JSON.stringify(t.attributes)&&e.isSVG===t.isSVG&&e.needBlock===t.needBlock))}const MEDIA_SELECTOR=/(max|min)-device-(width|height)/,MEDIA_SELECTOR_GLOBAL=new RegExp(MEDIA_SELECTOR.source,"g"),mediaSelectorPlugin={postcssPlugin:"postcss-custom-selectors",prepare:()=>({postcssPlugin:"postcss-custom-selectors",AtRule:function(e){e.params.match(MEDIA_SELECTOR_GLOBAL)&&(e.params=e.params.replace(MEDIA_SELECTOR_GLOBAL,"$1-$2"))}})},pseudoClassPlugin={postcssPlugin:"postcss-hover-classes",prepare:function(){const e=[];return{Rule:function(t){-1===e.indexOf(t)&&(e.push(t),t.selectors.forEach((function(e){e.includes(":hover")&&(t.selector+=",\n"+e.replace(/:hover/g,".\\:hover"))})))}}}};function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var s=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),s}var picocolors_browser$1={exports:{}},x$1=String,create$1=function(){return{isColorSupported:!1,reset:x$1,bold:x$1,dim:x$1,italic:x$1,underline:x$1,inverse:x$1,hidden:x$1,strikethrough:x$1,black:x$1,red:x$1,green:x$1,yellow:x$1,blue:x$1,magenta:x$1,cyan:x$1,white:x$1,gray:x$1,bgBlack:x$1,bgRed:x$1,bgGreen:x$1,bgYellow:x$1,bgBlue:x$1,bgMagenta:x$1,bgCyan:x$1,bgWhite:x$1}};picocolors_browser$1.exports=create$1(),picocolors_browser$1.exports.createColors=create$1;var picocolors_browserExports$1=picocolors_browser$1.exports;const __viteBrowserExternal$2={},__viteBrowserExternal$1$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal$2},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace$1(__viteBrowserExternal$1$1);let pico$1=picocolors_browserExports$1,terminalHighlight$1$1=require$$2$1,CssSyntaxError$3$1=class e extends Error{constructor(t,s,r,n,o,i){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),n&&(this.source=n),i&&(this.plugin=i),void 0!==s&&void 0!==r&&("number"==typeof s?(this.line=s,this.column=r):(this.line=s.line,this.column=s.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=pico$1.isColorSupported),terminalHighlight$1$1&&e&&(t=terminalHighlight$1$1(t));let s,r,n=t.split(/\r?\n/),o=Math.max(this.line-3,0),i=Math.min(this.line+2,n.length),a=String(i).length;if(e){let{bold:e,gray:t,red:n}=pico$1.createColors(!0);s=t=>e(n(t)),r=e=>t(e)}else s=r=e=>e;return n.slice(o,i).map(((e,t)=>{let n=o+1+t,i=" "+(" "+n).slice(-a)+" | ";if(n===this.line){let t=r(i.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return s(">")+r(i)+e+"\n "+t+s("^")}return" "+r(i)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var cssSyntaxError$1=CssSyntaxError$3$1;CssSyntaxError$3$1.default=CssSyntaxError$3$1;var symbols$1={};symbols$1.isClean=Symbol("isClean"),symbols$1.my=Symbol("my");const DEFAULT_RAW$1={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize$1(e){return e[0].toUpperCase()+e.slice(1)}let Stringifier$2$1=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;s="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&"root"!==r.type;)n+=1,r=r.parent;if(s.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<n;e++)s+=t}return s}block(e,t){let s,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),s=this.raw(e,"after")):s=this.raw(e,"after","emptyBody"),s&&this.builder(s),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],void 0!==r))return r;let n=e.parent;if("before"===s){if(!n||"root"===n.type&&n.first===e)return"";if(n&&"document"===n.type)return""}if(!n)return DEFAULT_RAW$1[s];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[s])return o.rawCache[s];if("before"===s||"after"===s)return this.beforeAfter(e,s);{let n="raw"+capitalize$1(s);this[n]?r=this[n](o,e):o.walk((e=>{if(r=e.raws[t],void 0!==r)return!1}))}return void 0===r&&(r=DEFAULT_RAW$1[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments((e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),void 0===s?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls((e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),void 0===s?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&void 0!==s.raws.before)return t=s.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==s.raws.before){let e=s.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var stringifier$1=Stringifier$2$1;Stringifier$2$1.default=Stringifier$2$1;let Stringifier$1$1=stringifier$1;function stringify$4$1(e,t){new Stringifier$1$1(t).stringify(e)}var stringify_1$1=stringify$4$1;stringify$4$1.default=stringify$4$1;let{isClean:isClean$2$1,my:my$2$1}=symbols$1,CssSyntaxError$2$1=cssSyntaxError$1,Stringifier2$1=stringifier$1,stringify$3$1=stringify_1$1;function cloneNode$1(e,t){let s=new e.constructor;for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;if("proxyCache"===r)continue;let n=e[r],o=typeof n;"parent"===r&&"object"===o?t&&(s[r]=t):"source"===r?s[r]=n:Array.isArray(n)?s[r]=n.map((e=>cloneNode$1(e,s))):("object"===o&&null!==n&&(n=cloneNode$1(n)),s[r]=n)}return s}let Node$4$1=class{constructor(e={}){this.raws={},this[isClean$2$1]=!1,this[my$2$1]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let s of e[t])"function"==typeof s.clone?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=cloneNode$1(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new CssSyntaxError$2$1(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[isClean$2$1]){this[isClean$2$1]=!1;let e=this;for(;e=e.parent;)e[isClean$2$1]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let s=this.source.start;if(e.index)s=this.positionInside(e.index,t);else if(e.word){let r=(t=this.toString()).indexOf(e.word);-1!==r&&(s=this.positionInside(r,t))}return s}positionInside(e,t){let s=t||this.toString(),r=this.source.start.column,n=this.source.start.line;for(let t=0;t<e;t++)"\n"===s[t]?(r=1,n+=1):r+=1;return{column:r,line:n}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let r=this.toString(),n=r.indexOf(e.word);-1!==n&&(t=this.positionInside(n,r),s=this.positionInside(n+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return(new Stringifier2$1).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let s={},r=null==t;t=t||new Map;let n=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let r=this[e];if(Array.isArray(r))s[e]=r.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof r&&r.toJSON)s[e]=r.toJSON(null,t);else if("source"===e){let o=t.get(r.input);null==o&&(o=n,t.set(r.input,n),n++),s[e]={end:r.end,inputId:o,start:r.start}}else s[e]=r}return r&&(s.inputs=[...t.keys()].map((e=>e.toJSON()))),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=stringify$3$1){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,s){let r={node:this};for(let e in s)r[e]=s[e];return e.warn(t,r)}get proxyOf(){return this}};var node$1=Node$4$1;Node$4$1.default=Node$4$1;let Node$3$1=node$1,Declaration$4$1=class extends Node$3$1{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var declaration$1=Declaration$4$1;Declaration$4$1.default=Declaration$4$1;let urlAlphabet$1="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet$1=(e,t=21)=>(s=t)=>{let r="",n=s;for(;n--;)r+=e[Math.random()*e.length|0];return r},nanoid$1$1=(e=21)=>{let t="",s=e;for(;s--;)t+=urlAlphabet$1[64*Math.random()|0];return t};var nonSecure$1={nanoid:nanoid$1$1,customAlphabet:customAlphabet$1};let{SourceMapConsumer:SourceMapConsumer$2$1,SourceMapGenerator:SourceMapGenerator$2$1}=require$$2$1,{existsSync:existsSync$1,readFileSync:readFileSync$1}=require$$2$1,{dirname:dirname$1$1,join:join$1}=require$$2$1;function fromBase64$1(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}let PreviousMap$2$1=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=dirname$1$1(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2$1(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return fromBase64$1(e.substr(RegExp.lastMatch.length));let t=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+t)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=dirname$1$1(e),existsSync$1(e))return this.mapFile=e,readFileSync$1(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof SourceMapConsumer$2$1)return SourceMapGenerator$2$1.fromSourceMap(t).toString();if(t instanceof SourceMapGenerator$2$1)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let s=t(e);if(s){let e=this.loadFile(s);if(!e)throw new Error("Unable to load previous source map: "+s.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=join$1(dirname$1$1(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var previousMap$1=PreviousMap$2$1;PreviousMap$2$1.default=PreviousMap$2$1;let{SourceMapConsumer:SourceMapConsumer$1$1,SourceMapGenerator:SourceMapGenerator$1$1}=require$$2$1,{fileURLToPath:fileURLToPath$1,pathToFileURL:pathToFileURL$1$1}=require$$2$1,{isAbsolute:isAbsolute$1,resolve:resolve$1$1}=require$$2$1,{nanoid:nanoid$2}=nonSecure$1,terminalHighlight$2=require$$2$1,CssSyntaxError$1$1=cssSyntaxError$1,PreviousMap$1$1=previousMap$1,fromOffsetCache$1=Symbol("fromOffsetCache"),sourceMapAvailable$1$1=Boolean(SourceMapConsumer$1$1&&SourceMapGenerator$1$1),pathAvailable$1$1=Boolean(resolve$1$1&&isAbsolute$1),Input$4$1=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!pathAvailable$1$1||/^\w+:\/\//.test(t.from)||isAbsolute$1(t.from)?this.file=t.from:this.file=resolve$1$1(t.from)),pathAvailable$1$1&&sourceMapAvailable$1$1){let e=new PreviousMap$1$1(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+nanoid$2(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,i;if(t&&"object"==typeof t){let e=t,r=s;if("number"==typeof e.offset){let r=this.fromOffset(e.offset);t=r.line,s=r.col}else t=e.line,s=e.column;if("number"==typeof r.offset){let e=this.fromOffset(r.offset);o=e.line,i=e.col}else o=r.line,i=r.column}else if(!s){let e=this.fromOffset(t);t=e.line,s=e.col}let a=this.origin(t,s,o,i);return n=a?new CssSyntaxError$1$1(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new CssSyntaxError$1$1(e,void 0===o?t:{column:s,line:t},void 0===o?s:{column:i,line:o},this.css,this.file,r.plugin),n.input={column:s,endColumn:i,endLine:o,line:t,source:this.css},this.file&&(pathToFileURL$1$1&&(n.input.url=pathToFileURL$1$1(this.file).toString()),n.input.file=this.file),n}fromOffset(e){let t,s;if(this[fromOffsetCache$1])s=this[fromOffsetCache$1];else{let e=this.css.split("\n");s=new Array(e.length);let t=0;for(let r=0,n=e.length;r<n;r++)s[r]=t,t+=e[r].length+1;this[fromOffsetCache$1]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let t,n=s.length-2;for(;r<n;)if(t=r+(n-r>>1),e<s[t])n=t-1;else{if(!(e>=s[t+1])){r=t;break}r=t+1}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:resolve$1$1(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n,o,i=this.map.consumer(),a=i.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof s&&(n=i.originalPositionFor({column:r,line:s})),o=isAbsolute$1(a.source)?pathToFileURL$1$1(a.source):new URL(a.source,this.map.consumer().sourceRoot||pathToFileURL$1$1(this.map.mapFile));let l={column:a.column,endColumn:n&&n.column,endLine:n&&n.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!fileURLToPath$1)throw new Error("file: protocol is not available in this PostCSS build");l.file=fileURLToPath$1(o)}let c=i.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var input$1=Input$4$1;Input$4$1.default=Input$4$1,terminalHighlight$2&&terminalHighlight$2.registerInput&&terminalHighlight$2.registerInput(Input$4$1);let{SourceMapConsumer:SourceMapConsumer$3,SourceMapGenerator:SourceMapGenerator$3}=require$$2$1,{dirname:dirname$2,relative:relative$1,resolve:resolve$2,sep:sep$1}=require$$2$1,{pathToFileURL:pathToFileURL$2}=require$$2$1,Input$3$1=input$1,sourceMapAvailable$2=Boolean(SourceMapConsumer$3&&SourceMapGenerator$3),pathAvailable$2=Boolean(dirname$2&&resolve$2&&relative$1&&sep$1),MapGenerator$2$1=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,s=this.toUrl(this.path(e.file)),r=e.root||dirname$2(e.file);!1===this.mapOpts.sourcesContent?(t=new SourceMapConsumer$3(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,s,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable$2&&sourceMapAvailable$2&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=SourceMapGenerator$3.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,s=1,r=1,n="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((i,a,l)=>{if(this.css+=i,a&&"end"!==l&&(o.generated.line=s,o.generated.column=r-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=n,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=i.match(/\n/g),e?(s+=e.length,t=i.lastIndexOf("\n"),r=i.length-t):r+=i.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=s,o.generated.column=r-2,this.map.addMapping(o)):(o.source=n,o.original.line=1,o.original.column=0,o.generated.line=s,o.generated.column=r-1,this.map.addMapping(o)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?dirname$2(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(s=dirname$2(resolve$2(s,this.mapOpts.annotation)));let r=relative$1(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new Input$3$1(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(pathToFileURL$2){let t=pathToFileURL$2(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===sep$1&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}};var mapGenerator$1=MapGenerator$2$1;let Node$2$1=node$1,Comment$4$1=class extends Node$2$1{constructor(e){super(e),this.type="comment"}};var comment$1=Comment$4$1;Comment$4$1.default=Comment$4$1;let parse$4$1,Rule$4$1,AtRule$4$1,Root$6$1,{isClean:isClean$1$1,my:my$1$1}=symbols$1,Declaration$3$1=declaration$1,Comment$3$1=comment$1,Node$1$1=node$1;function cleanSource$1(e){return e.map((e=>(e.nodes&&(e.nodes=cleanSource$1(e.nodes)),delete e.source,e)))}function markDirtyUp$1(e){if(e[isClean$1$1]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)markDirtyUp$1(t)}let Container$7$1=class e extends Node$1$1{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,s,r=this.getIterator();for(;this.indexes[r]<this.proxyOf.nodes.length&&(t=this.indexes[r],s=e(this.proxyOf.nodes[t],t),!1!==s);)this.indexes[r]+=1;return delete this.indexes[r],s}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...s)=>e[t](...s.map((e=>"function"==typeof e?(t,s)=>e(t.toProxy(),s):e))):"every"===t||"some"===t?s=>e[t](((e,...t)=>s(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s,r=this.index(e),n=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let e of n)this.proxyOf.nodes.splice(r+1,0,e);for(let e in this.indexes)s=this.indexes[e],r<s&&(this.indexes[e]=s+n.length);return this.markDirty(),this}insertBefore(e,t){let s,r=this.index(e),n=0===r&&"prepend",o=this.normalize(t,this.proxyOf.nodes[r],n).reverse();r=this.index(e);for(let e of o)this.proxyOf.nodes.splice(r,0,e);for(let e in this.indexes)s=this.indexes[e],r<=s&&(this.indexes[e]=s+o.length);return this.markDirty(),this}normalize(t,s){if("string"==typeof t)t=cleanSource$1(parse$4$1(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Declaration$3$1(t)]}else if(t.selector)t=[new Rule$4$1(t)];else if(t.name)t=[new AtRule$4$1(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Comment$3$1(t)]}return t.map((t=>(t[my$1$1]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[isClean$1$1]&&markDirtyUp$1(t),void 0===t.raws.before&&s&&void 0!==s.raws.before&&(t.raws.before=s.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls((r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,s)=>{let r;try{r=e(t,s)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((s,r)=>{if("atrule"===s.type&&e.test(s.name))return t(s,r)})):this.walk(((s,r)=>{if("atrule"===s.type&&s.name===e)return t(s,r)})):(t=e,this.walk(((e,s)=>{if("atrule"===e.type)return t(e,s)})))}walkComments(e){return this.walk(((t,s)=>{if("comment"===t.type)return e(t,s)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((s,r)=>{if("decl"===s.type&&e.test(s.prop))return t(s,r)})):this.walk(((s,r)=>{if("decl"===s.type&&s.prop===e)return t(s,r)})):(t=e,this.walk(((e,s)=>{if("decl"===e.type)return t(e,s)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((s,r)=>{if("rule"===s.type&&e.test(s.selector))return t(s,r)})):this.walk(((s,r)=>{if("rule"===s.type&&s.selector===e)return t(s,r)})):(t=e,this.walk(((e,s)=>{if("rule"===e.type)return t(e,s)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Container$7$1.registerParse=e=>{parse$4$1=e},Container$7$1.registerRule=e=>{Rule$4$1=e},Container$7$1.registerAtRule=e=>{AtRule$4$1=e},Container$7$1.registerRoot=e=>{Root$6$1=e};var container$1=Container$7$1;Container$7$1.default=Container$7$1,Container$7$1.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,AtRule$4$1.prototype):"rule"===e.type?Object.setPrototypeOf(e,Rule$4$1.prototype):"decl"===e.type?Object.setPrototypeOf(e,Declaration$3$1.prototype):"comment"===e.type?Object.setPrototypeOf(e,Comment$3$1.prototype):"root"===e.type&&Object.setPrototypeOf(e,Root$6$1.prototype),e[my$1$1]=!0,e.nodes&&e.nodes.forEach((e=>{Container$7$1.rebuild(e)}))};let LazyResult$4$1,Processor$3$1,Container$6$1=container$1,Document$3$1=class extends Container$6$1{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new LazyResult$4$1(new Processor$3$1,this,e).stringify()}};Document$3$1.registerLazyResult=e=>{LazyResult$4$1=e},Document$3$1.registerProcessor=e=>{Processor$3$1=e};var document$1$1=Document$3$1;Document$3$1.default=Document$3$1;let printed$1={};var warnOnce$2$1=function(e){printed$1[e]||(printed$1[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))};let Warning$2$1=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning$1=Warning$2$1;Warning$2$1.default=Warning$2$1;let Warning$1$1=warning$1,Result$3$1=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new Warning$1$1(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var result$1=Result$3$1;Result$3$1.default=Result$3$1;const SINGLE_QUOTE$1="'".charCodeAt(0),DOUBLE_QUOTE$1='"'.charCodeAt(0),BACKSLASH$1="\\".charCodeAt(0),SLASH$1="/".charCodeAt(0),NEWLINE$1="\n".charCodeAt(0),SPACE$1=" ".charCodeAt(0),FEED$1="\f".charCodeAt(0),TAB$1="\t".charCodeAt(0),CR$1="\r".charCodeAt(0),OPEN_SQUARE$1="[".charCodeAt(0),CLOSE_SQUARE$1="]".charCodeAt(0),OPEN_PARENTHESES$1="(".charCodeAt(0),CLOSE_PARENTHESES$1=")".charCodeAt(0),OPEN_CURLY$1="{".charCodeAt(0),CLOSE_CURLY$1="}".charCodeAt(0),SEMICOLON$1=";".charCodeAt(0),ASTERISK$1="*".charCodeAt(0),COLON$1=":".charCodeAt(0),AT$1="@".charCodeAt(0),RE_AT_END$1=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END$1=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET$1=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE$1=/[\da-f]/i;var tokenize$1=function(e,t={}){let s,r,n,o,i,a,l,c,u,h,p=e.css.valueOf(),d=t.ignoreErrors,m=p.length,f=0,g=[],y=[];function $(t){throw e.error("Unclosed "+t,f)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&f>=m},nextToken:function(e){if(y.length)return y.pop();if(f>=m)return;let t=!!e&&e.ignoreUnclosed;switch(s=p.charCodeAt(f),s){case NEWLINE$1:case SPACE$1:case TAB$1:case CR$1:case FEED$1:r=f;do{r+=1,s=p.charCodeAt(r)}while(s===SPACE$1||s===NEWLINE$1||s===TAB$1||s===CR$1||s===FEED$1);h=["space",p.slice(f,r)],f=r-1;break;case OPEN_SQUARE$1:case CLOSE_SQUARE$1:case OPEN_CURLY$1:case CLOSE_CURLY$1:case COLON$1:case SEMICOLON$1:case CLOSE_PARENTHESES$1:{let e=String.fromCharCode(s);h=[e,e,f];break}case OPEN_PARENTHESES$1:if(c=g.length?g.pop()[1]:"",u=p.charCodeAt(f+1),"url"===c&&u!==SINGLE_QUOTE$1&&u!==DOUBLE_QUOTE$1&&u!==SPACE$1&&u!==NEWLINE$1&&u!==TAB$1&&u!==FEED$1&&u!==CR$1){r=f;do{if(a=!1,r=p.indexOf(")",r+1),-1===r){if(d||t){r=f;break}$("bracket")}for(l=r;p.charCodeAt(l-1)===BACKSLASH$1;)l-=1,a=!a}while(a);h=["brackets",p.slice(f,r+1),f,r],f=r}else r=p.indexOf(")",f+1),o=p.slice(f,r+1),-1===r||RE_BAD_BRACKET$1.test(o)?h=["(","(",f]:(h=["brackets",o,f,r],f=r);break;case SINGLE_QUOTE$1:case DOUBLE_QUOTE$1:n=s===SINGLE_QUOTE$1?"'":'"',r=f;do{if(a=!1,r=p.indexOf(n,r+1),-1===r){if(d||t){r=f+1;break}$("string")}for(l=r;p.charCodeAt(l-1)===BACKSLASH$1;)l-=1,a=!a}while(a);h=["string",p.slice(f,r+1),f,r],f=r;break;case AT$1:RE_AT_END$1.lastIndex=f+1,RE_AT_END$1.test(p),r=0===RE_AT_END$1.lastIndex?p.length-1:RE_AT_END$1.lastIndex-2,h=["at-word",p.slice(f,r+1),f,r],f=r;break;case BACKSLASH$1:for(r=f,i=!0;p.charCodeAt(r+1)===BACKSLASH$1;)r+=1,i=!i;if(s=p.charCodeAt(r+1),i&&s!==SLASH$1&&s!==SPACE$1&&s!==NEWLINE$1&&s!==TAB$1&&s!==CR$1&&s!==FEED$1&&(r+=1,RE_HEX_ESCAPE$1.test(p.charAt(r)))){for(;RE_HEX_ESCAPE$1.test(p.charAt(r+1));)r+=1;p.charCodeAt(r+1)===SPACE$1&&(r+=1)}h=["word",p.slice(f,r+1),f,r],f=r;break;default:s===SLASH$1&&p.charCodeAt(f+1)===ASTERISK$1?(r=p.indexOf("*/",f+2)+1,0===r&&(d||t?r=p.length:$("comment")),h=["comment",p.slice(f,r+1),f,r],f=r):(RE_WORD_END$1.lastIndex=f+1,RE_WORD_END$1.test(p),r=0===RE_WORD_END$1.lastIndex?p.length-1:RE_WORD_END$1.lastIndex-2,h=["word",p.slice(f,r+1),f,r],g.push(h),f=r)}return f++,h},position:function(){return f}}};let Container$5$1=container$1,AtRule$3$1=class extends Container$5$1{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var atRule$1=AtRule$3$1;AtRule$3$1.default=AtRule$3$1,Container$5$1.registerAtRule(AtRule$3$1);let LazyResult$3$1,Processor$2$1,Container$4$1=container$1,Root$5$1=class extends Container$4$1{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t)if("prepend"===s)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of r)e.raws.before=t.raws.before;return r}removeChild(e,t){let s=this.index(e);return!t&&0===s&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new LazyResult$3$1(new Processor$2$1,this,e).stringify()}};Root$5$1.registerLazyResult=e=>{LazyResult$3$1=e},Root$5$1.registerProcessor=e=>{Processor$2$1=e};var root$1=Root$5$1;Root$5$1.default=Root$5$1,Container$4$1.registerRoot(Root$5$1);let list$2$1={comma:e=>list$2$1.split(e,[","],!0),space:e=>list$2$1.split(e,[" ","\n","\t"]),split(e,t,s){let r=[],n="",o=!1,i=0,a=!1,l="",c=!1;for(let s of e)c?c=!1:"\\"===s?c=!0:a?s===l&&(a=!1):'"'===s||"'"===s?(a=!0,l=s):"("===s?i+=1:")"===s?i>0&&(i-=1):0===i&&t.includes(s)&&(o=!0),o?(""!==n&&r.push(n.trim()),n="",o=!1):n+=s;return(s||""!==n)&&r.push(n.trim()),r}};var list_1$1=list$2$1;list$2$1.default=list$2$1;let Container$3$1=container$1,list$1$1=list_1$1,Rule$3$1=class extends Container$3$1{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1$1.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}};var rule$1=Rule$3$1;Rule$3$1.default=Rule$3$1,Container$3$1.registerRule(Rule$3$1);let Declaration$2$1=declaration$1,tokenizer2$1=tokenize$1,Comment$2$1=comment$1,AtRule$2$1=atRule$1,Root$4$1=root$1,Rule$2$1=rule$1;const SAFE_COMMENT_NEIGHBOR$1={empty:!0,space:!0};function findLastWithPosition$1(e){for(let t=e.length-1;t>=0;t--){let s=e[t],r=s[3]||s[2];if(r)return r}}let Parser$1$1=class{constructor(e){this.input=e,this.root=new Root$4$1,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,s,r,n=new AtRule$2$1;n.name=e[1].slice(1),""===n.name&&this.unnamedAtrule(n,e),this.init(n,e[2]);let o=!1,i=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){n.source.end=this.getPosition(e[2]),n.source.end.offset++,this.semicolon=!0;break}if("{"===t){i=!0;break}if("}"===t){if(a.length>0){for(r=a.length-1,s=a[r];s&&"space"===s[0];)s=a[--r];s&&(n.source.end=this.getPosition(s[3]||s[2]),n.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}n.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(n.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(n,"params",a),o&&(e=a[a.length-1],n.source.end=this.getPosition(e[3]||e[2]),n.source.end.offset++,this.spaces=n.raws.between,n.raws.between="")):(n.raws.afterName="",n.params=""),i&&(n.nodes=[],this.current=n)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let s,r=0;for(let n=t-1;n>=0&&(s=e[n],"space"===s[0]||(r+=1,2!==r));n--);throw this.input.error("Missed semicolon","word"===s[0]?s[3]+1:s[2])}colon(e){let t,s,r,n=0;for(let[o,i]of e.entries()){if(t=i,s=t[0],"("===s&&(n+=1),")"===s&&(n-=1),0===n&&":"===s){if(r){if("word"===r[0]&&"progid"===r[1])continue;return o}this.doubleColon(t)}r=t}return!1}comment(e){let t=new Comment$2$1;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let e=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=tokenizer2$1(this.input)}decl(e,t){let s=new Declaration$2$1;this.init(s,e[0][2]);let r,n=e[e.length-1];for(";"===n[0]&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(n[3]||n[2]||findLastWithPosition$1(e)),s.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;s.prop+=e.shift()[1]}for(s.raws.between="";e.length;){if(r=e.shift(),":"===r[0]){s.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),s.raws.between+=r[1]}"_"!==s.prop[0]&&"*"!==s.prop[0]||(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o,i=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)i.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(r=e[t],"!important"===r[1].toLowerCase()){s.important=!0;let r=this.stringFrom(e,t);r=this.spacesFromEnd(e)+r," !important"!==r&&(s.raws.important=r);break}if("important"===r[1].toLowerCase()){let r=e.slice(0),n="";for(let e=t;e>0;e--){let t=r[e][0];if(0===n.trim().indexOf("!")&&"space"!==t)break;n=r.pop()[1]+n}0===n.trim().indexOf("!")&&(s.important=!0,s.raws.important=n,e=r)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(s.raws.between+=i.map((e=>e[1])).join(""),i=[]),this.raw(s,"value",i.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Rule$2$1;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],i=e[1].startsWith("--"),a=[],l=e;for(;l;){if(s=l[0],a.push(l),"("===s||"["===s)n||(n=l),o.push("("===s?")":"]");else if(i&&r&&"{"===s)n||(n=l),o.push("}");else if(0===o.length){if(";"===s){if(r)return void this.decl(a,i);break}if("{"===s)return void this.rule(a);if("}"===s){this.tokenizer.back(a.pop()),t=!0;break}":"===s&&(r=!0)}else s===o[o.length-1]&&(o.pop(),0===o.length&&(n=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!i)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,i,a,l=s.length,c="",u=!0;for(let e=0;e<l;e+=1)n=s[e],o=n[0],"space"!==o||e!==l-1||r?"comment"===o?(a=s[e-1]?s[e-1][0]:"empty",i=s[e+1]?s[e+1][0]:"empty",SAFE_COMMENT_NEIGHBOR$1[a]||SAFE_COMMENT_NEIGHBOR$1[i]||","===c.slice(-1)?u=!1:c+=n[1]):c+=n[1]:u=!1;if(!u){let r=s.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:r,value:c}}e[t]=c}rule(e){e.pop();let t=new Rule$2$1;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var parser$1=Parser$1$1;let Container$2$1=container$1,Parser2$1=parser$1,Input$2$1=input$1;function parse$3$1(e,t){let s=new Input$2$1(e,t),r=new Parser2$1(s);try{r.parse()}catch(e){throw"production"!==process.env.NODE_ENV&&"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return r.root}var parse_1$1=parse$3$1;parse$3$1.default=parse$3$1,Container$2$1.registerParse(parse$3$1);let{isClean:isClean$3,my:my$3}=symbols$1,MapGenerator$1$1=mapGenerator$1,stringify$2$1=stringify_1$1,Container$1$1=container$1,Document$2$1=document$1$1,warnOnce$1$1=warnOnce$2$1,Result$2$1=result$1,parse$2$1=parse_1$1,Root$3$1=root$1;const TYPE_TO_CLASS_NAME$1={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS$1={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS$1={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN$1=0;function isPromise$1(e){return"object"==typeof e&&"function"==typeof e.then}function getEvents$1(e){let t=!1,s=TYPE_TO_CLASS_NAME$1[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[s,s+"-"+t,0,s+"Exit",s+"Exit-"+t]:t?[s,s+"-"+t,s+"Exit",s+"Exit-"+t]:e.append?[s,0,s+"Exit"]:[s,s+"Exit"]}function toStack$1(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents$1(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks$1(e){return e[isClean$3]=!1,e.nodes&&e.nodes.forEach((e=>cleanMarks$1(e))),e}let postcss$2$1={},LazyResult$2$1=class e{constructor(t,s,r){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof s||null===s||"root"!==s.type&&"document"!==s.type)if(s instanceof e||s instanceof Result$2$1)n=cleanMarks$1(s.root),s.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=s.map);else{let e=parse$2$1;r.syntax&&(e=r.syntax.parse),r.parser&&(e=r.parser),e.parse&&(e=e.parse);try{n=e(s,r)}catch(e){this.processed=!0,this.error=e}n&&!n[my$3]&&Container$1$1.rebuild(n)}else n=cleanMarks$1(s);this.result=new Result$2$1(t,n,r),this.helpers={...postcss$2$1,postcss:postcss$2$1,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(s.postcssVersion&&"production"!==process.env.NODE_ENV){let e=s.postcssPlugin,t=s.postcssVersion,r=this.result.processor.version,n=t.split("."),o=r.split(".");(n[0]!==o[0]||parseInt(n[1])>parseInt(o[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+r+", but "+e+" uses "+t+". Perhaps this is the source of the error below.")}}else e.plugin=s.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,s)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,s])};for(let t of this.plugins)if("object"==typeof t)for(let s in t){if(!PLUGIN_PROPS$1[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS$1[s])if("object"==typeof t[s])for(let r in t[s])e(t,"*"===r?s:s+"-"+r.toLowerCase(),t[s][r]);else"function"==typeof t[s]&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(isPromise$1(s))try{await s}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean$3];){e[isClean$3]=!0;let t=[toStack$1(e)];for(;t.length>0;){let e=this.visitTick(t);if(isPromise$1(e))try{await e}catch(e){let s=t[t.length-1].node;throw this.handleError(e,s)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>s(e,this.helpers)));await Promise.all(t)}else await s(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return isPromise$1(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=stringify$2$1;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let s=new MapGenerator$1$1(t,this.result.root,this.result.opts).generate();return this.result.css=s[0],this.result.map=s[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(isPromise$1(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean$3];)e[isClean$3]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this.opts||warnOnce$1$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){let e;this.result.lastPlugin=s;try{e=r(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(isPromise$1(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if("root"!==s.type&&"document"!==s.type&&!s.parent)return void e.pop();if(r.length>0&&t.visitorIndex<r.length){let[e,n]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return n(s.toProxy(),this.helpers)}catch(e){throw this.handleError(e,s)}}if(0!==t.iterator){let r,n=t.iterator;for(;r=s.nodes[s.indexes[n]];)if(s.indexes[n]+=1,!r[isClean$3])return r[isClean$3]=!0,void e.push(toStack$1(r));t.iterator=0,delete s.indexes[n]}let n=t.events;for(;t.eventIndex<n.length;){let e=n[t.eventIndex];if(t.eventIndex+=1,0===e)return void(s.nodes&&s.nodes.length&&(s[isClean$3]=!0,t.iterator=s.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[isClean$3]=!0;let t=getEvents$1(e);for(let s of t)if(0===s)e.nodes&&e.each((e=>{e[isClean$3]||this.walkSync(e)}));else{let t=this.listeners[s];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};LazyResult$2$1.registerPostcss=e=>{postcss$2$1=e};var lazyResult$1=LazyResult$2$1;LazyResult$2$1.default=LazyResult$2$1,Root$3$1.registerLazyResult(LazyResult$2$1),Document$2$1.registerLazyResult(LazyResult$2$1);let MapGenerator2$1=mapGenerator$1,stringify$1$1=stringify_1$1,warnOnce2$1=warnOnce$2$1,parse$1$1=parse_1$1;const Result$1$1=result$1;let NoWorkResult$1$1=class{constructor(e,t,s){let r;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let n=stringify$1$1;this.result=new Result$1$1(this._processor,r,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get:()=>o.root});let i=new MapGenerator2$1(n,r,this._opts,t);if(i.isMap()){let[e,t]=i.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else i.clearAnnotation(),this.result.css=i.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this._opts||warnOnce2$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=parse$1$1;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var noWorkResult$1=NoWorkResult$1$1;NoWorkResult$1$1.default=NoWorkResult$1$1;let NoWorkResult2$1=noWorkResult$1,LazyResult$1$1=lazyResult$1,Document$1$1=document$1$1,Root$2$1=root$1,Processor$1$1=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(!0===s.postcss?s=s():s.postcss&&(s=s.postcss),"object"==typeof s&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if("object"==typeof s&&s.postcssPlugin)t.push(s);else if("function"==typeof s)t.push(s);else{if("object"!=typeof s||!s.parse&&!s.stringify)throw new Error(s+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new LazyResult$1$1(this,e,t):new NoWorkResult2$1(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var processor$1=Processor$1$1;Processor$1$1.default=Processor$1$1,Root$2$1.registerProcessor(Processor$1$1),Document$1$1.registerProcessor(Processor$1$1);let Declaration$1$1=declaration$1,PreviousMap2$1=previousMap$1,Comment$1$1=comment$1,AtRule$1$1=atRule$1,Input$1$1=input$1,Root$1$1=root$1,Rule$1$1=rule$1;function fromJSON$1$1(e,t){if(Array.isArray(e))return e.map((e=>fromJSON$1$1(e)));let{inputs:s,...r}=e;if(s){t=[];for(let e of s){let s={...e,__proto__:Input$1$1.prototype};s.map&&(s.map={...s.map,__proto__:PreviousMap2$1.prototype}),t.push(s)}}if(r.nodes&&(r.nodes=e.nodes.map((e=>fromJSON$1$1(e,t)))),r.source){let{inputId:e,...s}=r.source;r.source=s,null!=e&&(r.source.input=t[e])}if("root"===r.type)return new Root$1$1(r);if("decl"===r.type)return new Declaration$1$1(r);if("rule"===r.type)return new Rule$1$1(r);if("comment"===r.type)return new Comment$1$1(r);if("atrule"===r.type)return new AtRule$1$1(r);throw new Error("Unknown node type: "+e.type)}var fromJSON_1$1=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;let CssSyntaxError2$1=cssSyntaxError$1,Declaration2$1=declaration$1,LazyResult2$1=lazyResult$1,Container2$1=container$1,Processor2$1=processor$1,stringify$5=stringify_1$1,fromJSON$2=fromJSON_1$1,Document22=document$1$1,Warning2$1=warning$1,Comment2$1=comment$1,AtRule2$1=atRule$1,Result2$1=result$1,Input2$1=input$1,parse$5=parse_1$1,list$3=list_1$1,Rule2$1=rule$1,Root2$1=root$1,Node2$1=node$1;function postcss$3(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Processor2$1(e)}postcss$3.plugin=function(e,t){let s,r=!1;function n(...s){console&&console.warn&&!r&&(r=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let n=t(...s);return n.postcssPlugin=e,n.postcssVersion=(new Processor2$1).version,n}return Object.defineProperty(n,"postcss",{get:()=>(s||(s=n()),s)}),n.process=function(e,t,s){return postcss$3([n(s)]).process(e,t)},n},postcss$3.stringify=stringify$5,postcss$3.parse=parse$5,postcss$3.fromJSON=fromJSON$2,postcss$3.list=list$3,postcss$3.comment=e=>new Comment2$1(e),postcss$3.atRule=e=>new AtRule2$1(e),postcss$3.decl=e=>new Declaration2$1(e),postcss$3.rule=e=>new Rule2$1(e),postcss$3.root=e=>new Root2$1(e),postcss$3.document=e=>new Document22(e),postcss$3.CssSyntaxError=CssSyntaxError2$1,postcss$3.Declaration=Declaration2$1,postcss$3.Container=Container2$1,postcss$3.Processor=Processor2$1,postcss$3.Document=Document22,postcss$3.Comment=Comment2$1,postcss$3.Warning=Warning2$1,postcss$3.AtRule=AtRule2$1,postcss$3.Result=Result2$1,postcss$3.Input=Input2$1,postcss$3.Rule=Rule2$1,postcss$3.Root=Root2$1,postcss$3.Node=Node2$1,LazyResult2$1.registerPostcss(postcss$3);var postcss_1$1=postcss$3;postcss$3.default=postcss$3;const postcss$1$1=getDefaultExportFromCjs$1(postcss_1$1);postcss$1$1.stringify,postcss$1$1.fromJSON,postcss$1$1.plugin,postcss$1$1.parse,postcss$1$1.list,postcss$1$1.document,postcss$1$1.comment,postcss$1$1.atRule,postcss$1$1.rule,postcss$1$1.decl,postcss$1$1.root,postcss$1$1.CssSyntaxError,postcss$1$1.Declaration,postcss$1$1.Container,postcss$1$1.Processor,postcss$1$1.Document,postcss$1$1.Comment,postcss$1$1.Warning,postcss$1$1.AtRule,postcss$1$1.Result,postcss$1$1.Input,postcss$1$1.Rule,postcss$1$1.Root,postcss$1$1.Node;const tagMap={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function getTagName(e){let t=tagMap[e.tagName]?tagMap[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}function adaptCssForReplay(e,t){const s=null==t?void 0:t.stylesWithHoverClass.get(e);if(s)return s;const r=postcss$1$1([mediaSelectorPlugin,pseudoClassPlugin]).process(e).css;return null==t||t.stylesWithHoverClass.set(e,r),r}function createCache(){return{stylesWithHoverClass:new Map}}function applyCssSplits(e,t,s,r){const n=[];for(const t of e.childNodes)t.type===NodeType$3.Text&&n.push(t);const o=t.split("/* rr_split */");for(;o.length>1&&o.length>n.length;)o.splice(-2,2,o.slice(-2).join(""));for(let e=0;e<n.length;e++){const t=n[e],i=o[e];t&&i&&(t.textContent=s?adaptCssForReplay(i,r):i)}}function buildStyleNode(e,t,s,r){const{doc:n,hackCss:o,cache:i}=r;e.childNodes.length?applyCssSplits(e,s,o,i):(o&&(s=adaptCssForReplay(s,i)),t.appendChild(n.createTextNode(s)))}function buildNode(e,t){var s;const{doc:r,hackCss:n,cache:o}=t;switch(e.type){case NodeType$3.Document:return r.implementation.createDocument(null,"",null);case NodeType$3.DocumentType:return r.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case NodeType$3.Element:{const n=getTagName(e);let o;e.isSVG?o=r.createElementNS("http://www.w3.org/2000/svg",n):(e.isCustom&&(null==(s=r.defaultView)?void 0:s.customElements)&&!r.defaultView.customElements.get(e.tagName)&&r.defaultView.customElements.define(e.tagName,class extends r.defaultView.HTMLElement{}),o=r.createElement(n));const i={};for(const s in e.attributes){if(!Object.prototype.hasOwnProperty.call(e.attributes,s))continue;let a=e.attributes[s];if(("option"!==n||"selected"!==s||!1!==a)&&null!==a)if(!0===a&&(a=""),s.startsWith("rr_"))i[s]=a;else{if("string"!=typeof a);else{if("style"===n&&"_cssText"===s){buildStyleNode(e,o,a,t);continue}if("textarea"===n&&"value"===s){o.appendChild(r.createTextNode(a)),e.childNodes=[];continue}}try{if(e.isSVG&&"xlink:href"===s)o.setAttributeNS("http://www.w3.org/1999/xlink",s,a.toString());else if("onload"===s||"onclick"===s||"onmouse"===s.substring(0,7))o.setAttribute("_"+s,a.toString());else{if("meta"===n&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===s){o.setAttribute("csp-content",a.toString());continue}("link"!==n||"preload"!==e.attributes.rel&&"modulepreload"!==e.attributes.rel||"script"!==e.attributes.as)&&("link"===n&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===n&&e.attributes.srcset&&e.attributes.rr_dataURL?o.setAttribute("rrweb-original-srcset",e.attributes.srcset):o.setAttribute(s,a.toString())))}}catch(e){}}}for(const t in i){const s=i[t];if("canvas"===n&&"rr_dataURL"===t){const e=r.createElement("img");e.onload=()=>{const t=o.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=s.toString(),o.RRNodeType&&(o.rr_dataURL=s.toString())}else if("img"===n&&"rr_dataURL"===t){const t=o;t.currentSrc.startsWith("data:")||(t.setAttribute("rrweb-original-src",e.attributes.src),t.src=s.toString())}if("rr_width"===t)o.style.setProperty("width",s.toString());else if("rr_height"===t)o.style.setProperty("height",s.toString());else if("rr_mediaCurrentTime"===t&&"number"==typeof s)o.currentTime=s;else if("rr_mediaState"===t)switch(s){case"played":o.play().catch((e=>console.warn("media playback error",e)));break;case"paused":o.pause()}else"rr_mediaPlaybackRate"===t&&"number"==typeof s?o.playbackRate=s:"rr_mediaMuted"===t&&"boolean"==typeof s?o.muted=s:"rr_mediaLoop"===t&&"boolean"==typeof s?o.loop=s:"rr_mediaVolume"===t&&"number"==typeof s?o.volume=s:"rr_open_mode"===t&&o.setAttribute("rr_open_mode",s)}if(e.isShadowHost)if(o.shadowRoot)for(;o.shadowRoot.firstChild;)o.shadowRoot.removeChild(o.shadowRoot.firstChild);else o.attachShadow({mode:"open"});return o}case NodeType$3.Text:return e.isStyle&&n?r.createTextNode(adaptCssForReplay(e.textContent,o)):r.createTextNode(e.textContent);case NodeType$3.CDATA:return r.createCDATASection(e.textContent);case NodeType$3.Comment:return r.createComment(e.textContent);default:return null}}function buildNodeWithSN(e,t){const{doc:s,mirror:r,skipChild:n=!1,hackCss:o=!0,afterAppend:i,cache:a}=t;if(r.has(e.id)){const t=r.getNode(e.id);if(isNodeMetaEqual(r.getMeta(t),e))return r.getNode(e.id)}let l=buildNode(e,{doc:s,hackCss:o,cache:a});if(!l)return null;if(e.rootId&&r.getNode(e.rootId)!==s&&r.replace(e.rootId,s),e.type===NodeType$3.Document&&(s.close(),s.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==NodeType$3.DocumentType&&(e.childNodes[0].type===NodeType$3.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?s.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):s.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),l=s),r.add(l,e),(e.type===NodeType$3.Document||e.type===NodeType$3.Element)&&!n)for(const t of e.childNodes){const n=buildNodeWithSN(t,{doc:s,mirror:r,skipChild:!1,hackCss:o,afterAppend:i,cache:a});if(n){if(t.isShadow&&isElement(l)&&l.shadowRoot)l.shadowRoot.appendChild(n);else if(e.type===NodeType$3.Document&&t.type==NodeType$3.Element){const e=n;let t=null;e.childNodes.forEach((e=>{"BODY"===e.nodeName&&(t=e)})),t?(e.removeChild(t),l.appendChild(n),e.appendChild(t)):l.appendChild(n)}else l.appendChild(n);i&&i(n,t.id)}else console.warn("Failed to rebuild",t)}return l}function visit(e,t){for(const r of e.getIds())e.has(r)&&(s=e.getNode(r),t(s));var s}function handleScroll(e,t){const s=t.getMeta(e);if((null==s?void 0:s.type)!==NodeType$3.Element)return;const r=e;for(const e in s.attributes){if(!Object.prototype.hasOwnProperty.call(s.attributes,e)||!e.startsWith("rr_"))continue;const t=s.attributes[e];"rr_scrollLeft"===e&&(r.scrollLeft=t),"rr_scrollTop"===e&&(r.scrollTop=t)}}function rebuild(e,t){const{doc:s,onVisit:r,hackCss:n=!0,afterAppend:o,cache:i,mirror:a=new Mirror}=t,l=buildNodeWithSN(e,{doc:s,mirror:a,skipChild:!1,hackCss:n,afterAppend:o,cache:i});return visit(a,(e=>{r&&r(e),handleScroll(e,a)})),l}var __defProp22=Object.defineProperty,__defNormalProp22=(e,t,s)=>t in e?__defProp22(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__publicField22=(e,t,s)=>__defNormalProp22(e,"symbol"!=typeof t?t+"":t,s),__defProp222=Object.defineProperty,__defNormalProp222=(e,t,s)=>t in e?__defProp222(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__publicField222=(e,t,s)=>__defNormalProp222(e,"symbol"!=typeof t?t+"":t,s);let Mirror$1=class{constructor(){__publicField222(this,"idNodeMap",new Map),__publicField222(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const e=this.nodeMetaMap.get(s);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function createMirror$1(){return new Mirror$1}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var s=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),s}var picocolors_browser={exports:{}},x$2=String,create=function(){return{isColorSupported:!1,reset:x$2,bold:x$2,dim:x$2,italic:x$2,underline:x$2,inverse:x$2,hidden:x$2,strikethrough:x$2,black:x$2,red:x$2,green:x$2,yellow:x$2,blue:x$2,magenta:x$2,cyan:x$2,white:x$2,gray:x$2,bgBlack:x$2,bgRed:x$2,bgGreen:x$2,bgYellow:x$2,bgBlue:x$2,bgMagenta:x$2,bgCyan:x$2,bgWhite:x$2}};picocolors_browser.exports=create(),picocolors_browser.exports.createColors=create;var picocolors_browserExports=picocolors_browser.exports;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);let pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=class e extends Error{constructor(t,s,r,n,o,i){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),n&&(this.source=n),i&&(this.plugin=i),void 0!==s&&void 0!==r&&("number"==typeof s?(this.line=s,this.column=r):(this.line=s.line,this.column=s.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=pico.isColorSupported),terminalHighlight$1&&e&&(t=terminalHighlight$1(t));let s,r,n=t.split(/\r?\n/),o=Math.max(this.line-3,0),i=Math.min(this.line+2,n.length),a=String(i).length;if(e){let{bold:e,gray:t,red:n}=pico.createColors(!0);s=t=>e(n(t)),r=e=>t(e)}else s=r=e=>e;return n.slice(o,i).map(((e,t)=>{let n=o+1+t,i=" "+(" "+n).slice(-a)+" | ";if(n===this.line){let t=r(i.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return s(">")+r(i)+e+"\n "+t+s("^")}return" "+r(i)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;var symbols={};symbols.isClean=Symbol("isClean"),symbols.my=Symbol("my");const DEFAULT_RAW={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize(e){return e[0].toUpperCase()+e.slice(1)}let Stringifier$2=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;s="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&"root"!==r.type;)n+=1,r=r.parent;if(s.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<n;e++)s+=t}return s}block(e,t){let s,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),s=this.raw(e,"after")):s=this.raw(e,"after","emptyBody"),s&&this.builder(s),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],void 0!==r))return r;let n=e.parent;if("before"===s){if(!n||"root"===n.type&&n.first===e)return"";if(n&&"document"===n.type)return""}if(!n)return DEFAULT_RAW[s];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[s])return o.rawCache[s];if("before"===s||"after"===s)return this.beforeAfter(e,s);{let n="raw"+capitalize(s);this[n]?r=this[n](o,e):o.walk((e=>{if(r=e.raws[t],void 0!==r)return!1}))}return void 0===r&&(r=DEFAULT_RAW[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments((e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),void 0===s?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls((e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),void 0===s?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&void 0!==s.raws.before)return t=s.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==s.raws.before){let e=s.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var stringifier=Stringifier$2;Stringifier$2.default=Stringifier$2;let Stringifier$1=stringifier;function stringify$4(e,t){new Stringifier$1(t).stringify(e)}var stringify_1=stringify$4;stringify$4.default=stringify$4;let{isClean:isClean$2,my:my$2}=symbols,CssSyntaxError$2=cssSyntaxError,Stringifier22=stringifier,stringify$3=stringify_1;function cloneNode(e,t){let s=new e.constructor;for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;if("proxyCache"===r)continue;let n=e[r],o=typeof n;"parent"===r&&"object"===o?t&&(s[r]=t):"source"===r?s[r]=n:Array.isArray(n)?s[r]=n.map((e=>cloneNode(e,s))):("object"===o&&null!==n&&(n=cloneNode(n)),s[r]=n)}return s}let Node$4=class{constructor(e={}){this.raws={},this[isClean$2]=!1,this[my$2]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let s of e[t])"function"==typeof s.clone?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=cloneNode(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new CssSyntaxError$2(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let e=this;for(;e=e.parent;)e[isClean$2]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let s=this.source.start;if(e.index)s=this.positionInside(e.index,t);else if(e.word){let r=(t=this.toString()).indexOf(e.word);-1!==r&&(s=this.positionInside(r,t))}return s}positionInside(e,t){let s=t||this.toString(),r=this.source.start.column,n=this.source.start.line;for(let t=0;t<e;t++)"\n"===s[t]?(r=1,n+=1):r+=1;return{column:r,line:n}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let r=this.toString(),n=r.indexOf(e.word);-1!==n&&(t=this.positionInside(n,r),s=this.positionInside(n+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return(new Stringifier22).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let s={},r=null==t;t=t||new Map;let n=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let r=this[e];if(Array.isArray(r))s[e]=r.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof r&&r.toJSON)s[e]=r.toJSON(null,t);else if("source"===e){let o=t.get(r.input);null==o&&(o=n,t.set(r.input,n),n++),s[e]={end:r.end,inputId:o,start:r.start}}else s[e]=r}return r&&(s.inputs=[...t.keys()].map((e=>e.toJSON()))),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=stringify$3){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,s){let r={node:this};for(let e in s)r[e]=s[e];return e.warn(t,r)}get proxyOf(){return this}};var node=Node$4;Node$4.default=Node$4;let Node$3=node,Declaration$4=class extends Node$3{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var declaration=Declaration$4;Declaration$4.default=Declaration$4;let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(e,t=21)=>(s=t)=>{let r="",n=s;for(;n--;)r+=e[Math.random()*e.length|0];return r},nanoid$1=(e=21)=>{let t="",s=e;for(;s--;)t+=urlAlphabet[64*Math.random()|0];return t};var nonSecure={nanoid:nanoid$1,customAlphabet:customAlphabet};let{SourceMapConsumer:SourceMapConsumer$2,SourceMapGenerator:SourceMapGenerator$2}=require$$2,{existsSync:existsSync,readFileSync:readFileSync}=require$$2,{dirname:dirname$1,join:join}=require$$2;function fromBase64(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}let PreviousMap$2=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=dirname$1(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return fromBase64(e.substr(RegExp.lastMatch.length));let t=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+t)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=dirname$1(e),existsSync(e))return this.mapFile=e,readFileSync(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof SourceMapConsumer$2)return SourceMapGenerator$2.fromSourceMap(t).toString();if(t instanceof SourceMapGenerator$2)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let s=t(e);if(s){let e=this.loadFile(s);if(!e)throw new Error("Unable to load previous source map: "+s.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=join(dirname$1(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var previousMap=PreviousMap$2;PreviousMap$2.default=PreviousMap$2;let{SourceMapConsumer:SourceMapConsumer$1,SourceMapGenerator:SourceMapGenerator$1}=require$$2,{fileURLToPath:fileURLToPath,pathToFileURL:pathToFileURL$1}=require$$2,{isAbsolute:isAbsolute,resolve:resolve$1}=require$$2,{nanoid:nanoid}=nonSecure,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol("fromOffsetCache"),sourceMapAvailable$1=Boolean(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=Boolean(resolve$1&&isAbsolute),Input$4=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!pathAvailable$1||/^\w+:\/\//.test(t.from)||isAbsolute(t.from)?this.file=t.from:this.file=resolve$1(t.from)),pathAvailable$1&&sourceMapAvailable$1){let e=new PreviousMap$1(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+nanoid(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,i;if(t&&"object"==typeof t){let e=t,r=s;if("number"==typeof e.offset){let r=this.fromOffset(e.offset);t=r.line,s=r.col}else t=e.line,s=e.column;if("number"==typeof r.offset){let e=this.fromOffset(r.offset);o=e.line,i=e.col}else o=r.line,i=r.column}else if(!s){let e=this.fromOffset(t);t=e.line,s=e.col}let a=this.origin(t,s,o,i);return n=a?new CssSyntaxError$1(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new CssSyntaxError$1(e,void 0===o?t:{column:s,line:t},void 0===o?s:{column:i,line:o},this.css,this.file,r.plugin),n.input={column:s,endColumn:i,endLine:o,line:t,source:this.css},this.file&&(pathToFileURL$1&&(n.input.url=pathToFileURL$1(this.file).toString()),n.input.file=this.file),n}fromOffset(e){let t,s;if(this[fromOffsetCache])s=this[fromOffsetCache];else{let e=this.css.split("\n");s=new Array(e.length);let t=0;for(let r=0,n=e.length;r<n;r++)s[r]=t,t+=e[r].length+1;this[fromOffsetCache]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let t,n=s.length-2;for(;r<n;)if(t=r+(n-r>>1),e<s[t])n=t-1;else{if(!(e>=s[t+1])){r=t;break}r=t+1}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:resolve$1(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n,o,i=this.map.consumer(),a=i.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof s&&(n=i.originalPositionFor({column:r,line:s})),o=isAbsolute(a.source)?pathToFileURL$1(a.source):new URL(a.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));let l={column:a.column,endColumn:n&&n.column,endLine:n&&n.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!fileURLToPath)throw new Error("file: protocol is not available in this PostCSS build");l.file=fileURLToPath(o)}let c=i.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var input=Input$4;Input$4.default=Input$4,terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4);let{SourceMapConsumer:SourceMapConsumer,SourceMapGenerator:SourceMapGenerator}=require$$2,{dirname:dirname,relative:relative,resolve:resolve,sep:sep}=require$$2,{pathToFileURL:pathToFileURL}=require$$2,Input$3=input,sourceMapAvailable=Boolean(SourceMapConsumer&&SourceMapGenerator),pathAvailable=Boolean(dirname&&resolve&&relative&&sep),MapGenerator$2=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,s=this.toUrl(this.path(e.file)),r=e.root||dirname(e.file);!1===this.mapOpts.sourcesContent?(t=new SourceMapConsumer(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,s,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=SourceMapGenerator.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,s=1,r=1,n="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((i,a,l)=>{if(this.css+=i,a&&"end"!==l&&(o.generated.line=s,o.generated.column=r-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=n,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=i.match(/\n/g),e?(s+=e.length,t=i.lastIndexOf("\n"),r=i.length-t):r+=i.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=s,o.generated.column=r-2,this.map.addMapping(o)):(o.source=n,o.original.line=1,o.original.column=0,o.generated.line=s,o.generated.column=r-1,this.map.addMapping(o)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?dirname(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(s=dirname(resolve(s,this.mapOpts.annotation)));let r=relative(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new Input$3(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(pathToFileURL){let t=pathToFileURL(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===sep&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}};var mapGenerator=MapGenerator$2;let Node$2=node,Comment$4=class extends Node$2{constructor(e){super(e),this.type="comment"}};var comment=Comment$4;Comment$4.default=Comment$4;let parse$4,Rule$4,AtRule$4,Root$6,{isClean:isClean$1,my:my$1}=symbols,Declaration$3=declaration,Comment$3=comment,Node$1=node;function cleanSource(e){return e.map((e=>(e.nodes&&(e.nodes=cleanSource(e.nodes)),delete e.source,e)))}function markDirtyUp(e){if(e[isClean$1]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)markDirtyUp(t)}let Container$7=class e extends Node$1{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,s,r=this.getIterator();for(;this.indexes[r]<this.proxyOf.nodes.length&&(t=this.indexes[r],s=e(this.proxyOf.nodes[t],t),!1!==s);)this.indexes[r]+=1;return delete this.indexes[r],s}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...s)=>e[t](...s.map((e=>"function"==typeof e?(t,s)=>e(t.toProxy(),s):e))):"every"===t||"some"===t?s=>e[t](((e,...t)=>s(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s,r=this.index(e),n=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let e of n)this.proxyOf.nodes.splice(r+1,0,e);for(let e in this.indexes)s=this.indexes[e],r<s&&(this.indexes[e]=s+n.length);return this.markDirty(),this}insertBefore(e,t){let s,r=this.index(e),n=0===r&&"prepend",o=this.normalize(t,this.proxyOf.nodes[r],n).reverse();r=this.index(e);for(let e of o)this.proxyOf.nodes.splice(r,0,e);for(let e in this.indexes)s=this.indexes[e],r<=s&&(this.indexes[e]=s+o.length);return this.markDirty(),this}normalize(t,s){if("string"==typeof t)t=cleanSource(parse$4(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Declaration$3(t)]}else if(t.selector)t=[new Rule$4(t)];else if(t.name)t=[new AtRule$4(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Comment$3(t)]}return t.map((t=>(t[my$1]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[isClean$1]&&markDirtyUp(t),void 0===t.raws.before&&s&&void 0!==s.raws.before&&(t.raws.before=s.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls((r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,s)=>{let r;try{r=e(t,s)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((s,r)=>{if("atrule"===s.type&&e.test(s.name))return t(s,r)})):this.walk(((s,r)=>{if("atrule"===s.type&&s.name===e)return t(s,r)})):(t=e,this.walk(((e,s)=>{if("atrule"===e.type)return t(e,s)})))}walkComments(e){return this.walk(((t,s)=>{if("comment"===t.type)return e(t,s)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((s,r)=>{if("decl"===s.type&&e.test(s.prop))return t(s,r)})):this.walk(((s,r)=>{if("decl"===s.type&&s.prop===e)return t(s,r)})):(t=e,this.walk(((e,s)=>{if("decl"===e.type)return t(e,s)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((s,r)=>{if("rule"===s.type&&e.test(s.selector))return t(s,r)})):this.walk(((s,r)=>{if("rule"===s.type&&s.selector===e)return t(s,r)})):(t=e,this.walk(((e,s)=>{if("rule"===e.type)return t(e,s)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Container$7.registerParse=e=>{parse$4=e},Container$7.registerRule=e=>{Rule$4=e},Container$7.registerAtRule=e=>{AtRule$4=e},Container$7.registerRoot=e=>{Root$6=e};var container=Container$7;Container$7.default=Container$7,Container$7.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,AtRule$4.prototype):"rule"===e.type?Object.setPrototypeOf(e,Rule$4.prototype):"decl"===e.type?Object.setPrototypeOf(e,Declaration$3.prototype):"comment"===e.type?Object.setPrototypeOf(e,Comment$3.prototype):"root"===e.type&&Object.setPrototypeOf(e,Root$6.prototype),e[my$1]=!0,e.nodes&&e.nodes.forEach((e=>{Container$7.rebuild(e)}))};let LazyResult$4,Processor$3,Container$6=container,Document$3=class extends Container$6{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new LazyResult$4(new Processor$3,this,e).stringify()}};Document$3.registerLazyResult=e=>{LazyResult$4=e},Document$3.registerProcessor=e=>{Processor$3=e};var document$1=Document$3;Document$3.default=Document$3;let printed={};var warnOnce$2=function(e){printed[e]||(printed[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))};let Warning$2=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning=Warning$2;Warning$2.default=Warning$2;let Warning$1=warning,Result$3=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new Warning$1(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var result=Result$3;Result$3.default=Result$3;const SINGLE_QUOTE="'".charCodeAt(0),DOUBLE_QUOTE='"'.charCodeAt(0),BACKSLASH="\\".charCodeAt(0),SLASH="/".charCodeAt(0),NEWLINE="\n".charCodeAt(0),SPACE=" ".charCodeAt(0),FEED="\f".charCodeAt(0),TAB="\t".charCodeAt(0),CR="\r".charCodeAt(0),OPEN_SQUARE="[".charCodeAt(0),CLOSE_SQUARE="]".charCodeAt(0),OPEN_PARENTHESES="(".charCodeAt(0),CLOSE_PARENTHESES=")".charCodeAt(0),OPEN_CURLY="{".charCodeAt(0),CLOSE_CURLY="}".charCodeAt(0),SEMICOLON=";".charCodeAt(0),ASTERISK="*".charCodeAt(0),COLON=":".charCodeAt(0),AT="@".charCodeAt(0),RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i;var tokenize=function(e,t={}){let s,r,n,o,i,a,l,c,u,h,p=e.css.valueOf(),d=t.ignoreErrors,m=p.length,f=0,g=[],y=[];function $(t){throw e.error("Unclosed "+t,f)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&f>=m},nextToken:function(e){if(y.length)return y.pop();if(f>=m)return;let t=!!e&&e.ignoreUnclosed;switch(s=p.charCodeAt(f),s){case NEWLINE:case SPACE:case TAB:case CR:case FEED:r=f;do{r+=1,s=p.charCodeAt(r)}while(s===SPACE||s===NEWLINE||s===TAB||s===CR||s===FEED);h=["space",p.slice(f,r)],f=r-1;break;case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let e=String.fromCharCode(s);h=[e,e,f];break}case OPEN_PARENTHESES:if(c=g.length?g.pop()[1]:"",u=p.charCodeAt(f+1),"url"===c&&u!==SINGLE_QUOTE&&u!==DOUBLE_QUOTE&&u!==SPACE&&u!==NEWLINE&&u!==TAB&&u!==FEED&&u!==CR){r=f;do{if(a=!1,r=p.indexOf(")",r+1),-1===r){if(d||t){r=f;break}$("bracket")}for(l=r;p.charCodeAt(l-1)===BACKSLASH;)l-=1,a=!a}while(a);h=["brackets",p.slice(f,r+1),f,r],f=r}else r=p.indexOf(")",f+1),o=p.slice(f,r+1),-1===r||RE_BAD_BRACKET.test(o)?h=["(","(",f]:(h=["brackets",o,f,r],f=r);break;case SINGLE_QUOTE:case DOUBLE_QUOTE:n=s===SINGLE_QUOTE?"'":'"',r=f;do{if(a=!1,r=p.indexOf(n,r+1),-1===r){if(d||t){r=f+1;break}$("string")}for(l=r;p.charCodeAt(l-1)===BACKSLASH;)l-=1,a=!a}while(a);h=["string",p.slice(f,r+1),f,r],f=r;break;case AT:RE_AT_END.lastIndex=f+1,RE_AT_END.test(p),r=0===RE_AT_END.lastIndex?p.length-1:RE_AT_END.lastIndex-2,h=["at-word",p.slice(f,r+1),f,r],f=r;break;case BACKSLASH:for(r=f,i=!0;p.charCodeAt(r+1)===BACKSLASH;)r+=1,i=!i;if(s=p.charCodeAt(r+1),i&&s!==SLASH&&s!==SPACE&&s!==NEWLINE&&s!==TAB&&s!==CR&&s!==FEED&&(r+=1,RE_HEX_ESCAPE.test(p.charAt(r)))){for(;RE_HEX_ESCAPE.test(p.charAt(r+1));)r+=1;p.charCodeAt(r+1)===SPACE&&(r+=1)}h=["word",p.slice(f,r+1),f,r],f=r;break;default:s===SLASH&&p.charCodeAt(f+1)===ASTERISK?(r=p.indexOf("*/",f+2)+1,0===r&&(d||t?r=p.length:$("comment")),h=["comment",p.slice(f,r+1),f,r],f=r):(RE_WORD_END.lastIndex=f+1,RE_WORD_END.test(p),r=0===RE_WORD_END.lastIndex?p.length-1:RE_WORD_END.lastIndex-2,h=["word",p.slice(f,r+1),f,r],g.push(h),f=r)}return f++,h},position:function(){return f}}};let Container$5=container,AtRule$3=class extends Container$5{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var atRule=AtRule$3;AtRule$3.default=AtRule$3,Container$5.registerAtRule(AtRule$3);let LazyResult$3,Processor$2,Container$4=container,Root$5=class extends Container$4{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t)if("prepend"===s)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of r)e.raws.before=t.raws.before;return r}removeChild(e,t){let s=this.index(e);return!t&&0===s&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new LazyResult$3(new Processor$2,this,e).stringify()}};Root$5.registerLazyResult=e=>{LazyResult$3=e},Root$5.registerProcessor=e=>{Processor$2=e};var root=Root$5;Root$5.default=Root$5,Container$4.registerRoot(Root$5);let list$2={comma:e=>list$2.split(e,[","],!0),space:e=>list$2.split(e,[" ","\n","\t"]),split(e,t,s){let r=[],n="",o=!1,i=0,a=!1,l="",c=!1;for(let s of e)c?c=!1:"\\"===s?c=!0:a?s===l&&(a=!1):'"'===s||"'"===s?(a=!0,l=s):"("===s?i+=1:")"===s?i>0&&(i-=1):0===i&&t.includes(s)&&(o=!0),o?(""!==n&&r.push(n.trim()),n="",o=!1):n+=s;return(s||""!==n)&&r.push(n.trim()),r}};var list_1=list$2;list$2.default=list$2;let Container$3=container,list$1=list_1,Rule$3=class extends Container$3{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}};var rule=Rule$3;Rule$3.default=Rule$3,Container$3.registerRule(Rule$3);let Declaration$2=declaration,tokenizer22=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule;const SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0};function findLastWithPosition(e){for(let t=e.length-1;t>=0;t--){let s=e[t],r=s[3]||s[2];if(r)return r}}let Parser$1=class{constructor(e){this.input=e,this.root=new Root$4,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,s,r,n=new AtRule$2;n.name=e[1].slice(1),""===n.name&&this.unnamedAtrule(n,e),this.init(n,e[2]);let o=!1,i=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){n.source.end=this.getPosition(e[2]),n.source.end.offset++,this.semicolon=!0;break}if("{"===t){i=!0;break}if("}"===t){if(a.length>0){for(r=a.length-1,s=a[r];s&&"space"===s[0];)s=a[--r];s&&(n.source.end=this.getPosition(s[3]||s[2]),n.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}n.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(n.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(n,"params",a),o&&(e=a[a.length-1],n.source.end=this.getPosition(e[3]||e[2]),n.source.end.offset++,this.spaces=n.raws.between,n.raws.between="")):(n.raws.afterName="",n.params=""),i&&(n.nodes=[],this.current=n)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let s,r=0;for(let n=t-1;n>=0&&(s=e[n],"space"===s[0]||(r+=1,2!==r));n--);throw this.input.error("Missed semicolon","word"===s[0]?s[3]+1:s[2])}colon(e){let t,s,r,n=0;for(let[o,i]of e.entries()){if(t=i,s=t[0],"("===s&&(n+=1),")"===s&&(n-=1),0===n&&":"===s){if(r){if("word"===r[0]&&"progid"===r[1])continue;return o}this.doubleColon(t)}r=t}return!1}comment(e){let t=new Comment$2;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let e=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=tokenizer22(this.input)}decl(e,t){let s=new Declaration$2;this.init(s,e[0][2]);let r,n=e[e.length-1];for(";"===n[0]&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(n[3]||n[2]||findLastWithPosition(e)),s.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;s.prop+=e.shift()[1]}for(s.raws.between="";e.length;){if(r=e.shift(),":"===r[0]){s.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),s.raws.between+=r[1]}"_"!==s.prop[0]&&"*"!==s.prop[0]||(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o,i=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)i.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(r=e[t],"!important"===r[1].toLowerCase()){s.important=!0;let r=this.stringFrom(e,t);r=this.spacesFromEnd(e)+r," !important"!==r&&(s.raws.important=r);break}if("important"===r[1].toLowerCase()){let r=e.slice(0),n="";for(let e=t;e>0;e--){let t=r[e][0];if(0===n.trim().indexOf("!")&&"space"!==t)break;n=r.pop()[1]+n}0===n.trim().indexOf("!")&&(s.important=!0,s.raws.important=n,e=r)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(s.raws.between+=i.map((e=>e[1])).join(""),i=[]),this.raw(s,"value",i.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Rule$2;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],i=e[1].startsWith("--"),a=[],l=e;for(;l;){if(s=l[0],a.push(l),"("===s||"["===s)n||(n=l),o.push("("===s?")":"]");else if(i&&r&&"{"===s)n||(n=l),o.push("}");else if(0===o.length){if(";"===s){if(r)return void this.decl(a,i);break}if("{"===s)return void this.rule(a);if("}"===s){this.tokenizer.back(a.pop()),t=!0;break}":"===s&&(r=!0)}else s===o[o.length-1]&&(o.pop(),0===o.length&&(n=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!i)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,i,a,l=s.length,c="",u=!0;for(let e=0;e<l;e+=1)n=s[e],o=n[0],"space"!==o||e!==l-1||r?"comment"===o?(a=s[e-1]?s[e-1][0]:"empty",i=s[e+1]?s[e+1][0]:"empty",SAFE_COMMENT_NEIGHBOR[a]||SAFE_COMMENT_NEIGHBOR[i]||","===c.slice(-1)?u=!1:c+=n[1]):c+=n[1]:u=!1;if(!u){let r=s.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:r,value:c}}e[t]=c}rule(e){e.pop();let t=new Rule$2;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var parser=Parser$1;let Container$2=container,Parser22=parser,Input$2=input;function parse$3(e,t){let s=new Input$2(e,t),r=new Parser22(s);try{r.parse()}catch(e){throw"production"!==process.env.NODE_ENV&&"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return r.root}var parse_1=parse$3;parse$3.default=parse$3,Container$2.registerParse(parse$3);let{isClean:isClean,my:my}=symbols,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1,warnOnce$1=warnOnce$2,Result$2=result,parse$2=parse_1,Root$3=root;const TYPE_TO_CLASS_NAME={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0;function isPromise(e){return"object"==typeof e&&"function"==typeof e.then}function getEvents(e){let t=!1,s=TYPE_TO_CLASS_NAME[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[s,s+"-"+t,0,s+"Exit",s+"Exit-"+t]:t?[s,s+"-"+t,s+"Exit",s+"Exit-"+t]:e.append?[s,0,s+"Exit"]:[s,s+"Exit"]}function toStack(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks(e){return e[isClean]=!1,e.nodes&&e.nodes.forEach((e=>cleanMarks(e))),e}let postcss$2={},LazyResult$2=class e{constructor(t,s,r){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof s||null===s||"root"!==s.type&&"document"!==s.type)if(s instanceof e||s instanceof Result$2)n=cleanMarks(s.root),s.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=s.map);else{let e=parse$2;r.syntax&&(e=r.syntax.parse),r.parser&&(e=r.parser),e.parse&&(e=e.parse);try{n=e(s,r)}catch(e){this.processed=!0,this.error=e}n&&!n[my]&&Container$1.rebuild(n)}else n=cleanMarks(s);this.result=new Result$2(t,n,r),this.helpers={...postcss$2,postcss:postcss$2,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(s.postcssVersion&&"production"!==process.env.NODE_ENV){let e=s.postcssPlugin,t=s.postcssVersion,r=this.result.processor.version,n=t.split("."),o=r.split(".");(n[0]!==o[0]||parseInt(n[1])>parseInt(o[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+r+", but "+e+" uses "+t+". Perhaps this is the source of the error below.")}}else e.plugin=s.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,s)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,s])};for(let t of this.plugins)if("object"==typeof t)for(let s in t){if(!PLUGIN_PROPS[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS[s])if("object"==typeof t[s])for(let r in t[s])e(t,"*"===r?s:s+"-"+r.toLowerCase(),t[s][r]);else"function"==typeof t[s]&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(isPromise(s))try{await s}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean];){e[isClean]=!0;let t=[toStack(e)];for(;t.length>0;){let e=this.visitTick(t);if(isPromise(e))try{await e}catch(e){let s=t[t.length-1].node;throw this.handleError(e,s)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>s(e,this.helpers)));await Promise.all(t)}else await s(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return isPromise(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=stringify$2;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let s=new MapGenerator$1(t,this.result.root,this.result.opts).generate();return this.result.css=s[0],this.result.map=s[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(isPromise(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean];)e[isClean]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this.opts||warnOnce$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){let e;this.result.lastPlugin=s;try{e=r(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(isPromise(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if("root"!==s.type&&"document"!==s.type&&!s.parent)return void e.pop();if(r.length>0&&t.visitorIndex<r.length){let[e,n]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return n(s.toProxy(),this.helpers)}catch(e){throw this.handleError(e,s)}}if(0!==t.iterator){let r,n=t.iterator;for(;r=s.nodes[s.indexes[n]];)if(s.indexes[n]+=1,!r[isClean])return r[isClean]=!0,void e.push(toStack(r));t.iterator=0,delete s.indexes[n]}let n=t.events;for(;t.eventIndex<n.length;){let e=n[t.eventIndex];if(t.eventIndex+=1,0===e)return void(s.nodes&&s.nodes.length&&(s[isClean]=!0,t.iterator=s.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[isClean]=!0;let t=getEvents(e);for(let s of t)if(0===s)e.nodes&&e.each((e=>{e[isClean]||this.walkSync(e)}));else{let t=this.listeners[s];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};LazyResult$2.registerPostcss=e=>{postcss$2=e};var lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2,Root$3.registerLazyResult(LazyResult$2),Document$2.registerLazyResult(LazyResult$2);let MapGenerator22=mapGenerator,stringify$1=stringify_1,warnOnce22=warnOnce$2,parse$1=parse_1;const Result$1=result;let NoWorkResult$1=class{constructor(e,t,s){let r;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let n=stringify$1;this.result=new Result$1(this._processor,r,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get:()=>o.root});let i=new MapGenerator22(n,r,this._opts,t);if(i.isMap()){let[e,t]=i.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else i.clearAnnotation(),this.result.css=i.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this._opts||warnOnce22("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=parse$1;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var noWorkResult=NoWorkResult$1;NoWorkResult$1.default=NoWorkResult$1;let NoWorkResult22=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1,Root$2=root,Processor$1=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(!0===s.postcss?s=s():s.postcss&&(s=s.postcss),"object"==typeof s&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if("object"==typeof s&&s.postcssPlugin)t.push(s);else if("function"==typeof s)t.push(s);else{if("object"!=typeof s||!s.parse&&!s.stringify)throw new Error(s+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new LazyResult$1(this,e,t):new NoWorkResult22(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var processor=Processor$1;Processor$1.default=Processor$1,Root$2.registerProcessor(Processor$1),Document$1.registerProcessor(Processor$1);let Declaration$1=declaration,PreviousMap22=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule;function fromJSON$1(e,t){if(Array.isArray(e))return e.map((e=>fromJSON$1(e)));let{inputs:s,...r}=e;if(s){t=[];for(let e of s){let s={...e,__proto__:Input$1.prototype};s.map&&(s.map={...s.map,__proto__:PreviousMap22.prototype}),t.push(s)}}if(r.nodes&&(r.nodes=e.nodes.map((e=>fromJSON$1(e,t)))),r.source){let{inputId:e,...s}=r.source;r.source=s,null!=e&&(r.source.input=t[e])}if("root"===r.type)return new Root$1(r);if("decl"===r.type)return new Declaration$1(r);if("rule"===r.type)return new Rule$1(r);if("comment"===r.type)return new Comment$1(r);if("atrule"===r.type)return new AtRule$1(r);throw new Error("Unknown node type: "+e.type)}var fromJSON_1=fromJSON$1;fromJSON$1.default=fromJSON$1;let CssSyntaxError22=cssSyntaxError,Declaration22=declaration,LazyResult22=lazyResult,Container22=container,Processor22=processor,stringify=stringify_1,fromJSON=fromJSON_1,Document222=document$1,Warning22=warning,Comment22=comment,AtRule22=atRule,Result22=result,Input22=input,parse=parse_1,list=list_1,Rule22=rule,Root22=root,Node22=node;function postcss(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Processor22(e)}postcss.plugin=function(e,t){let s,r=!1;function n(...s){console&&console.warn&&!r&&(r=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let n=t(...s);return n.postcssPlugin=e,n.postcssVersion=(new Processor22).version,n}return Object.defineProperty(n,"postcss",{get:()=>(s||(s=n()),s)}),n.process=function(e,t,s){return postcss([n(s)]).process(e,t)},n},postcss.stringify=stringify,postcss.parse=parse,postcss.fromJSON=fromJSON,postcss.list=list,postcss.comment=e=>new Comment22(e),postcss.atRule=e=>new AtRule22(e),postcss.decl=e=>new Declaration22(e),postcss.rule=e=>new Rule22(e),postcss.root=e=>new Root22(e),postcss.document=e=>new Document222(e),postcss.CssSyntaxError=CssSyntaxError22,postcss.Declaration=Declaration22,postcss.Container=Container22,postcss.Processor=Processor22,postcss.Document=Document222,postcss.Comment=Comment22,postcss.Warning=Warning22,postcss.AtRule=AtRule22,postcss.Result=Result22,postcss.Input=Input22,postcss.Rule=Rule22,postcss.Root=Root22,postcss.Node=Node22,LazyResult22.registerPostcss(postcss);var postcss_1=postcss;postcss.default=postcss;const postcss$1=getDefaultExportFromCjs(postcss_1);postcss$1.stringify,postcss$1.fromJSON,postcss$1.plugin,postcss$1.parse,postcss$1.list,postcss$1.document,postcss$1.comment,postcss$1.atRule,postcss$1.rule,postcss$1.decl,postcss$1.root,postcss$1.CssSyntaxError,postcss$1.Declaration,postcss$1.Container,postcss$1.Processor,postcss$1.Document,postcss$1.Comment,postcss$1.Warning,postcss$1.AtRule,postcss$1.Result,postcss$1.Input,postcss$1.Rule,postcss$1.Root,postcss$1.Node;var NodeType$1=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(NodeType$1||{});function parseCSSText(e){const t={},s=/:(.+)/;return e.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach((function(e){if(e){const r=e.split(s);r.length>1&&(t[camelize(r[0].trim())]=r[1].trim())}})),t}function toCSSText(e){const t=[];for(const s in e){const r=e[s];if("string"!=typeof r)continue;const n=hyphenate(s);t.push(`${n}: ${r};`)}return t.join(" ")}const camelizeRE=/-([a-z])/g,CUSTOM_PROPERTY_REGEX=/^--[a-zA-Z0-9-]+$/,camelize=e=>CUSTOM_PROPERTY_REGEX.test(e)?e:e.replace(camelizeRE,((e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=e=>e.replace(hyphenateRE,"-$1").toLowerCase();class BaseRRNode{constructor(...e){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof BaseRRNode))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}class BaseRRDocument extends BaseRRNode{constructor(...e){super(e),__publicField22(this,"nodeType",9),__publicField22(this,"nodeName","#document"),__publicField22(this,"compatMode","CSS1Compat"),__publicField22(this,"RRNodeType",NodeType$1.Document),__publicField22(this,"textContent",null),this.ownerDocument=this}get documentElement(){return this.childNodes.find((e=>e.RRNodeType===NodeType$1.Element&&"HTML"===e.tagName))||null}get body(){var e;return(null==(e=this.documentElement)?void 0:e.childNodes.find((e=>e.RRNodeType===NodeType$1.Element&&"BODY"===e.tagName)))||null}get head(){var e;return(null==(e=this.documentElement)?void 0:e.childNodes.find((e=>e.RRNodeType===NodeType$1.Element&&"HEAD"===e.tagName)))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===NodeType$1.Element||t===NodeType$1.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===t)))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===NodeType$1.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const s=appendChild(this,e);return s.parentElement=null,s}insertBefore(e,t){const s=e.RRNodeType;if((s===NodeType$1.Element||s===NodeType$1.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===s)))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${s===NodeType$1.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const r=insertBefore(this,e,t);return r.parentElement=null,r}removeChild(e){return removeChild(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===e?t="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===e&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const e=this.createDocumentType("html",t,"");this.open(),this.appendChild(e)}}createDocument(e,t,s){return new BaseRRDocument}createDocumentType(e,t,s){const r=new BaseRRDocumentType(e,t,s);return r.ownerDocument=this,r}createElement(e){const t=new BaseRRElement(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new BaseRRText(e);return t.ownerDocument=this,t}createComment(e){const t=new BaseRRComment(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new BaseRRCDATASection(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}class BaseRRDocumentType extends BaseRRNode{constructor(e,t,s){super(),__publicField22(this,"nodeType",10),__publicField22(this,"RRNodeType",NodeType$1.DocumentType),__publicField22(this,"name"),__publicField22(this,"publicId"),__publicField22(this,"systemId"),__publicField22(this,"textContent",null),this.name=e,this.publicId=t,this.systemId=s,this.nodeName=e}toString(){return"RRDocumentType"}}class BaseRRElement extends BaseRRNode{constructor(e){super(),__publicField22(this,"nodeType",1),__publicField22(this,"RRNodeType",NodeType$1.Element),__publicField22(this,"tagName"),__publicField22(this,"attributes",{}),__publicField22(this,"shadowRoot",null),__publicField22(this,"scrollLeft"),__publicField22(this,"scrollTop"),this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach((t=>e+=t.textContent)),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new ClassList(this.attributes.class,(e=>{this.attributes.class=e}))}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?parseCSSText(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(s,r,n)=>{if(t.test(s))return;const o=camelize(s);r?e[o]=r:delete e[o],"important"===n&&(e[o]+=" !important"),this.attributes.style=toCSSText(e)},e.removeProperty=s=>{if(t.test(s))return"";const r=camelize(s),n=e[r]||"";return delete e[r],this.attributes.style=toCSSText(e),n},e}getAttribute(e){return void 0===this.attributes[e]?null:this.attributes[e]}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,s){this.setAttribute(t,s)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return appendChild(this,e)}insertBefore(e,t){return insertBefore(this,e,t)}removeChild(e){return removeChild(this,e)}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}class BaseRRMediaElement extends BaseRRElement{constructor(){super(...arguments),__publicField22(this,"currentTime"),__publicField22(this,"volume"),__publicField22(this,"paused"),__publicField22(this,"muted"),__publicField22(this,"playbackRate"),__publicField22(this,"loop")}attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}class BaseRRDialogElement extends BaseRRElement{constructor(){super(...arguments),__publicField22(this,"tagName","DIALOG"),__publicField22(this,"nodeName","DIALOG")}get isModal(){return"modal"===this.getAttribute("rr_open_mode")}get open(){return null!==this.getAttribute("open")}close(){this.removeAttribute("open"),this.removeAttribute("rr_open_mode")}show(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","non-modal")}showModal(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","modal")}}class BaseRRText extends BaseRRNode{constructor(e){super(),__publicField22(this,"nodeType",3),__publicField22(this,"nodeName","#text"),__publicField22(this,"RRNodeType",NodeType$1.Text),__publicField22(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}class BaseRRComment extends BaseRRNode{constructor(e){super(),__publicField22(this,"nodeType",8),__publicField22(this,"nodeName","#comment"),__publicField22(this,"RRNodeType",NodeType$1.Comment),__publicField22(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}class BaseRRCDATASection extends BaseRRNode{constructor(e){super(),__publicField22(this,"nodeName","#cdata-section"),__publicField22(this,"nodeType",4),__publicField22(this,"RRNodeType",NodeType$1.CDATA),__publicField22(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}class ClassList{constructor(e,t){if(__publicField22(this,"onChange"),__publicField22(this,"classes",[]),__publicField22(this,"add",((...e)=>{for(const t of e){const e=String(t);this.classes.indexOf(e)>=0||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))})),__publicField22(this,"remove",((...e)=>{this.classes=this.classes.filter((t=>-1===e.indexOf(t))),this.onChange&&this.onChange(this.classes.join(" "))})),e){const t=e.trim().split(/\s+/);this.classes.push(...t)}this.onChange=t}}function appendChild(e,t){return t.parentNode&&t.parentNode.removeChild(t),e.lastChild?(e.lastChild.nextSibling=t,t.previousSibling=e.lastChild):(e.firstChild=t,t.previousSibling=null),e.lastChild=t,t.nextSibling=null,t.parentNode=e,t.parentElement=e,t.ownerDocument=e.ownerDocument,t}function insertBefore(e,t,s){if(!s)return appendChild(e,t);if(s.parentNode!==e)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return t===s||(t.parentNode&&t.parentNode.removeChild(t),t.previousSibling=s.previousSibling,s.previousSibling=t,t.nextSibling=s,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,t.parentElement=e,t.parentNode=e,t.ownerDocument=e.ownerDocument),t}function removeChild(e,t){if(t.parentNode!==e)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return t.previousSibling?t.previousSibling.nextSibling=t.nextSibling:e.firstChild=t.nextSibling,t.nextSibling?t.nextSibling.previousSibling=t.previousSibling:e.lastChild=t.previousSibling,t.previousSibling=null,t.nextSibling=null,t.parentElement=null,t.parentNode=null,t}var NodeType$2=(e=>(e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",e))(NodeType$2||{});const NAMESPACES={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},SVGTagMap={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let createdNodeSet=null;function diff(e,t,s,r=t.mirror||t.ownerDocument.mirror){diffChildren(e=diffBeforeUpdatingChildren(e,t,s,r),t,s,r),diffAfterUpdatingChildren(e,t,s)}function diffBeforeUpdatingChildren(e,t,s,r){var n;if(s.afterAppend&&!createdNodeSet&&(createdNodeSet=new WeakSet,setTimeout((()=>{createdNodeSet=null}),0)),!sameNodeType(e,t)){const o=createOrGetNode(t,s.mirror,r);null==(n=e.parentNode)||n.replaceChild(o,e),e=o}switch(t.RRNodeType){case NodeType$1.Document:if(!nodeMatching(e,t,s.mirror,r)){const n=r.getMeta(t);n&&(s.mirror.removeNodeFromMap(e),e.close(),e.open(),s.mirror.add(e,n),null==createdNodeSet||createdNodeSet.add(e))}break;case NodeType$1.Element:{const n=e,o=t;switch(o.tagName){case"IFRAME":{const n=e.contentDocument;if(!n)break;diff(n,t.contentDocument,s,r);break}}o.shadowRoot&&(n.shadowRoot||n.attachShadow({mode:"open"}),diffChildren(n.shadowRoot,o.shadowRoot,s,r)),diffProps(n,o,r);break}}return e}function diffAfterUpdatingChildren(e,t,s){var r;switch(t.RRNodeType){case NodeType$1.Document:{const e=t.scrollData;e&&s.applyScroll(e,!0);break}case NodeType$1.Element:{const r=e,n=t;switch(n.scrollData&&s.applyScroll(n.scrollData,!0),n.inputData&&s.applyInput(n.inputData),n.tagName){case"AUDIO":case"VIDEO":{const t=e,s=n;void 0!==s.paused&&(s.paused?t.pause():t.play()),void 0!==s.muted&&(t.muted=s.muted),void 0!==s.volume&&(t.volume=s.volume),void 0!==s.currentTime&&(t.currentTime=s.currentTime),void 0!==s.playbackRate&&(t.playbackRate=s.playbackRate),void 0!==s.loop&&(t.loop=s.loop);break}case"CANVAS":{const n=t;if(null!==n.rr_dataURL){const e=document.createElement("img");e.onload=()=>{const t=r.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=n.rr_dataURL}n.canvasMutations.forEach((t=>s.applyCanvas(t.event,t.mutation,e)));break}case"STYLE":{const e=r.sheet;e&&t.rules.forEach((t=>s.applyStyleSheetMutation(t,e)));break}case"DIALOG":{const e=r,t=n,s=e.open,o=e.matches("dialog:modal"),i=t.open,a=t.isModal,l=o!==a,c=s!==i;if((l||s&&c)&&e.close(),i&&(c||l))try{a?e.showModal():e.show()}catch(e){console.warn(e)}break}}break}case NodeType$1.Text:case NodeType$1.Comment:case NodeType$1.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}(null==createdNodeSet?void 0:createdNodeSet.has(e))&&(createdNodeSet.delete(e),null==(r=s.afterAppend)||r.call(s,e,s.mirror.getId(e)))}function diffProps(e,t,s){const r=e.attributes,n=t.attributes;for(const r in n){const o=n[r],i=s.getMeta(t);if((null==i?void 0:i.isSVG)&&NAMESPACES[r])e.setAttributeNS(NAMESPACES[r],r,o);else if("CANVAS"===t.tagName&&"rr_dataURL"===r){const t=document.createElement("img");t.src=o,t.onload=()=>{const s=e.getContext("2d");s&&s.drawImage(t,0,0,t.width,t.height)}}else{if("IFRAME"===t.tagName&&"srcdoc"===r)continue;try{e.setAttribute(r,o)}catch(e){console.warn(e)}}}for(const{name:t}of Array.from(r))t in n||e.removeAttribute(t);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}function diffChildren(e,t,s,r){const n=Array.from(e.childNodes),o=t.childNodes;if(0===n.length&&0===o.length)return;let i,a,l=0,c=n.length-1,u=0,h=o.length-1,p=n[l],d=n[c],m=o[u],f=o[h];for(;l<=c&&u<=h;)if(void 0===p)p=n[++l];else if(void 0===d)d=n[--c];else if(nodeMatching(p,m,s.mirror,r))p=n[++l],m=o[++u];else if(nodeMatching(d,f,s.mirror,r))d=n[--c],f=o[--h];else if(nodeMatching(p,f,s.mirror,r)){try{e.insertBefore(p,d.nextSibling)}catch(e){console.warn(e)}p=n[++l],f=o[--h]}else if(nodeMatching(d,m,s.mirror,r)){try{e.insertBefore(d,p)}catch(e){console.warn(e)}d=n[--c],m=o[++u]}else{if(!i){i={};for(let e=l;e<=c;e++){const t=n[e];t&&s.mirror.hasNode(t)&&(i[s.mirror.getId(t)]=e)}}a=i[r.getId(m)];const t=n[a];if(void 0!==a&&t&&nodeMatching(t,m,s.mirror,r)){try{e.insertBefore(t,p)}catch(e){console.warn(e)}n[a]=void 0}else{const t=createOrGetNode(m,s.mirror,r);"#document"===e.nodeName&&p&&(t.nodeType===t.DOCUMENT_TYPE_NODE&&p.nodeType===p.DOCUMENT_TYPE_NODE||t.nodeType===t.ELEMENT_NODE&&p.nodeType===p.ELEMENT_NODE)&&(e.removeChild(p),s.mirror.removeNodeFromMap(p),p=n[++l]);try{e.insertBefore(t,p||null)}catch(e){console.warn(e)}}m=o[++u]}if(l>c){const t=o[h+1];let n=null;for(t&&(n=s.mirror.getNode(r.getId(t)));u<=h;++u){const t=createOrGetNode(o[u],s.mirror,r);try{e.insertBefore(t,n)}catch(e){console.warn(e)}}}else if(u>h)for(;l<=c;l++){const t=n[l];if(t&&t.parentNode===e)try{e.removeChild(t),s.mirror.removeNodeFromMap(t)}catch(e){console.warn(e)}}let g=e.firstChild,y=t.firstChild;for(;null!==g&&null!==y;)diff(g,y,s,r),g=g.nextSibling,y=y.nextSibling}function createOrGetNode(e,t,s){const r=s.getId(e),n=s.getMeta(e);let o=null;if(r>-1&&(o=t.getNode(r)),null!==o&&sameNodeType(o,e))return o;switch(e.RRNodeType){case NodeType$1.Document:o=new Document;break;case NodeType$1.DocumentType:o=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case NodeType$1.Element:{let t=e.tagName.toLowerCase();t=SVGTagMap[t]||t,o=n&&"isSVG"in n&&(null==n?void 0:n.isSVG)?document.createElementNS(NAMESPACES.svg,t):document.createElement(e.tagName);break}case NodeType$1.Text:o=document.createTextNode(e.data);break;case NodeType$1.Comment:o=document.createComment(e.data);break;case NodeType$1.CDATA:o=document.createCDATASection(e.data)}n&&t.add(o,{...n});try{null==createdNodeSet||createdNodeSet.add(o)}catch(e){}return o}function sameNodeType(e,t){return e.nodeType===t.nodeType&&(e.nodeType!==e.ELEMENT_NODE||e.tagName.toUpperCase()===t.tagName)}function nodeMatching(e,t,s,r){const n=s.getId(e),o=r.getId(t);return-1!==n&&n===o&&sameNodeType(e,t)}class RRDocument extends BaseRRDocument{constructor(e){super(),__publicField22(this,"UNSERIALIZED_STARTING_ID",-2),__publicField22(this,"_unserializedId",this.UNSERIALIZED_STARTING_ID),__publicField22(this,"mirror",createMirror()),__publicField22(this,"scrollData",null),e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,s){return new RRDocument}createDocumentType(e,t,s){const r=new RRDocumentType(e,t,s);return r.ownerDocument=this,r}createElement(e){const t=e.toUpperCase();let s;switch(t){case"AUDIO":case"VIDEO":s=new RRMediaElement(t);break;case"IFRAME":s=new RRIFrameElement(t,this.mirror);break;case"CANVAS":s=new RRCanvasElement(t);break;case"STYLE":s=new RRStyleElement(t);break;case"DIALOG":s=new RRDialogElement(t);break;default:s=new RRElement(t)}return s.ownerDocument=this,s}createComment(e){const t=new RRComment(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new RRCDATASection(e);return t.ownerDocument=this,t}createTextNode(e){const t=new RRText(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const RRDocumentType=BaseRRDocumentType;class RRElement extends BaseRRElement{constructor(){super(...arguments),__publicField22(this,"inputData",null),__publicField22(this,"scrollData",null)}}class RRMediaElement extends BaseRRMediaElement{}class RRDialogElement extends BaseRRDialogElement{}class RRCanvasElement extends RRElement{constructor(){super(...arguments),__publicField22(this,"rr_dataURL",null),__publicField22(this,"canvasMutations",[])}getContext(){return null}}class RRStyleElement extends RRElement{constructor(){super(...arguments),__publicField22(this,"rules",[])}}class RRIFrameElement extends RRElement{constructor(e,t){super(e),__publicField22(this,"contentDocument",new RRDocument),this.contentDocument.mirror=t}}const RRText=BaseRRText,RRComment=BaseRRComment,RRCDATASection=BaseRRCDATASection;function getValidTagName(e){return e instanceof HTMLFormElement?"FORM":e.tagName.toUpperCase()}function buildFromNode(e,t,s,r){let n;switch(e.nodeType){case NodeType$2.DOCUMENT_NODE:r&&"IFRAME"===r.nodeName?n=r.contentDocument:(n=t,n.compatMode=e.compatMode);break;case NodeType$2.DOCUMENT_TYPE_NODE:{const s=e;n=t.createDocumentType(s.name,s.publicId,s.systemId);break}case NodeType$2.ELEMENT_NODE:{const s=e,r=getValidTagName(s);n=t.createElement(r);const o=n;for(const{name:e,value:t}of Array.from(s.attributes))o.attributes[e]=t;s.scrollLeft&&(o.scrollLeft=s.scrollLeft),s.scrollTop&&(o.scrollTop=s.scrollTop);break}case NodeType$2.TEXT_NODE:n=t.createTextNode(e.textContent||"");break;case NodeType$2.CDATA_SECTION_NODE:n=t.createCDATASection(e.data);break;case NodeType$2.COMMENT_NODE:n=t.createComment(e.textContent||"");break;case NodeType$2.DOCUMENT_FRAGMENT_NODE:n=r.attachShadow({mode:"open"});break;default:return null}let o=s.getMeta(e);return t instanceof RRDocument&&(o||(o=getDefaultSN(n,t.unserializedId),s.add(e,o)),t.mirror.add(n,{...o})),n}function buildFromDom(e,t=createMirror$1(),s=new RRDocument){return function e(r,n){const o=buildFromNode(r,s,t,n);if(null!==o)if("IFRAME"!==(null==n?void 0:n.nodeName)&&r.nodeType!==NodeType$2.DOCUMENT_FRAGMENT_NODE&&(null==n||n.appendChild(o),o.parentNode=n,o.parentElement=n),"IFRAME"===r.nodeName){const t=r.contentDocument;t&&e(t,o)}else r.nodeType!==NodeType$2.DOCUMENT_NODE&&r.nodeType!==NodeType$2.ELEMENT_NODE&&r.nodeType!==NodeType$2.DOCUMENT_FRAGMENT_NODE||(r.nodeType===NodeType$2.ELEMENT_NODE&&r.shadowRoot&&e(r.shadowRoot,o),r.childNodes.forEach((t=>e(t,o))))}(e,null),s}function createMirror(){return new Mirror22}class Mirror22{constructor(){__publicField22(this,"idNodeMap",new Map),__publicField22(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const e=this.nodeMetaMap.get(s);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function getDefaultSN(e,t){switch(e.RRNodeType){case NodeType$1.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case NodeType$1.DocumentType:{const s=e;return{id:t,type:e.RRNodeType,name:s.name,publicId:s.publicId,systemId:s.systemId}}case NodeType$1.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case NodeType$1.Text:case NodeType$1.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case NodeType$1.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}const testableAccessors={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype={},isAngularZonePresent=()=>!!globalThis.Zone;function getUntaintedPrototype(e){if(untaintedBasePrototype[e])return untaintedBasePrototype[e];const t=globalThis[e],s=t.prototype,r=e in testableAccessors?testableAccessors[e]:void 0,n=Boolean(r&&r.every((e=>{var t,r;return Boolean(null==(r=null==(t=Object.getOwnPropertyDescriptor(s,e))?void 0:t.get)?void 0:r.toString().includes("[native code]"))}))),o=e in testableMethods?testableMethods[e]:void 0,i=Boolean(o&&o.every((e=>{var t;return"function"==typeof s[e]&&(null==(t=s[e])?void 0:t.toString().includes("[native code]"))})));if(n&&i&&!isAngularZonePresent())return untaintedBasePrototype[e]=t.prototype,t.prototype;try{const r=document.createElement("iframe");document.body.appendChild(r);const n=r.contentWindow;if(!n)return t.prototype;const o=n[e].prototype;return document.body.removeChild(r),o?untaintedBasePrototype[e]=o:s}catch{return s}}const untaintedAccessorCache={};function getUntaintedAccessor(e,t,s){var r;const n=`${e}.${String(s)}`;if(untaintedAccessorCache[n])return untaintedAccessorCache[n].call(t);const o=getUntaintedPrototype(e),i=null==(r=Object.getOwnPropertyDescriptor(o,s))?void 0:r.get;return i?(untaintedAccessorCache[n]=i,i.call(t)):t[s]}const untaintedMethodCache={};function getUntaintedMethod(e,t,s){const r=`${e}.${String(s)}`;if(untaintedMethodCache[r])return untaintedMethodCache[r].bind(t);const n=getUntaintedPrototype(e)[s];return"function"!=typeof n?t[s]:(untaintedMethodCache[r]=n,n.bind(t))}function childNodes(e){return getUntaintedAccessor("Node",e,"childNodes")}function parentNode(e){return getUntaintedAccessor("Node",e,"parentNode")}function parentElement(e){return getUntaintedAccessor("Node",e,"parentElement")}function textContent(e){return getUntaintedAccessor("Node",e,"textContent")}function contains(e,t){return getUntaintedMethod("Node",e,"contains")(t)}function getRootNode(e){return getUntaintedMethod("Node",e,"getRootNode")()}function host(e){return e&&"host"in e?getUntaintedAccessor("ShadowRoot",e,"host"):null}function styleSheets(e){return e.styleSheets}function shadowRoot(e){return e&&"shadowRoot"in e?getUntaintedAccessor("Element",e,"shadowRoot"):null}function querySelector(e,t){return getUntaintedAccessor("Element",e,"querySelector")(t)}function querySelectorAll(e,t){return getUntaintedAccessor("Element",e,"querySelectorAll")(t)}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}const index={childNodes:childNodes,parentNode:parentNode,parentElement:parentElement,textContent:textContent,contains:contains,getRootNode:getRootNode,host:host,styleSheets:styleSheets,shadowRoot:shadowRoot,querySelector:querySelector,querySelectorAll:querySelectorAll,mutationObserver:mutationObserverCtor},DEPARTED_MIRROR_ACCESS_WARNING="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let _mirror={map:{},getId:()=>(console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1),getNode:()=>(console.error(DEPARTED_MIRROR_ACCESS_WARNING),null),removeNodeFromMap(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has:()=>(console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1),reset(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}};function polyfill$1(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function queueToResolveTrees(e){const t={},s=(e,s)=>{const r={value:e,parent:s,children:[]};return t[e.node.id]=r,r},r=[];for(const n of e){const{nextId:e,parentId:o}=n;if(e&&e in t){const o=t[e];if(o.parent){const e=o.parent.children.indexOf(o);o.parent.children.splice(e,0,s(n,o.parent))}else{const e=r.indexOf(o);r.splice(e,0,s(n,null))}}else if(o in t){const e=t[o];e.children.push(s(n,e))}else r.push(s(n,null))}return r}function iterateResolveTree(e,t){t(e.value);for(let s=e.children.length-1;s>=0;s--)iterateResolveTree(e.children[s],t)}function isSerializedIframe(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function getBaseDimension(e,t){var s,r;const n=null==(r=null==(s=e.ownerDocument)?void 0:s.defaultView)?void 0:r.frameElement;if(!n||n===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const o=n.getBoundingClientRect(),i=getBaseDimension(n,t),a=o.height/n.clientHeight;return{x:o.x*i.relativeScale+i.x,y:o.y*i.relativeScale+i.y,relativeScale:a,absoluteScale:i.absoluteScale*a}}function hasShadowRoot(e){return!!e&&(e instanceof BaseRRNode&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(index.shadowRoot(e)))}function getNestedRule(e,t){const s=e[t[0]];return 1===t.length?s:getNestedRule(s.cssRules[t[1]].cssRules,t.slice(2))}function getPositionsAndIndex(e){const t=[...e],s=t.pop();return{positions:t,index:s}}function uniqueTextMutations(e){const t=new Set,s=[];for(let r=e.length;r--;){const n=e[r];t.has(n.id)||(s.push(n),t.add(n.id))}return s}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get:(e,t,s)=>("map"===t&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(e,t,s))})),Date.now().toString();class StyleSheetMirror{constructor(){__publicField2(this,"id",1),__publicField2(this,"styleIDMap",new WeakMap),__publicField2(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let s;return s=void 0===t?this.id++:t,this.styleIDMap.set(e,s),this.idStyleMap.set(s,e),s}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}for(var EventType$1=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(EventType$1||{}),IncrementalSource$1=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(IncrementalSource$1||{}),MouseInteractions=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(MouseInteractions||{}),CanvasContext=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(CanvasContext||{}),MediaInteractions=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(MediaInteractions||{}),ReplayerEvents=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(ReplayerEvents||{}),NodeType=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(NodeType||{}),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i$1=0;i$1<chars.length;i$1++)lookup[chars.charCodeAt(i$1)]=i$1;var decode=function(e){var t,s,r,n,o,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c=new ArrayBuffer(i),u=new Uint8Array(c);for(t=0;t<a;t+=4)s=lookup[e.charCodeAt(t)],r=lookup[e.charCodeAt(t+1)],n=lookup[e.charCodeAt(t+2)],o=lookup[e.charCodeAt(t+3)],u[l++]=s<<2|r>>4,u[l++]=(15&r)<<4|n>>2,u[l++]=(3&n)<<6|63&o;return c};const encodedJs="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",decodeBase64=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0)));"undefined"!=typeof window&&window.Blob&&new Blob([decodeBase64(encodedJs)],{type:"text/javascript;charset=utf-8"});try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(_a$1=e.contentWindow)?void 0:_a$1.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}function mitt$1(e){return{all:e=e||new Map,on:function(t,s){var r=e.get(t);r?r.push(s):e.set(t,[s])},off:function(t,s){var r=e.get(t);r&&(s?r.splice(r.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var r=e.get(t);r&&r.slice().map((function(e){e(s)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,s)}))}}}createMirror$2();const mittProxy=Object.freeze(Object.defineProperty({__proto__:null,default:mitt$1},Symbol.toStringTag,{value:"Module"}));function polyfill(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)return;const s=e.HTMLElement||e.Element,r={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:s.prototype.scroll||a,scrollIntoView:s.prototype.scrollIntoView},n=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;const o=(i=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);var i;function a(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function u(t,s){const r=e.getComputedStyle(t,null)["overflow"+s];return"auto"===r||"scroll"===r}function h(e){const t=c(e,"Y")&&u(e,"Y"),s=c(e,"X")&&u(e,"X");return t||s}function p(t){let s,r,o,i=(n()-t.startTime)/468;var a;i=i>1?1:i,a=i,s=.5*(1-Math.cos(Math.PI*a)),r=t.startX+(t.x-t.startX)*s,o=t.startY+(t.y-t.startY)*s,t.method.call(t.scrollable,r,o),r===t.x&&o===t.y||e.requestAnimationFrame(p.bind(e,t))}function d(s,o,i){let l,c,u,h;const d=n();s===t.body?(l=e,c=e.scrollX||e.pageXOffset,u=e.scrollY||e.pageYOffset,h=r.scroll):(l=s,c=s.scrollLeft,u=s.scrollTop,h=a),p({scrollable:l,method:h,startTime:d,startX:c,startY:u,x:o,y:i})}e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?d.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):r.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?r.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):d.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},s.prototype.scroll=s.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===l(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const e=arguments[0].left,t=arguments[0].top;d.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)},s.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},s.prototype.scrollIntoView=function(){if(!0===l(arguments[0]))return void r.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const s=function(e){for(;e!==t.body&&!1===h(e);)e=e.parentNode||e.host;return e}(this),n=s.getBoundingClientRect(),o=this.getBoundingClientRect();s!==t.body?(d.call(this,s,s.scrollLeft+o.left-n.left,s.scrollTop+o.top-n.top),"fixed"!==e.getComputedStyle(s).position&&e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}}class Timer{constructor(e=[],t){__publicField2(this,"timeOffset",0),__publicField2(this,"speed"),__publicField2(this,"actions"),__publicField2(this,"raf",null),__publicField2(this,"lastTimestamp"),this.actions=e,this.speed=t.speed}addAction(e){const t=!0===this.raf;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const t=this.findActionIndex(e);this.actions.splice(t,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(!0!==this.raf&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return null!==this.raf}findActionIndex(e){let t=0,s=this.actions.length-1;for(;t<=s;){const r=Math.floor((t+s)/2);if(this.actions[r].delay<e.delay)t=r+1;else{if(!(this.actions[r].delay>e.delay))return r+1;s=r-1}}return t}}function addDelay(e,t){if(e.type===EventType$1.IncrementalSnapshot&&e.data.source===IncrementalSource$1.MouseMove&&e.data.positions&&e.data.positions.length){const s=e.data.positions[0].timeOffset,r=e.timestamp+s;return e.delay=r-t,r-t}return e.delay=e.timestamp-t,e.delay}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function t(e,t){var s="function"==typeof Symbol&&e[Symbol.iterator];if(!s)return e;var r,n,o=s.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}return i}var n;!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(n||(n={}));var e={type:"xstate.init"};function r(e){return void 0===e?[]:[].concat(e)}function o(e){return{type:"xstate.assign",assignment:e}}function i$2(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function a(e){return function(t){return e===t}}function u(e){return"string"==typeof e?{type:e}:e}function c(e,t){return{value:e,context:t,actions:[],changed:!1,matches:a(e)}}function f(e,t,s){var r=t,n=!1;return[e.filter((function(e){if("xstate.assign"===e.type){n=!0;var t=Object.assign({},r);return"function"==typeof e.assignment?t=e.assignment(r,s):Object.keys(e.assignment).forEach((function(n){t[n]="function"==typeof e.assignment[n]?e.assignment[n](r,s):e.assignment[n]})),r=t,!1}return!0})),r,n]}function s(s,n){void 0===n&&(n={});var o=t(f(r(s.states[s.initial].entry).map((function(e){return i$2(e,n.actions)})),s.context,e),2),i=o[0],l=o[1],h={config:s,_options:n,initialState:{value:s.initial,actions:i,context:l,matches:a(s.initial)},transition:function(e,n){var o,i,l="string"==typeof e?{value:e,context:s.context}:e,p=l.value,d=l.context,m=u(n),g=s.states[p];if(g.on){var y=r(g.on[m.type]);try{for(var $=function(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],r=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(y),v=$.next();!v.done;v=$.next()){var w=v.value;if(void 0===w)return c(p,d);var b="string"==typeof w?{target:w}:w,C=b.target,S=b.actions,E=void 0===S?[]:S,_=b.cond,R=void 0===_?function(){return!0}:_,N=void 0===C,x=null!=C?C:p,A=s.states[x];if(R(d,m)){var T=t(f((N?r(E):[].concat(g.exit,E,A.entry).filter((function(e){return e}))).map((function(e){return i$2(e,h._options.actions)})),d,m),3),M=T[0],I=T[1],D=T[2],k=null!=C?C:p;return{value:k,context:I,actions:M,changed:C!==p||M.length>0||D,matches:a(k)}}}}catch(e){o={error:e}}finally{try{v&&!v.done&&(i=$.return)&&i.call($)}finally{if(o)throw o.error}}}return c(p,d)}};return h}var l=function(e,t){return e.actions.forEach((function(s){var r=s.exec;return r&&r(e.context,t)}))};function v(t){var s=t.initialState,r=n.NotStarted,o=new Set,i={_machine:t,send:function(e){r===n.Running&&(s=t.transition(s,e),l(s,u(e)),o.forEach((function(e){return e(s)})))},subscribe:function(e){return o.add(e),e(s),{unsubscribe:function(){return o.delete(e)}}},start:function(o){if(o){var c="object"==typeof o?o:{context:t.config.context,value:o};s={value:c.value,actions:[],context:c.context,matches:a(c.value)}}return r=n.Running,l(s,e),i},stop:function(){return r=n.Stopped,o.clear(),i},get state(){return s},get status(){return r}};return i}function discardPriorSnapshots(e,t){for(let s=e.length-1;s>=0;s--){const r=e[s];if(r.type===EventType$1.Meta&&r.timestamp<=t)return e.slice(s)}return e}function createPlayerService(e,{getCastFn:t,applyEventsSynchronously:r,emitter:n}){return v(s({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:o({lastPlayedEvent:(e,t)=>"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}),recordTimeOffset:o(((e,t)=>{let s=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(s=t.payload.timeOffset),{...e,timeOffset:s,baselineTime:e.events[0].timestamp+s}})),play(e){var s;const{timer:o,events:i,baselineTime:a,lastPlayedEvent:l}=e;o.clear();for(const e of i)addDelay(e,a);const c=discardPriorSnapshots(i,a);let u=null==l?void 0:l.timestamp;(null==l?void 0:l.type)===EventType$1.IncrementalSnapshot&&l.data.source===IncrementalSource$1.MouseMove&&(u=l.timestamp+(null==(s=l.data.positions[0])?void 0:s.timeOffset)),a<(u||0)&&n.emit(ReplayerEvents.PlayBack);const h=new Array;for(const e of c)if(!(u&&u<a&&(e.timestamp<=u||e===l)))if(e.timestamp<a)h.push(e);else{const s=t(e,!1);o.addAction({doAction:()=>{s()},delay:e.delay})}r(h),n.emit(ReplayerEvents.Flush),o.start()},pause(e){e.timer.clear()},resetLastPlayedEvent:o((e=>({...e,lastPlayedEvent:null}))),startLive:o({baselineTime:(e,t)=>(e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now())}),addEvent:o(((e,s)=>{const{baselineTime:r,timer:n,events:o}=e;if("ADD_EVENT"===s.type){const{event:e}=s.payload;addDelay(e,r);let i=o.length-1;if(!o[i]||o[i].timestamp<=e.timestamp)o.push(e);else{let t=-1,s=0;for(;s<=i;){const t=Math.floor((s+i)/2);o[t].timestamp<=e.timestamp?s=t+1:i=t-1}-1===t&&(t=s),o.splice(t,0,e)}const a=e.timestamp<r,l=t(e,a);a?l():n.isActive()&&n.addAction({doAction:()=>{l()},delay:e.delay})}return{...e,events:o}}))}}))}function createSpeedService(e){return v(s({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(e,t)=>{"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:o({normalSpeed:e=>e.timer.speed}),restoreSpeed:e=>{e.timer.setSpeed(e.normalSpeed)}}}))}const rules=e=>[`.${e} { background: currentColor }`,"noscript { display: none !important; }"],webGLVarMap=new Map;function variableListFor(e,t){let s=webGLVarMap.get(e);return s||(s=new Map,webGLVarMap.set(e,s)),s.has(t)||s.set(t,[]),s.get(t)}function deserializeArg(e,t,s){return async r=>{if(r&&"object"==typeof r&&"rr_type"in r){if(s&&(s.isUnchanged=!1),"ImageBitmap"===r.rr_type&&"args"in r){const n=await deserializeArg(e,t,s)(r.args);return await createImageBitmap.apply(null,n)}if("index"in r){if(s||null===t)return r;const{rr_type:e,index:n}=r;return variableListFor(t,e)[n]}if("args"in r){const{rr_type:n,args:o}=r;return new(0,window[n])(...await Promise.all(o.map(deserializeArg(e,t,s))))}if("base64"in r)return decode(r.base64);if("src"in r){const t=e.get(r.src);if(t)return t;{const t=new Image;return t.src=r.src,e.set(r.src,t),t}}if("data"in r&&"Blob"===r.rr_type){const n=await Promise.all(r.data.map(deserializeArg(e,t,s)));return new Blob(n,{type:r.type})}}else if(Array.isArray(r)){return await Promise.all(r.map(deserializeArg(e,t,s)))}return r}}function getContext(e,t){try{return t===CanvasContext.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(e){return null}}const WebGLVariableConstructorsNames=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function saveToWebGLVarMap(e,t){if(!(null==t?void 0:t.constructor))return;const{name:s}=t.constructor;if(!WebGLVariableConstructorsNames.includes(s))return;const r=variableListFor(e,s);r.includes(t)||r.push(t)}async function webglMutation({mutation:e,target:t,type:s,imageMap:r,errorHandler:n}){try{const n=getContext(t,s);if(!n)return;if(e.setter)return void(n[e.property]=e.args[0]);const o=n[e.property],i=await Promise.all(e.args.map(deserializeArg(r,n)));saveToWebGLVarMap(n,o.apply(n,i))}catch(t){n(e,t)}}async function canvasMutation$1({event:e,mutations:t,target:s,imageMap:r,errorHandler:n}){const o=s.getContext("2d");if(!o)return void n(t[0],new Error("Canvas context is null"));const i=t.map((async e=>Promise.all(e.args.map(deserializeArg(r,o)))));(await Promise.all(i)).forEach(((s,i)=>{const a=t[i];try{if(a.setter)return void(o[a.property]=a.args[0]);const t=o[a.property];"drawImage"===a.property&&"string"==typeof a.args[0]?(r.get(e),t.apply(o,a.args)):t.apply(o,s)}catch(e){n(a,e)}}))}async function canvasMutation({event:e,mutation:t,target:s,imageMap:r,canvasEventMap:n,errorHandler:o}){try{const i=n.get(e)||t,a="commands"in i?i.commands:[i];if([CanvasContext.WebGL,CanvasContext.WebGL2].includes(t.type)){for(let e=0;e<a.length;e++){const n=a[e];await webglMutation({mutation:n,type:t.type,target:s,imageMap:r,errorHandler:o})}return}await canvasMutation$1({event:e,mutations:a,target:s,imageMap:r,errorHandler:o})}catch(e){o(t,e)}}class MediaManager{constructor(e){__publicField2(this,"mediaMap",new Map),__publicField2(this,"warn"),__publicField2(this,"service"),__publicField2(this,"speedService"),__publicField2(this,"emitter"),__publicField2(this,"getCurrentTime"),__publicField2(this,"metadataCallbackMap",new Map),this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(ReplayerEvents.Start,this.start.bind(this)),this.emitter.on(ReplayerEvents.SkipStart,this.start.bind(this)),this.emitter.on(ReplayerEvents.Pause,this.pause.bind(this)),this.emitter.on(ReplayerEvents.Finish,this.pause.bind(this)),this.speedService.subscribe((()=>{this.syncAllMediaElements()}))}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach(((t,s)=>{this.syncTargetWithState(s),e.pause&&s.pause()}))}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:t,mediaState:s}){if(s.isPlaying){const r=(e-s.lastInteractionTimeOffset)/1e3*s.playbackRate,n="duration"in t&&t.duration;if(Number.isNaN(n))return void this.waitForMetadata(t);let o=s.currentTimeAtLastInteraction+r;t.loop&&!1!==n&&(o%=n),t.currentTime=o}else t.pause(),t.currentTime=s.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e))return;if(!("addEventListener"in e))return;const t=()=>{this.metadataCallbackMap.delete(e);const t=this.mediaMap.get(e);t&&this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t})};this.metadataCallbackMap.set(e,t),e.addEventListener("loadedmetadata",t,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:t,mutation:s}){const r=this.mediaMap.get(e),{type:n,playbackRate:o,currentTime:i,muted:a,volume:l,loop:c}=s;return{isPlaying:n===MediaInteractions.Play||n!==MediaInteractions.Pause&&((null==r?void 0:r.isPlaying)||null!==e.getAttribute("autoplay")),currentTimeAtLastInteraction:i??(null==r?void 0:r.currentTimeAtLastInteraction)??0,lastInteractionTimeOffset:t,playbackRate:o??(null==r?void 0:r.playbackRate)??1,volume:l??(null==r?void 0:r.volume)??1,muted:a??(null==r?void 0:r.muted)??null===e.getAttribute("muted"),loop:c??(null==r?void 0:r.loop)??null===e.getAttribute("loop")}}syncTargetWithState(e){const t=this.mediaMap.get(e);if(!t)return;const{muted:s,loop:r,volume:n,isPlaying:o}=t,i=this.service.state.matches("paused"),a=t.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t}),e.volume!==n&&(e.volume=n),e.muted=s,e.loop=r,e.playbackRate!==a&&(e.playbackRate=a),o&&!i?e.play():e.pause()}catch(e){this.warn(`Failed to replay media interactions: ${e.message||e}`)}}addMediaElements(e,t,s){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;const r=e,n=s.getMeta(r);if(!n||!("attributes"in n))return;const o=this.service.state.matches("paused"),i=n.attributes;let a=!1;a=i.rr_mediaState?"played"===i.rr_mediaState:null!==r.getAttribute("autoplay"),a&&o&&r.pause();let l=1;"number"==typeof i.rr_mediaPlaybackRate&&(l=i.rr_mediaPlaybackRate);let c=!1;c="boolean"==typeof i.rr_mediaMuted?i.rr_mediaMuted:null!==r.getAttribute("muted");let u=!1;u="boolean"==typeof i.rr_mediaLoop?i.rr_mediaLoop:null!==r.getAttribute("loop");let h=1;"number"==typeof i.rr_mediaVolume&&(h=i.rr_mediaVolume);let p=0;"number"==typeof i.rr_mediaCurrentTime&&(p=i.rr_mediaCurrentTime),this.mediaMap.set(r,{isPlaying:a,currentTimeAtLastInteraction:p,lastInteractionTimeOffset:t,playbackRate:l,volume:h,muted:c,loop:u}),this.syncTargetWithState(r)}mediaMutation({target:e,timeOffset:t,mutation:s}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:t,mutation:s})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}}function applyDialogToTopLevel(e,t){if("DIALOG"!==e.nodeName||e instanceof BaseRRNode)return;const s=e,r=s.open,n=r&&s.matches("dialog:modal"),o=s.getAttribute("rr_open_mode"),i="string"==typeof(null==t?void 0:t.attributes.open)||"string"==typeof s.getAttribute("open"),a="modal"===o;r&&!(n&&"non-modal"===o||!n&&a)||(s.isConnected?(r&&s.close(),i&&(a?s.showModal():s.show())):console.warn("dialog is not attached to the dom",s))}function removeDialogFromTopLevel(e,t){if("DIALOG"!==e.nodeName||e instanceof BaseRRNode)return;const s=e;s.isConnected?null===t.attributes.open&&(s.removeAttribute("open"),s.removeAttribute("rr_open_mode")):console.warn("dialog is not attached to the dom",s)}const SKIP_TIME_INTERVAL=5e3,mitt=mitt$1||mittProxy,REPLAY_CONSOLE_PREFIX="[replayer]",defaultMouseTailConfig={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function indicatesTouchDevice(e){return e.type==EventType$1.IncrementalSnapshot&&(e.data.source==IncrementalSource$1.TouchMove||e.data.source==IncrementalSource$1.MouseInteraction&&e.data.type==MouseInteractions.TouchStart)}class Replayer{constructor(e,t){if(__publicField2(this,"wrapper"),__publicField2(this,"iframe"),__publicField2(this,"service"),__publicField2(this,"speedService"),__publicField2(this,"config"),__publicField2(this,"usingVirtualDom",!1),__publicField2(this,"virtualDom",new RRDocument),__publicField2(this,"mouse"),__publicField2(this,"mouseTail",null),__publicField2(this,"tailPositions",[]),__publicField2(this,"emitter",mitt()),__publicField2(this,"nextUserInteractionEvent"),__publicField2(this,"legacy_missingNodeRetryMap",{}),__publicField2(this,"cache",createCache()),__publicField2(this,"imageMap",new Map),__publicField2(this,"canvasEventMap",new Map),__publicField2(this,"mirror",createMirror$2()),__publicField2(this,"styleMirror",new StyleSheetMirror),__publicField2(this,"mediaManager"),__publicField2(this,"firstFullSnapshot",null),__publicField2(this,"newDocumentQueue",[]),__publicField2(this,"mousePos",null),__publicField2(this,"touchActive",null),__publicField2(this,"lastMouseDownEvent",null),__publicField2(this,"lastHoveredRootNode"),__publicField2(this,"lastSelectionData",null),__publicField2(this,"constructedStyleMutations",[]),__publicField2(this,"adoptedStyleSheets",[]),__publicField2(this,"handleResize",(e=>{this.iframe.style.display="inherit";for(const t of[this.mouseTail,this.iframe])t&&(t.setAttribute("width",String(e.width)),t.setAttribute("height",String(e.height)))})),__publicField2(this,"applyEventsSynchronously",(e=>{for(const t of e){switch(t.type){case EventType$1.DomContentLoaded:case EventType$1.Load:case EventType$1.Custom:continue;case EventType$1.FullSnapshot:case EventType$1.Meta:case EventType$1.Plugin:case EventType$1.IncrementalSnapshot:}this.getCastFn(t,!0)()}})),__publicField2(this,"getCastFn",((e,t=!1)=>{let s;switch(e.type){case EventType$1.DomContentLoaded:case EventType$1.Load:break;case EventType$1.Custom:s=()=>{this.emitter.emit(ReplayerEvents.CustomEvent,e)};break;case EventType$1.Meta:s=()=>this.emitter.emit(ReplayerEvents.Resize,{width:e.data.width,height:e.data.height});break;case EventType$1.FullSnapshot:s=()=>{var s;if(this.firstFullSnapshot){if(this.firstFullSnapshot===e)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(e,t),null==(s=this.iframe.contentWindow)||s.scrollTo(e.data.initialOffset)};break;case EventType$1.IncrementalSnapshot:s=()=>{if(this.applyIncremental(e,t),!t&&(e===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const t of this.service.state.context.events)if(!(t.timestamp<=e.timestamp)&&this.isUserInteraction(t)){t.delay-e.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=t);break}if(this.nextUserInteractionEvent){const t=this.nextUserInteractionEvent.delay-e.delay,s={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:s}),this.emitter.emit(ReplayerEvents.SkipStart,s)}}}}return()=>{s&&s();for(const s of this.config.plugins||[])s.handler&&s.handler(e,t,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:e}});const r=this.service.state.context.events.length-1;if(!this.config.liveMode&&e===this.service.state.context.events[r]){const t=()=>{r<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(ReplayerEvents.Finish))};let s=50;e.type===EventType$1.IncrementalSnapshot&&e.data.source===IncrementalSource$1.MouseMove&&e.data.positions.length&&(s+=Math.max(0,-e.data.positions[0].timeOffset)),setTimeout(t,s)}this.emitter.emit(ReplayerEvents.EventCast,e)}})),!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const s={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:1e4,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:defaultMouseTailConfig,useVirtualDom:!0,logger:console};this.config=Object.assign({},s,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(ReplayerEvents.Resize,this.handleResize),this.setupDom();for(const e of this.config.plugins||[])e.getMirror&&e.getMirror({nodeMirror:this.mirror});this.emitter.on(ReplayerEvents.Flush,(()=>{if(this.usingVirtualDom){const e={mirror:this.mirror,applyCanvas:(e,t,s)=>{canvasMutation({event:e,mutation:t,target:s,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(e,t)=>{e.source===IncrementalSource$1.StyleSheetRule?this.applyStyleSheetRule(e,t):e.source===IncrementalSource$1.StyleDeclaration&&this.applyStyleDeclaration(e,t)},afterAppend:(e,t)=>{for(const s of this.config.plugins||[])s.onBuild&&s.onBuild(e,{id:t,replayer:this})}};if(this.iframe.contentDocument)try{diff(this.iframe.contentDocument,this.virtualDom,e,this.virtualDom.mirror)}catch(e){console.warn(e)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const t in this.legacy_missingNodeRetryMap)try{const s=this.legacy_missingNodeRetryMap[t],r=createOrGetNode(s.node,this.mirror,this.virtualDom.mirror);diff(r,s.node,e,this.virtualDom.mirror),s.node=r}catch(e){this.warn(e)}this.constructedStyleMutations.forEach((e=>{this.applyStyleSheetMutation(e)})),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach((e=>{this.applyAdoptedStyleSheet(e)})),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[e,t]=this.lastMouseDownEvent;e.dispatchEvent(t)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)})),this.emitter.on(ReplayerEvents.PlayBack,(()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()}));const r=new Timer([],{speed:this.config.speed});this.service=createPlayerService({events:e.map((e=>t&&t.unpackFn?t.unpackFn(e):e)).sort(((e,t)=>e.timestamp-t.timestamp)),timer:r,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((e=>{this.emitter.emit(ReplayerEvents.StateChange,{player:e})})),this.speedService=createSpeedService({normalSpeed:-1,timer:r}),this.speedService.start(),this.speedService.subscribe((e=>{this.emitter.emit(ReplayerEvents.StateChange,{speed:e})})),this.mediaManager=new MediaManager({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});const n=this.service.state.context.events.find((e=>e.type===EventType$1.Meta)),o=this.service.state.context.events.find((e=>e.type===EventType$1.FullSnapshot));if(n){const{width:e,height:t}=n.data;setTimeout((()=>{this.emitter.emit(ReplayerEvents.Resize,{width:e,height:t})}),0)}o&&setTimeout((()=>{var e;this.firstFullSnapshot||(this.firstFullSnapshot=o,this.rebuildFullSnapshot(o),null==(e=this.iframe.contentWindow)||e.scrollTo(o.data.initialOffset))}),1),this.service.state.context.events.find(indicatesTouchDevice)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach((t=>{e[t],this.config[t]=e[t]})),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,s;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null==(s=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||s.classList.remove("rrweb-paused"),this.emitter.emit(ReplayerEvents.Start)}pause(e){var t,s;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null==(s=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||s.classList.add("rrweb-paused"),this.emitter.emit(ReplayerEvents.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(ReplayerEvents.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(ReplayerEvents.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;indicatesTouchDevice(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((()=>this.service.send({type:"ADD_EVENT",payload:{event:t}})))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=createCache()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(polyfill(this.iframe.contentWindow,this.iframe.contentDocument),polyfill$1(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const s=[],r=new Set,n=(t,n)=>{if("DIALOG"===t.nodeName&&r.add(t),this.collectIframeAndAttachDocument(s,t),this.mediaManager.isSupportedMediaElement(t)){const{events:s}=this.service.state.context;this.mediaManager.addMediaElements(t,e.timestamp-s[0].timestamp,this.mirror)}for(const e of this.config.plugins||[])e.onBuild&&e.onBuild(t,{id:n,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),rebuild(e.data.node,{doc:this.iframe.contentDocument,afterAppend:n,cache:this.cache,mirror:this.mirror}),n(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:e,builtNode:t}of s)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e));const{documentElement:o,head:i}=this.iframe.contentDocument;this.insertStyleRules(o,i),r.forEach((e=>applyDialogToTopLevel(e))),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var s;const r=rules(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),r.length)if(this.usingVirtualDom){const s=this.virtualDom.createElement("style");this.virtualDom.mirror.add(s,getDefaultSN(s,this.virtualDom.unserializedId)),e.insertBefore(s,t),s.rules.push({source:IncrementalSource$1.StyleSheetRule,adds:r.map(((e,t)=>({rule:e,index:t})))})}else{const n=document.createElement("style");e.insertBefore(n,t);for(let e=0;e<r.length;e++)null==(s=n.sheet)||s.insertRule(r[e],e)}}attachDocumentToIframe(e,t){const s=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,r=[],n=new Set,o=(e,o)=>{"DIALOG"===e.nodeName&&n.add(e),this.collectIframeAndAttachDocument(r,e);const i=s.getMeta(e);if((null==i?void 0:i.type)===NodeType.Element&&"HTML"===(null==i?void 0:i.tagName.toUpperCase())){const{documentElement:e,head:s}=t.contentDocument;this.insertStyleRules(e,s)}if(!this.usingVirtualDom)for(const t of this.config.plugins||[])t.onBuild&&t.onBuild(e,{id:o,replayer:this})};buildNodeWithSN(e.node,{doc:t.contentDocument,mirror:s,hackCss:!0,skipChild:!1,afterAppend:o,cache:this.cache}),o(t.contentDocument,e.node.id);for(const{mutationInQueue:e,builtNode:t}of r)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e));n.forEach((e=>applyDialogToTopLevel(e)))}collectIframeAndAttachDocument(e,t){if(isSerializedIframe(t,this.mirror)){const s=this.newDocumentQueue.find((e=>e.parentId===this.mirror.getId(t)));s&&e.push({mutationInQueue:s,builtNode:t})}}waitForStylesheetLoad(){var e;const t=null==(e=this.iframe.contentDocument)?void 0:e.head;if(t){const e=new Set;let s,r=this.service.state;const n=()=>{r=this.service.state};this.emitter.on(ReplayerEvents.Start,n),this.emitter.on(ReplayerEvents.Pause,n);const o=()=>{this.emitter.off(ReplayerEvents.Start,n),this.emitter.off(ReplayerEvents.Pause,n)};t.querySelectorAll('link[rel="stylesheet"]').forEach((t=>{t.sheet||(e.add(t),t.addEventListener("load",(()=>{e.delete(t),0===e.size&&-1!==s&&(r.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(ReplayerEvents.LoadStylesheetEnd),s&&clearTimeout(s),o())})))})),e.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(ReplayerEvents.LoadStylesheetStart),s=setTimeout((()=>{r.matches("playing")&&this.play(this.getCurrentTime()),s=-1,o()}),this.config.loadTimeout))}}async preloadAllImages(){const e=[];for(const t of this.service.state.context.events)if(t.type===EventType$1.IncrementalSnapshot&&t.data.source===IncrementalSource$1.CanvasMutation){e.push(this.deserializeAndPreloadCanvasEvents(t.data,t));("commands"in t.data?t.data.commands:[t.data]).forEach((e=>{this.preloadImages(e,t)}))}return Promise.all(e)}preloadImages(e,t){if("drawImage"===e.property&&"string"==typeof e.args[0]&&!this.imageMap.has(t)){const e=document.createElement("canvas"),t=e.getContext("2d"),s=null==t?void 0:t.createImageData(e.width,e.height);null==t||t.putImageData(s,0,0)}}async deserializeAndPreloadCanvasEvents(e,t){if(!this.canvasEventMap.has(t)){const s={isUnchanged:!0};if("commands"in e){const r=await Promise.all(e.commands.map((async e=>{const t=await Promise.all(e.args.map(deserializeArg(this.imageMap,null,s)));return{...e,args:t}})));!1===s.isUnchanged&&this.canvasEventMap.set(t,{...e,commands:r})}else{const r=await Promise.all(e.args.map(deserializeArg(this.imageMap,null,s)));!1===s.isUnchanged&&this.canvasEventMap.set(t,{...e,args:r})}}}applyIncremental(e,t){var s,r,n;const{data:o}=e;switch(o.source){case IncrementalSource$1.Mutation:try{this.applyMutation(o,t)}catch(e){this.warn(`Exception in mutation ${e.message||e}`,o)}break;case IncrementalSource$1.Drag:case IncrementalSource$1.TouchMove:case IncrementalSource$1.MouseMove:if(t){const e=o.positions[o.positions.length-1];this.mousePos={x:e.x,y:e.y,id:e.id,debugData:o}}else o.positions.forEach((s=>{const r={doAction:()=>{this.moveAndHover(s.x,s.y,s.id,t,o)},delay:s.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(r)})),this.timer.addAction({doAction(){},delay:e.delay-(null==(s=o.positions[0])?void 0:s.timeOffset)});break;case IncrementalSource$1.MouseInteraction:{if(-1===o.id)break;const e=new Event(toLowerCase(MouseInteractions[o.type])),s=this.mirror.getNode(o.id);if(!s)return this.debugNodeNotFound(o,o.id);this.emitter.emit(ReplayerEvents.MouseInteraction,{type:o.type,target:s});const{triggerFocus:r}=this.config;switch(o.type){case MouseInteractions.Blur:"blur"in s&&s.blur();break;case MouseInteractions.Focus:r&&s.focus&&s.focus({preventScroll:!0});break;case MouseInteractions.Click:case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:case MouseInteractions.MouseDown:case MouseInteractions.MouseUp:t?(o.type===MouseInteractions.TouchStart?this.touchActive=!0:o.type===MouseInteractions.TouchEnd&&(this.touchActive=!1),o.type===MouseInteractions.MouseDown?this.lastMouseDownEvent=[s,e]:o.type===MouseInteractions.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:o.x||0,y:o.y||0,id:o.id,debugData:o}):(o.type===MouseInteractions.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(o.x||0,o.y||0,o.id,t,o),o.type===MouseInteractions.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):o.type===MouseInteractions.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):o.type===MouseInteractions.TouchEnd?this.mouse.classList.remove("touch-active"):s.dispatchEvent(e));break;case MouseInteractions.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:s.dispatchEvent(e)}break}case IncrementalSource$1.Scroll:if(-1===o.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(o.id);if(!e)return this.debugNodeNotFound(o,o.id);e.scrollData=o;break}this.applyScroll(o,t);break;case IncrementalSource$1.ViewportResize:this.emitter.emit(ReplayerEvents.Resize,{width:o.width,height:o.height});break;case IncrementalSource$1.Input:if(-1===o.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(o.id);if(!e)return this.debugNodeNotFound(o,o.id);e.inputData=o;break}this.applyInput(o);break;case IncrementalSource$1.MediaInteraction:{const t=this.usingVirtualDom?this.virtualDom.mirror.getNode(o.id):this.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);const s=t,{events:r}=this.service.state.context;this.mediaManager.mediaMutation({target:s,timeOffset:e.timestamp-r[0].timestamp,mutation:o});break}case IncrementalSource$1.StyleSheetRule:case IncrementalSource$1.StyleDeclaration:this.usingVirtualDom?o.styleId?this.constructedStyleMutations.push(o):o.id&&(null==(r=this.virtualDom.mirror.getNode(o.id))||r.rules.push(o)):this.applyStyleSheetMutation(o);break;case IncrementalSource$1.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);t.canvasMutations.push({event:e,mutation:o})}else{const t=this.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);canvasMutation({event:e,mutation:o,target:t,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case IncrementalSource$1.Font:try{const e=new FontFace(o.family,o.buffer?new Uint8Array(JSON.parse(o.fontSource)):o.fontSource,o.descriptors);null==(n=this.iframe.contentDocument)||n.fonts.add(e)}catch(e){this.warn(e)}break;case IncrementalSource$1.Selection:if(t){this.lastSelectionData=o;break}this.applySelection(o);break;case IncrementalSource$1.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(o):this.applyAdoptedStyleSheet(o)}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,buildFromDom(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const e in this.legacy_missingNodeRetryMap)try{const t=this.legacy_missingNodeRetryMap[e],s=buildFromNode(t.node,this.virtualDom,this.mirror);s&&(t.node=s)}catch(e){this.warn(e)}const s=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter((t=>!!s.getNode(t.id)||(this.warnNodeNotFound(e,t.id),!1))),e.removes.forEach((t=>{var r;const n=s.getNode(t.id);if(!n)return;let o=s.getNode(t.parentId);if(!o)return this.warnNodeNotFound(e,t.parentId);if(t.isShadow&&hasShadowRoot(o)&&(o=o.shadowRoot),s.removeNodeFromMap(n),o)try{o.removeChild(n),this.usingVirtualDom&&"#text"===n.nodeName&&"STYLE"===o.nodeName&&(null==(r=o.rules)?void 0:r.length)>0&&(o.rules=[])}catch(t){if(!(t instanceof DOMException))throw t;this.warn("parent could not remove child in mutation",o,n,e)}}));const r={...this.legacy_missingNodeRetryMap},n=[],o=e=>{var t,o;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let i=s.getNode(e.parentId);if(!i)return e.node.type===NodeType.Document?this.newDocumentQueue.push(e):n.push(e);e.node.isShadow&&(hasShadowRoot(i)||i.attachShadow({mode:"open"}),i=i.shadowRoot);let a=null,l=null;if(e.previousId&&(a=s.getNode(e.previousId)),e.nextId&&(l=s.getNode(e.nextId)),(e=>{let t=null;return e.nextId&&(t=s.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t})(e))return n.push(e);if(e.node.rootId&&!s.getNode(e.node.rootId))return;const c=e.node.rootId?s.getNode(e.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(isSerializedIframe(i,s))return void this.attachDocumentToIframe(e,i);const u=(e,t)=>{if(!this.usingVirtualDom){applyDialogToTopLevel(e);for(const s of this.config.plugins||[])s.onBuild&&s.onBuild(e,{id:t,replayer:this})}},h=buildNodeWithSN(e.node,{doc:c,mirror:s,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:u});if(-1===e.previousId||-1===e.nextId)return void(r[e.node.id]={node:h,mutation:e});const p=s.getMeta(i);if(p&&p.type===NodeType.Element&&e.node.type===NodeType.Text){const e=Array.isArray(i.childNodes)?i.childNodes:Array.from(i.childNodes);if("textarea"===p.tagName)for(const t of e)t.nodeType===i.TEXT_NODE&&i.removeChild(t);else if("style"===p.tagName&&1===e.length)for(const t of e)t.nodeType!==i.TEXT_NODE||s.hasNode(t)||(h.textContent=t.textContent,i.removeChild(t))}else if((null==p?void 0:p.type)===NodeType.Document){const s=i;e.node.type===NodeType.DocumentType&&(null==(t=s.childNodes[0])?void 0:t.nodeType)===Node.DOCUMENT_TYPE_NODE&&s.removeChild(s.childNodes[0]),"HTML"===h.nodeName&&s.documentElement&&s.removeChild(s.documentElement)}if(a&&a.nextSibling&&a.nextSibling.parentNode?i.insertBefore(h,a.nextSibling):l&&l.parentNode?i.contains(l)?i.insertBefore(h,l):i.insertBefore(h,null):i.appendChild(h),u(h,e.node.id),this.usingVirtualDom&&"#text"===h.nodeName&&"STYLE"===i.nodeName&&(null==(o=i.rules)?void 0:o.length)>0&&(i.rules=[]),isSerializedIframe(h,this.mirror)){const e=this.mirror.getId(h),t=this.newDocumentQueue.find((t=>t.parentId===e));t&&(this.attachDocumentToIframe(t,h),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==t)))}(e.previousId||e.nextId)&&this.legacy_resolveMissingNode(r,i,h,e)};e.adds.forEach((e=>{o(e)}));const i=Date.now();for(;n.length;){const e=queueToResolveTrees(n);if(n.length=0,Date.now()-i>500){this.warn("Timeout in the loop, please check the resolve tree data:",e);break}for(const t of e){s.getNode(t.value.parentId)?iterateResolveTree(t,(e=>{o(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",t)}}Object.keys(r).length&&Object.assign(this.legacy_missingNodeRetryMap,r),uniqueTextMutations(e.texts).forEach((t=>{var r;const n=s.getNode(t.id);if(!n){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}const o=n.parentElement;if(t.value&&o&&"STYLE"===o.tagName?n.textContent=adaptCssForReplay(t.value,this.cache):n.textContent=t.value,this.usingVirtualDom){const e=n.parentNode;(null==(r=null==e?void 0:e.rules)?void 0:r.length)>0&&(e.rules=[])}})),e.attributes.forEach((t=>{var r;const n=s.getNode(t.id);if(!n){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}for(const e in t.attributes)if("string"==typeof e){const o=t.attributes[e];if(null===o)n.removeAttribute(e),"open"===e&&removeDialogFromTopLevel(n,t);else if("string"==typeof o)try{if("_cssText"===e&&("LINK"===n.nodeName||"STYLE"===n.nodeName))try{const e=s.getMeta(n);Object.assign(e.attributes,t.attributes);const r=buildNodeWithSN(e,{doc:n.ownerDocument,mirror:s,skipChild:!0,hackCss:!0,cache:this.cache}),o=n.nextSibling,i=n.parentNode;if(r&&i){i.removeChild(n),i.insertBefore(r,o),s.replace(t.id,r);break}}catch(e){}if("value"===e&&"TEXTAREA"===n.nodeName){const e=n;e.childNodes.forEach((t=>e.removeChild(t)));const t=null==(r=n.ownerDocument)?void 0:r.createTextNode(o);t&&e.appendChild(t)}else n.setAttribute(e,o);"rr_open_mode"===e&&"DIALOG"===n.nodeName&&applyDialogToTopLevel(n,t)}catch(e){this.warn("An error occurred may due to the checkout feature.",e)}else if("style"===e){const e=o,t=n;for(const s in e)if(!1===e[s])t.style.removeProperty(s);else if(e[s]instanceof Array){const r=e[s];t.style.setProperty(s,r[0],r[1])}else{const r=e[s];t.style.setProperty(s,r)}}}}))}applyScroll(e,t){var s,r;const n=this.mirror.getNode(e.id);if(!n)return this.debugNodeNotFound(e,e.id);const o=this.mirror.getMeta(n);if(n===this.iframe.contentDocument)null==(s=this.iframe.contentWindow)||s.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((null==o?void 0:o.type)===NodeType.Document)null==(r=n.defaultView)||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{n.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch(e){}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(e){}}applySelection(e){try{const t=new Set,s=e.ranges.map((({start:e,startOffset:s,end:r,endOffset:n})=>{const o=this.mirror.getNode(e),i=this.mirror.getNode(r);if(!o||!i)return;const a=new Range;a.setStart(o,s),a.setEnd(i,n);const l=o.ownerDocument,c=null==l?void 0:l.getSelection();return c&&t.add(c),{range:a,selection:c}}));t.forEach((e=>e.removeAllRanges())),s.forEach((e=>{var t;return e&&(null==(t=e.selection)?void 0:t.addRange(e.range))}))}catch(e){}}applyStyleSheetMutation(e){var t;let s=null;e.styleId?s=this.styleMirror.getStyle(e.styleId):e.id&&(s=(null==(t=this.mirror.getNode(e.id))?void 0:t.sheet)||null),s&&(e.source===IncrementalSource$1.StyleSheetRule?this.applyStyleSheetRule(e,s):e.source===IncrementalSource$1.StyleDeclaration&&this.applyStyleDeclaration(e,s))}applyStyleSheetRule(e,t){var s,r,n,o;if(null==(s=e.adds)||s.forEach((({rule:e,index:s})=>{try{if(Array.isArray(s)){const{positions:r,index:n}=getPositionsAndIndex(s);getNestedRule(t.cssRules,r).insertRule(e,n)}else{const r=void 0===s?void 0:Math.min(s,t.cssRules.length);null==t||t.insertRule(e,r)}}catch(e){}})),null==(r=e.removes)||r.forEach((({index:e})=>{try{if(Array.isArray(e)){const{positions:s,index:r}=getPositionsAndIndex(e);getNestedRule(t.cssRules,s).deleteRule(r||0)}else null==t||t.deleteRule(e)}catch(e){}})),e.replace)try{null==(n=t.replace)||n.call(t,e.replace)}catch(e){}if(e.replaceSync)try{null==(o=t.replaceSync)||o.call(t,e.replaceSync)}catch(e){}}applyStyleDeclaration(e,t){if(e.set){getNestedRule(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority)}if(e.remove){getNestedRule(t.rules,e.index).style.removeProperty(e.remove.property)}}applyAdoptedStyleSheet(e){var t;const s=this.mirror.getNode(e.id);if(!s)return;null==(t=e.styles)||t.forEach((e=>{var t;let r=null,n=null;if(hasShadowRoot(s)?n=(null==(t=s.ownerDocument)?void 0:t.defaultView)||null:"#document"===s.nodeName&&(n=s.defaultView),n)try{r=new n.CSSStyleSheet,this.styleMirror.add(r,e.styleId),this.applyStyleSheetRule({source:IncrementalSource$1.StyleSheetRule,adds:e.rules},r)}catch(e){}}));let r=0;const n=(e,t)=>{const s=t.map((e=>this.styleMirror.getStyle(e))).filter((e=>null!==e));hasShadowRoot(e)?e.shadowRoot.adoptedStyleSheets=s:"#document"===e.nodeName&&(e.adoptedStyleSheets=s),s.length!==t.length&&r<10&&(setTimeout((()=>n(e,t)),0+100*r),r++)};n(s,e.styleIds)}legacy_resolveMissingNode(e,t,s,r){const{previousId:n,nextId:o}=r,i=n&&e[n],a=o&&e[o];if(i){const{node:r,mutation:n}=i;t.insertBefore(r,s),delete e[n.node.id],delete this.legacy_missingNodeRetryMap[n.node.id],(n.previousId||n.nextId)&&this.legacy_resolveMissingNode(e,t,r,n)}if(a){const{node:r,mutation:n}=a;t.insertBefore(r,s.nextSibling),delete e[n.node.id],delete this.legacy_missingNodeRetryMap[n.node.id],(n.previousId||n.nextId)&&this.legacy_resolveMissingNode(e,t,r,n)}}moveAndHover(e,t,s,r,n){const o=this.mirror.getNode(s);if(!o)return this.debugNodeNotFound(n,s);const i=getBaseDimension(o,this.iframe),a=e*i.absoluteScale+i.x,l=t*i.absoluteScale+i.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${l}px`,r||this.drawMouseTail({x:a,y:l}),this.hoverElements(o)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:s,strokeStyle:r,duration:n}=!0===this.config.mouseTail?defaultMouseTailConfig:Object.assign({},defaultMouseTailConfig,this.config.mouseTail),o=()=>{if(!this.mouseTail)return;const e=this.mouseTail.getContext("2d");e&&this.tailPositions.length&&(e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=s,e.lineCap=t,e.strokeStyle=r,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach((t=>e.lineTo(t.x,t.y))),e.stroke())};this.tailPositions.push(e),o(),setTimeout((()=>{this.tailPositions=this.tailPositions.filter((t=>t!==e)),o()}),n/this.speedService.state.context.timer.speed)}hoverElements(e){var t;null==(t=this.lastHoveredRootNode||this.iframe.contentDocument)||t.querySelectorAll(".\\:hover").forEach((e=>{e.classList.remove(":hover")})),this.lastHoveredRootNode=e.getRootNode();let s=e;for(;s;)s.classList&&s.classList.add(":hover"),s=s.parentElement}isUserInteraction(e){return e.type===EventType$1.IncrementalSnapshot&&(e.data.source>IncrementalSource$1.Mutation&&e.data.source<=IncrementalSource$1.Input)}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(ReplayerEvents.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn("[replayer]",...e)}debug(...e){this.config.showDebug&&this.config.logger.log("[replayer]",...e)}}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var s=new u16(31),r=0;r<31;++r)s[r]=t+=1<<e[r-1];var n=new u32(s[30]);for(r=1;r<30;++r)for(var o=s[r];o<s[r+1];++o)n[o]=o-s[r]<<5|r;return[s,n]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768),i=0;i<32768;++i){var x=(43690&i)>>>1|(21845&i)<<1;x=(61680&(x=(52428&x)>>>2|(13107&x)<<2))>>>4|(3855&x)<<4,rev[i]=((65280&x)>>>8|(255&x)<<8)>>>1}var hMap=function(e,t,s){for(var r=e.length,n=0,o=new u16(t);n<r;++n)++o[e[n]-1];var i,a=new u16(t);for(n=0;n<t;++n)a[n]=a[n-1]+o[n-1]<<1;if(s){i=new u16(1<<t);var l=15-t;for(n=0;n<r;++n)if(e[n])for(var c=n<<4|e[n],u=t-e[n],h=a[e[n]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)i[rev[h]>>>l]=c}else for(i=new u16(r),n=0;n<r;++n)i[n]=rev[a[e[n]-1]++]>>>15-e[n];return i},flt=new u8(288);for(i=0;i<144;++i)flt[i]=8;for(i=144;i<256;++i)flt[i]=9;for(i=256;i<280;++i)flt[i]=7;for(i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(i=0;i<32;++i)fdt[i]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max=function(e){for(var t=e[0],s=1;s<e.length;++s)e[s]>t&&(t=e[s]);return t},bits=function(e,t,s){var r=t/8|0;return(e[r]|e[r+1]<<8)>>>(7&t)&s},bits16=function(e,t){var s=t/8|0;return(e[s]|e[s+1]<<8|e[s+2]<<16)>>>(7&t)},shft=function(e){return(e/8|0)+(7&e&&1)},slc=function(e,t,s){(null==s||s>e.length)&&(s=e.length);var r=new(e instanceof u16?u16:e instanceof u32?u32:u8)(s-t);return r.set(e.subarray(t,s)),r},inflt=function(e,t,s){var r=e.length,n=!t||s,o=!s||s.i;s||(s={}),t||(t=new u8(3*r));var i=function(e){var s=t.length;if(e>s){var r=new u8(Math.max(2*s,e));r.set(t),t=r}},a=s.f||0,l=s.p||0,c=s.b||0,u=s.l,h=s.d,p=s.m,d=s.n,m=8*r;do{if(!u){s.f=a=bits(e,l,1);var f=bits(e,l+1,3);if(l+=3,!f){var g=e[(N=shft(l)+4)-4]|e[N-3]<<8,y=N+g;if(y>r){if(o)throw"unexpected EOF";break}n&&i(c+g),t.set(e.subarray(N,y),c),s.b=c+=g,s.p=l=8*y;continue}if(1==f)u=flrm,h=fdrm,p=9,d=5;else{if(2!=f)throw"invalid block type";var $=bits(e,l,31)+257,v=bits(e,l+10,15)+4,w=$+bits(e,l+5,31)+1;l+=14;for(var b=new u8(w),C=new u8(19),S=0;S<v;++S)C[clim[S]]=bits(e,l+3*S,7);l+=3*v;var E=max(C),_=(1<<E)-1;if(!o&&l+w*(E+7)>m)break;var R=hMap(C,E,1);for(S=0;S<w;){var N,x=R[bits(e,l,_)];if(l+=15&x,(N=x>>>4)<16)b[S++]=N;else{var A=0,T=0;for(16==N?(T=3+bits(e,l,3),l+=2,A=b[S-1]):17==N?(T=3+bits(e,l,7),l+=3):18==N&&(T=11+bits(e,l,127),l+=7);T--;)b[S++]=A}}var M=b.subarray(0,$),I=b.subarray($);p=max(M),d=max(I),u=hMap(M,p,1),h=hMap(I,d,1)}if(l>m)throw"unexpected EOF"}n&&i(c+131072);for(var D=(1<<p)-1,k=(1<<d)-1,O=p+d+18;o||l+O<m;){var P=(A=u[bits16(e,l)&D])>>>4;if((l+=15&A)>m)throw"unexpected EOF";if(!A)throw"invalid length/literal";if(P<256)t[c++]=P;else{if(256==P){u=null;break}var F=P-254;if(P>264){var L=fleb[S=P-257];F=bits(e,l,(1<<L)-1)+fl[S],l+=L}var B=h[bits16(e,l)&k],U=B>>>4;if(!B)throw"invalid distance";l+=15&B;I=fd[U];if(U>3){L=fdeb[U];I+=bits16(e,l)&(1<<L)-1,l+=L}if(l>m)throw"unexpected EOF";n&&i(c+131072);for(var z=c+F;c<z;c+=4)t[c]=t[c-I],t[c+1]=t[c+1-I],t[c+2]=t[c+2-I],t[c+3]=t[c+3-I];c=z}}s.l=u,s.p=l,s.b=c,u&&(a=1,s.m=p,s.d=h,s.n=d)}while(!a);return c==t.length?t:slc(t,0,c)},zlv=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync(e,t){return inflt((zlv(e),e.subarray(2,-4)),t)}function strToU8(e,t){for(var s=e.length,r=new u8(e.length+(e.length>>>1)),n=0,o=function(e){r[n++]=e},i=0;i<s;++i){if(n+5>r.length){var a=new u8(n+8+(s-i<<1));a.set(r),r=a}var l=e.charCodeAt(i);l<128||t?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++i))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return slc(r,0,n)}function strFromU8(e,t){var s="";if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var r=0;r<e.length;){var n=e[r++];n<128||t?s+=String.fromCharCode(n):n<224?s+=String.fromCharCode((31&n)<<6|63&e[r++]):n<240?s+=String.fromCharCode((15&n)<<12|(63&e[r++])<<6|63&e[r++]):(n=((15&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,s+=String.fromCharCode(55296|n>>10,56320|1023&n))}return s}const MARK="v1",unpack=e=>{if("string"!=typeof e)return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch(e){}try{const t=JSON.parse(strFromU8(unzlibSync(strToU8(e,!0))));if("v1"===t.v)return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer v1.`)}catch(e){throw console.error(e),new Error("Unknown data format.")}};var EventType=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(EventType||{}),IncrementalSource=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(IncrementalSource||{});function inlineCss(e){let t="";return Object.keys(e).forEach((s=>{t+=`${s}: ${e[s]};`})),t}function padZero(e,t=2){let s=String(e);const r=Math.pow(10,t-1);if(e<r)for(;String(r).length>s.length;)s=`0${e}`;return s}const SECOND=1e3,MINUTE=6e4,HOUR=36e5;function formatTime(e){if(e<=0)return"00:00";const t=Math.floor(e/HOUR);e%=HOUR;const s=Math.floor(e/6e4);e%=6e4;const r=Math.floor(e/1e3);return t?`${padZero(t)}:${padZero(s)}:${padZero(r)}`:`${padZero(s)}:${padZero(r)}`}function openFullscreen(e){return e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():Promise.resolve()}function exitFullscreen(){return document.exitFullscreen?document.exitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():Promise.resolve()}function isFullscreen(){let e=!1;return["fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement"].forEach((t=>{t in document&&(e=e||Boolean(document[t]))})),e}function onFullscreenChange(e){return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}}function typeOf(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}function isUserInteraction(e){return e.type===EventType.IncrementalSnapshot&&(e.data.source>IncrementalSource.Mutation&&e.data.source<=IncrementalSource.Input)}function getInactivePeriods(e,t){const s=[];let r=e[0].timestamp;for(const n of e)isUserInteraction(n)&&(n.timestamp-r>t&&s.push([r,n.timestamp]),r=n.timestamp);return s}function create_fragment$2(e){let t,s,r,n,o,i,a,l,c;return{c(){t=element("div"),s=element("input"),r=space(),n=element("label"),o=space(),i=element("span"),a=text(e[3]),attr(s,"type","checkbox"),attr(s,"id",e[2]),s.disabled=e[1],attr(s,"class","svelte-a6h7w7"),attr(n,"for",e[2]),attr(n,"class","svelte-a6h7w7"),attr(i,"class","label svelte-a6h7w7"),attr(t,"class","switch svelte-a6h7w7"),toggle_class(t,"disabled",e[1])},m(u,h){insert(u,t,h),append(t,s),s.checked=e[0],append(t,r),append(t,n),append(t,o),append(t,i),append(i,a),l||(c=listen(s,"change",e[4]),l=!0)},p(e,[r]){4&r&&attr(s,"id",e[2]),2&r&&(s.disabled=e[1]),1&r&&(s.checked=e[0]),4&r&&attr(n,"for",e[2]),8&r&&set_data(a,e[3]),2&r&&toggle_class(t,"disabled",e[1])},i:noop,o:noop,d(e){e&&detach(t),l=!1,c()}}}function instance$2(e,t,s){let{disabled:r}=t,{checked:n}=t,{id:o}=t,{label:i}=t;return e.$$set=e=>{"disabled"in e&&s(1,r=e.disabled),"checked"in e&&s(0,n=e.checked),"id"in e&&s(2,o=e.id),"label"in e&&s(3,i=e.label)},[n,r,o,i,function(){n=this.checked,s(0,n)}]}class Switch extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{disabled:1,checked:0,id:2,label:3})}}function get_each_context(e,t,s){const r=e.slice();return r[38]=t[s],r}function get_each_context_1(e,t,s){const r=e.slice();return r[41]=t[s],r}function get_each_context_2(e,t,s){const r=e.slice();return r[44]=t[s],r}function create_if_block$1(e){let t,s,r,n,o,i,a,l,c,u,h,p,d,m,f,g,y,$,v,w,b,C,S,E,_,R,N=formatTime(e[6])+"",x=formatTime(e[8].totalTime)+"",A=ensure_array_like(e[13]),T=[];for(let t=0;t<A.length;t+=1)T[t]=create_each_block_2(get_each_context_2(e,A,t));let M=ensure_array_like(e[9]),I=[];for(let t=0;t<M.length;t+=1)I[t]=create_each_block_1(get_each_context_1(e,M,t));function D(e,t){return"playing"===e[7]?create_if_block_1:create_else_block}let k=D(e),O=k(e),P=ensure_array_like(e[3]),F=[];for(let t=0;t<P.length;t+=1)F[t]=create_each_block(get_each_context(e,P,t));function L(t){e[29](t)}let B={id:"skip",disabled:"skipping"===e[10],label:"skip inactive"};return void 0!==e[0]&&(B.checked=e[0]),w=new Switch({props:B}),binding_callbacks.push((()=>bind(w,"checked",L))),{c(){t=element("div"),s=element("div"),r=element("span"),n=text(N),o=space(),i=element("div"),a=element("div"),l=space();for(let e=0;e<T.length;e+=1)T[e].c();c=space();for(let e=0;e<I.length;e+=1)I[e].c();u=space(),h=element("div"),p=space(),d=element("span"),m=text(x),f=space(),g=element("div"),y=element("button"),O.c(),$=space();for(let e=0;e<F.length;e+=1)F[e].c();v=space(),create_component(w.$$.fragment),C=space(),S=element("button"),S.innerHTML='<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M916 380c-26.4 0-48-21.6-48-48L868 223.2 613.6 477.6c-18.4\n            18.4-48.8 18.4-68 0-18.4-18.4-18.4-48.8 0-68L800 156 692 156c-26.4\n            0-48-21.6-48-48 0-26.4 21.6-48 48-48l224 0c26.4 0 48 21.6 48 48l0\n            224C964 358.4 942.4 380 916 380zM231.2 860l108.8 0c26.4 0 48 21.6 48\n            48s-21.6 48-48 48l-224 0c-26.4 0-48-21.6-48-48l0-224c0-26.4 21.6-48\n            48-48 26.4 0 48 21.6 48 48L164 792l253.6-253.6c18.4-18.4 48.8-18.4\n            68 0 18.4 18.4 18.4 48.8 0 68L231.2 860z"></path></svg>',attr(r,"class","rr-timeline__time svelte-189zk2r"),attr(a,"class","rr-progress__step svelte-189zk2r"),set_style(a,"width",e[12]),attr(h,"class","rr-progress__handler svelte-189zk2r"),set_style(h,"left",e[12]),attr(i,"class","rr-progress svelte-189zk2r"),toggle_class(i,"disabled","skipping"===e[10]),attr(d,"class","rr-timeline__time svelte-189zk2r"),attr(s,"class","rr-timeline svelte-189zk2r"),attr(y,"class","svelte-189zk2r"),attr(S,"class","svelte-189zk2r"),attr(g,"class","rr-controller__btns svelte-189zk2r"),attr(t,"class","rr-controller svelte-189zk2r")},m(b,N){insert(b,t,N),append(t,s),append(s,r),append(r,n),append(s,o),append(s,i),append(i,a),append(i,l);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(i,null);append(i,c);for(let e=0;e<I.length;e+=1)I[e]&&I[e].m(i,null);append(i,u),append(i,h),e[27](i),append(s,p),append(s,d),append(d,m),append(t,f),append(t,g),append(g,y),O.m(y,null),append(g,$);for(let e=0;e<F.length;e+=1)F[e]&&F[e].m(g,null);append(g,v),mount_component(w,g,null),append(g,C),append(g,S),E=!0,_||(R=[listen(i,"click",e[15]),listen(i,"keydown",e[16]),listen(y,"click",e[4]),listen(S,"click",e[30])],_=!0)},p(e,t){if((!E||64&t[0])&&N!==(N=formatTime(e[6])+"")&&set_data(n,N),(!E||4096&t[0])&&set_style(a,"width",e[12]),8192&t[0]){let s;for(A=ensure_array_like(e[13]),s=0;s<A.length;s+=1){const r=get_each_context_2(e,A,s);T[s]?T[s].p(r,t):(T[s]=create_each_block_2(r),T[s].c(),T[s].m(i,c))}for(;s<T.length;s+=1)T[s].d(1);T.length=A.length}if(512&t[0]){let s;for(M=ensure_array_like(e[9]),s=0;s<M.length;s+=1){const r=get_each_context_1(e,M,s);I[s]?I[s].p(r,t):(I[s]=create_each_block_1(r),I[s].c(),I[s].m(i,u))}for(;s<I.length;s+=1)I[s].d(1);I.length=M.length}if((!E||4096&t[0])&&set_style(h,"left",e[12]),(!E||1024&t[0])&&toggle_class(i,"disabled","skipping"===e[10]),(!E||256&t[0])&&x!==(x=formatTime(e[8].totalTime)+"")&&set_data(m,x),k!==(k=D(e))&&(O.d(1),O=k(e),O&&(O.c(),O.m(y,null))),1066&t[0]){let s;for(P=ensure_array_like(e[3]),s=0;s<P.length;s+=1){const r=get_each_context(e,P,s);F[s]?F[s].p(r,t):(F[s]=create_each_block(r),F[s].c(),F[s].m(g,v))}for(;s<F.length;s+=1)F[s].d(1);F.length=P.length}const s={};1024&t[0]&&(s.disabled="skipping"===e[10]),!b&&1&t[0]&&(b=!0,s.checked=e[0],add_flush_callback((()=>b=!1))),w.$set(s)},i(e){E||(transition_in(w.$$.fragment,e),E=!0)},o(e){transition_out(w.$$.fragment,e),E=!1},d(s){s&&detach(t),destroy_each(T,s),destroy_each(I,s),e[27](null),O.d(),destroy_each(F,s),destroy_component(w),_=!1,run_all(R)}}}function create_each_block_2(e){let t,s;return{c(){t=element("div"),attr(t,"title",s=e[44].name),set_style(t,"width",e[44].width),set_style(t,"height","4px"),set_style(t,"position","absolute"),set_style(t,"background",e[44].background),set_style(t,"left",e[44].position)},m(e,s){insert(e,t,s)},p(e,r){8192&r[0]&&s!==(s=e[44].name)&&attr(t,"title",s),8192&r[0]&&set_style(t,"width",e[44].width),8192&r[0]&&set_style(t,"background",e[44].background),8192&r[0]&&set_style(t,"left",e[44].position)},d(e){e&&detach(t)}}}function create_each_block_1(e){let t,s;return{c(){t=element("div"),attr(t,"title",s=e[41].name),set_style(t,"width","10px"),set_style(t,"height","5px"),set_style(t,"position","absolute"),set_style(t,"top","2px"),set_style(t,"transform","translate(-50%, -50%)"),set_style(t,"background",e[41].background),set_style(t,"left",e[41].position)},m(e,s){insert(e,t,s)},p(e,r){512&r[0]&&s!==(s=e[41].name)&&attr(t,"title",s),512&r[0]&&set_style(t,"background",e[41].background),512&r[0]&&set_style(t,"left",e[41].position)},d(e){e&&detach(t)}}}function create_else_block(e){let t,s;return{c(){t=svg_element("svg"),s=svg_element("path"),attr(s,"d","M170.65984 896l0-768 640 384zM644.66944\n              512l-388.66944-233.32864 0 466.65728z"),attr(t,"class","icon"),attr(t,"viewBox","0 0 1024 1024"),attr(t,"version","1.1"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(t,"width","16"),attr(t,"height","16")},m(e,r){insert(e,t,r),append(t,s)},d(e){e&&detach(t)}}}function create_if_block_1(e){let t,s;return{c(){t=svg_element("svg"),s=svg_element("path"),attr(s,"d","M682.65984 128q53.00224 0 90.50112 37.49888t37.49888 90.50112l0\n              512q0 53.00224-37.49888 90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 128q53.00224 0\n              90.50112 37.49888t37.49888 90.50112l0 512q0 53.00224-37.49888\n              90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 213.34016q-17.67424\n              0-30.16704 12.4928t-12.4928 30.16704l0 512q0 17.67424 12.4928\n              30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928zM682.65984\n              213.34016q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 512q0\n              17.67424 12.4928 30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928z"),attr(t,"class","icon"),attr(t,"viewBox","0 0 1024 1024"),attr(t,"version","1.1"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(t,"width","16"),attr(t,"height","16")},m(e,r){insert(e,t,r),append(t,s)},d(e){e&&detach(t)}}}function create_each_block(e){let t,s,r,n,o,i,a=e[38]+"";function l(){return e[28](e[38])}return{c(){t=element("button"),s=text(a),r=text("x"),t.disabled=n="skipping"===e[10],attr(t,"class","svelte-189zk2r"),toggle_class(t,"active",e[38]===e[1]&&"skipping"!==e[10])},m(e,n){insert(e,t,n),append(t,s),append(t,r),o||(i=listen(t,"click",l),o=!0)},p(r,o){e=r,8&o[0]&&a!==(a=e[38]+"")&&set_data(s,a),1024&o[0]&&n!==(n="skipping"===e[10])&&(t.disabled=n),1034&o[0]&&toggle_class(t,"active",e[38]===e[1]&&"skipping"!==e[10])},d(e){e&&detach(t),o=!1,i()}}}function create_fragment$1(e){let t,s,r=e[2]&&create_if_block$1(e);return{c(){r&&r.c(),t=empty()},m(e,n){r&&r.m(e,n),insert(e,t,n),s=!0},p(e,s){e[2]?r?(r.p(e,s),4&s[0]&&transition_in(r,1)):(r=create_if_block$1(e),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r&&(group_outros(),transition_out(r,1,1,(()=>{r=null})),check_outros())},i(e){s||(transition_in(r),s=!0)},o(e){transition_out(r),s=!1},d(e){e&&detach(t),r&&r.d(e)}}}function position(e,t,s){return(100-(t-s)/(t-e)*100).toFixed(2)}function instance$1(e,t,s){const r=createEventDispatcher();let n,o,i,a,l,c,u,h,{replayer:p}=t,{showController:d}=t,{autoPlay:m}=t,{skipInactive:f}=t,{speedOption:g}=t,{speed:y=(g.length?g[0]:1)}=t,{tags:$={}}=t,{inactiveColor:v}=t,w=0,b=null,C=!1,S=null,E=null;const _=()=>{b&&(cancelAnimationFrame(b),b=null)},R=()=>{"paused"===n&&(a?(p.play(),a=!1):p.play(w))},N=()=>{"playing"===n&&(p.pause(),C=!1)},x=(e,t)=>{s(6,w=e),C=!1,a=!1;("boolean"==typeof t?t:"playing"===n)?p.play(e):p.pause(e)},A=(e,t,r=!1,n=void 0)=>{E=r?{start:e,end:t}:null,s(6,w=e),C=t,S=n||null,p.play(e)},T=e=>{let t="playing"===n;s(1,y=e),t&&p.pause(),p.setConfig({speed:y}),t&&p.play(w)};onMount((()=>{s(7,n=p.service.state.value),s(10,o=p.speedService.state.value),p.on("state-change",(e=>{const{player:t,speed:r}=e;if((null==t?void 0:t.value)&&n!==t.value)switch(s(7,n=t.value),n){case"playing":_(),b=requestAnimationFrame((function e(){s(6,w=p.getCurrentTime()),C&&w>=C&&(E?A(E.start,E.end,!0,void 0):(p.pause(),S&&(S(),S=null))),w<l.totalTime&&(b=requestAnimationFrame(e))}));break;case"paused":_()}(null==r?void 0:r.value)&&o!==r.value&&s(10,o=r.value)})),p.on("finish",(()=>{a=!0,S&&(S(),S=null)})),m&&p.play()})),afterUpdate((()=>{f!==p.config.skipInactive&&p.setConfig({skipInactive:f})})),onDestroy((()=>{p.pause(),_()}));return e.$$set=e=>{"replayer"in e&&s(17,p=e.replayer),"showController"in e&&s(2,d=e.showController),"autoPlay"in e&&s(18,m=e.autoPlay),"skipInactive"in e&&s(0,f=e.skipInactive),"speedOption"in e&&s(3,g=e.speedOption),"speed"in e&&s(1,y=e.speed),"tags"in e&&s(19,$=e.tags),"inactiveColor"in e&&s(20,v=e.inactiveColor)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&r("ui-update-current-time",{payload:w}),128&e.$$.dirty[0]&&r("ui-update-player-state",{payload:n}),131072&e.$$.dirty[0]&&s(8,l=p.getMetaData()),320&e.$$.dirty[0]){const e=Math.min(1,w/l.totalTime);s(12,c=100*e+"%"),r("ui-update-progress",{payload:e})}655360&e.$$.dirty[0]&&s(9,u=(()=>{const{context:e}=p.service.state,t=e.events.length,s=e.events[0].timestamp,r=e.events[t-1].timestamp,n=[];return e.events.forEach((e=>{if(e.type===EventType.Custom){const t={name:e.data.tag,background:$[e.data.tag]||"rgb(73, 80, 246)",position:`${position(s,r,e.timestamp)}%`};n.push(t)}})),n})()),1179648&e.$$.dirty[0]&&s(13,h=(()=>{try{const{context:e}=p.service.state,t=e.events.length,s=e.events[0].timestamp,r=e.events[t-1].timestamp,n=getInactivePeriods(e.events,p.config.inactivePeriodThreshold),o=(e,t,s,r)=>((r-s)/(t-e)*100).toFixed(2);return n.map((e=>({name:"inactive period",background:v,position:`${position(s,r,e[0])}%`,width:`${o(s,r,e[0],e[1])}%`})))}catch(e){return[]}})())},[f,y,d,g,()=>{switch(n){case"playing":N();break;case"paused":R()}},T,w,n,l,u,o,i,c,h,r,e=>{if("skipping"===o)return;const t=i.getBoundingClientRect();let s=(e.clientX-t.left)/t.width;s<0?s=0:s>1&&(s=1);const r=l.totalTime*s;x(r)},e=>{"skipping"!==o&&("ArrowLeft"===e.key?x(w-5):"ArrowRight"===e.key&&x(w+5))},p,m,$,v,R,N,x,A,()=>{s(0,f=!f)},()=>Promise.resolve().then((()=>{s(8,l=p.getMetaData())})),function(e){binding_callbacks[e?"unshift":"push"]((()=>{i=e,s(11,i)}))},e=>T(e),function(e){f=e,s(0,f)},()=>r("fullscreen")]}class Controller extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{replayer:17,showController:2,autoPlay:18,skipInactive:0,speedOption:3,speed:1,tags:19,inactiveColor:20,toggle:4,play:21,pause:22,goto:23,playRange:24,setSpeed:5,toggleSkipInactive:25,triggerUpdateMeta:26},null,[-1,-1])}get toggle(){return this.$$.ctx[4]}get play(){return this.$$.ctx[21]}get pause(){return this.$$.ctx[22]}get goto(){return this.$$.ctx[23]}get playRange(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[5]}get toggleSkipInactive(){return this.$$.ctx[25]}get triggerUpdateMeta(){return this.$$.ctx[26]}}function create_if_block(e){let t,s,r={replayer:e[7],showController:e[3],autoPlay:e[1],speedOption:e[2],skipInactive:e[0],tags:e[4],inactiveColor:e[5]};return t=new Controller({props:r}),e[32](t),t.$on("fullscreen",e[33]),{c(){create_component(t.$$.fragment)},m(e,r){mount_component(t,e,r),s=!0},p(e,s){const r={};128&s[0]&&(r.replayer=e[7]),8&s[0]&&(r.showController=e[3]),2&s[0]&&(r.autoPlay=e[1]),4&s[0]&&(r.speedOption=e[2]),1&s[0]&&(r.skipInactive=e[0]),16&s[0]&&(r.tags=e[4]),32&s[0]&&(r.inactiveColor=e[5]),t.$set(r)},i(e){s||(transition_in(t.$$.fragment,e),s=!0)},o(e){transition_out(t.$$.fragment,e),s=!1},d(s){e[32](null),destroy_component(t,s)}}}function create_fragment(e){let t,s,r,n,o=e[7]&&create_if_block(e);return{c(){t=element("div"),s=element("div"),r=space(),o&&o.c(),attr(s,"class","rr-player__frame"),attr(s,"style",e[11]),attr(t,"class","rr-player"),attr(t,"style",e[12])},m(i,a){insert(i,t,a),append(t,s),e[31](s),append(t,r),o&&o.m(t,null),e[34](t),n=!0},p(e,r){(!n||2048&r[0])&&attr(s,"style",e[11]),e[7]?o?(o.p(e,r),128&r[0]&&transition_in(o,1)):(o=create_if_block(e),o.c(),transition_in(o,1),o.m(t,null)):o&&(group_outros(),transition_out(o,1,1,(()=>{o=null})),check_outros()),(!n||4096&r[0])&&attr(t,"style",e[12])},i(e){n||(transition_in(o),n=!0)},o(e){transition_out(o),n=!1},d(s){s&&detach(t),e[31](null),o&&o.d(),e[34](null)}}}const controllerHeight=80;function instance(e,t,s){let r,{width:n=1024}=t,{height:o=576}=t,{maxScale:i=1}=t,{events:a}=t,{skipInactive:l=!0}=t,{autoPlay:c=!0}=t,{speedOption:u=[1,2,4,8]}=t,{speed:h=1}=t,{showController:p=!0}=t,{tags:d={}}=t,{inactiveColor:m="#D4D4D4"}=t;let f,g,y,$,v,w,b=n,C=o;const S=(e,t)=>{const s=[n/t.width,o/t.height];i&&s.push(i),e.style.transform=`scale(${Math.min(...s)})translate(-50%, -50%)`},E=()=>{f&&(isFullscreen()?exitFullscreen():openFullscreen(f))};onMount((()=>{if(void 0!==u&&"array"!==typeOf(u))throw new Error("speedOption must be array");if(u.forEach((e=>{if("number"!==typeOf(e))throw new Error("item of speedOption must be number")})),u.indexOf(h)<0)throw new Error(`speed must be one of speedOption,\n        current config:\n        {\n          ...\n          speed: ${h},\n          speedOption: [${u.toString()}]\n          ...\n        }\n        `);s(7,r=new Replayer(a,{speed:h,root:g,unpackFn:unpack,...t})),r.on("resize",(e=>{S(r.wrapper,e)})),y=onFullscreenChange((()=>{isFullscreen()?setTimeout((()=>{b=n,C=o,s(13,n=f.offsetWidth),s(14,o=f.offsetHeight-(p?80:0)),S(r.wrapper,{width:r.iframe.offsetWidth,height:r.iframe.offsetHeight})}),0):(s(13,n=b),s(14,o=C),S(r.wrapper,{width:r.iframe.offsetWidth,height:r.iframe.offsetHeight}))}))})),onDestroy((()=>{y&&y()}));return e.$$set=e=>{s(39,t=assign(assign({},t),exclude_internal_props(e))),"width"in e&&s(13,n=e.width),"height"in e&&s(14,o=e.height),"maxScale"in e&&s(15,i=e.maxScale),"events"in e&&s(16,a=e.events),"skipInactive"in e&&s(0,l=e.skipInactive),"autoPlay"in e&&s(1,c=e.autoPlay),"speedOption"in e&&s(2,u=e.speedOption),"speed"in e&&s(17,h=e.speed),"showController"in e&&s(3,p=e.showController),"tags"in e&&s(4,d=e.tags),"inactiveColor"in e&&s(5,m=e.inactiveColor)},e.$$.update=()=>{24576&e.$$.dirty[0]&&s(11,v=inlineCss({width:`${n}px`,height:`${o}px`})),24584&e.$$.dirty[0]&&s(12,w=inlineCss({width:`${n}px`,height:`${o+(p?80:0)}px`}))},t=exclude_internal_props(t),[l,c,u,p,d,m,E,r,f,g,$,v,w,n,o,i,a,h,()=>r.getMirror(),()=>{S(r.wrapper,{width:r.iframe.offsetWidth,height:r.iframe.offsetHeight})},(e,t)=>{switch(r.on(e,t),e){case"ui-update-current-time":case"ui-update-progress":case"ui-update-player-state":$.$on(e,(({detail:e})=>t(e)))}},e=>{r.addEvent(e),$.triggerUpdateMeta()},()=>r.getMetaData(),()=>r,()=>{$.toggle()},e=>{$.setSpeed(e)},()=>{$.toggleSkipInactive()},()=>{$.play()},()=>{$.pause()},(e,t)=>{$.goto(e,t)},(e,t,s=!1,r=void 0)=>{$.playRange(e,t,s,r)},function(e){binding_callbacks[e?"unshift":"push"]((()=>{g=e,s(9,g)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{$=e,s(10,$)}))},()=>E(),function(e){binding_callbacks[e?"unshift":"push"]((()=>{f=e,s(8,f)}))}]}let Player$1=class extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{width:13,height:14,maxScale:15,events:16,skipInactive:0,autoPlay:1,speedOption:2,speed:17,showController:3,tags:4,inactiveColor:5,getMirror:18,triggerResize:19,toggleFullscreen:6,addEventListener:20,addEvent:21,getMetaData:22,getReplayer:23,toggle:24,setSpeed:25,toggleSkipInactive:26,play:27,pause:28,goto:29,playRange:30},null,[-1,-1])}get getMirror(){return this.$$.ctx[18]}get triggerResize(){return this.$$.ctx[19]}get toggleFullscreen(){return this.$$.ctx[6]}get addEventListener(){return this.$$.ctx[20]}get addEvent(){return this.$$.ctx[21]}get getMetaData(){return this.$$.ctx[22]}get getReplayer(){return this.$$.ctx[23]}get toggle(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[25]}get toggleSkipInactive(){return this.$$.ctx[26]}get play(){return this.$$.ctx[27]}get pause(){return this.$$.ctx[28]}get goto(){return this.$$.ctx[29]}get playRange(){return this.$$.ctx[30]}};class Player2 extends Player$1{constructor(e){super({target:e.target,props:e.data||e.props})}}export{Player2 as Player,Player2 as default};
//# sourceMappingURL=/sm/e69e41f497e75b8f453497d876dae6a294ffbf127a8b28183cc9d7cc10b14433.map